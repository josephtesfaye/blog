var store = [{
        "title": "Focus",
        "excerpt":"Music that helps you focus on the current moment.    ","categories": [],
        "tags": [],
        "url": "/blog/music/focus/",
        "teaser": null
      },{
        "title": "挪威之慢",
        "excerpt":"“这就是了”，科尔曼指着一个平淡无奇的二楼公寓说。此刻我们正站在挪威中部城市特隆赫姆的一个街角，这是个令人喜爱的大学城，坐守在峡湾边山，渡口随处可见。特隆赫姆是我祖父生长的故乡，所以这，应该就是他曾住过的公寓了。   此时正值六月初，差不多晚上十点了，光线让人慵懒，却不见减弱的迹象。怪不得科尔曼——我的85岁的远方表亲——仍然愉快地称现在是“下午”，好像晌午之后午夜之前的所有时间都叫下午似的。   在这样一个冬天白昼缩短到只有几个小时，而夏天的夜晚不怎么落下黑幕的北纬地区，这算是这里的人们与时间保持的一种轻松随意的关系吧。再上一点的北极圈，昼夜的情形甚至更为极端，极端到一整年都只是无尽单调的日子，因为有六个月尽是白昼，而六个月尽是黑夜。   其实这也是我来挪威的原因之一——我想尽量往北走，越北越好，去看看那儿的人在这种“二元”的世界中如何生存下去，如何不会走向哪怕只是疯癫的境地。   另一个，也是更私人的一个动因，是解开关于我那捉摸不透的祖父的谜题。虽然理论上我只有四分之一的挪威血统，但你肯定看不出来，因为我祖父的影子长久地影响着我们整个家族。   哈里•伊尔根斯•拉森于二战中期乘坐一艘38英尺长的船穿过北大西洋，逃离挪威。当时，挪威被德国纳粹占领，所有旅行都受到严密监控。哈里和他的三个朋友——当中并无一人去过公海——告诉纳粹港务长，他们只是沿岸驶往特隆赫姆。   趁着午夜，他们将船调整为向西行驶，就这么渡过了大洋。第一日指南针就跌落了船舷，但奇迹般地，他们抵达了纽约，唯一剩下一张银狐的皮毛。   我祖父几乎从未提起过他在战争中的英勇事迹。我两岁的时候他就去世了，虽然我不记得他的样子，但他故事里的思想对我造成的影响比任何在世的人都要大。   祖父的出生地相当于我此行的一个象征性的起点。而我将会从特隆赫姆出发，搭乘著名的海达路德游轮，沿着挪威的海岸线一路向北，穿过北极圈，一直到极昼之地——希尔克内斯。这是我祖父50年前带着我父亲航行的路线。   而现在我带上了妻子和刚满六岁的儿子霍尔特。所以这会是一次关于家族象征、自我发现以及太阳昭临的旅程。   现在我们还在“定位我祖父公寓”的阶段，就情况而言，其实我已经失败了。大约两年前，同样在这个社区，我来找过哈里的公寓。但当时科尔曼指给我的是另一个完全不同的地方，离我们现在站的位置隔了一个街区。   “你确定是这个吗？”最终我开口问科尔曼，并不想得罪他——在挪威，我总是感觉很容易就得罪人。   “当然啦，就是这个，”他说得很确定，紧接着又补一句，“我觉得。”   第二天，灰色的天空透出一种不祥，我们道别了科尔曼，然后登上了“山妖峡湾号”渡轮。随着特隆赫姆渐渐远去，我能感到心里有种刺痛——德国人把这叫做die Reisevorfreudekribbein，就是当一个人要启程离开前往未知领域时产生的感觉。伴着一声长长的汽笛轰鸣，渡轮驶向了峡湾，向北开去。   海达路德字面意思是“特快线路”，虽然如今也没什么特快的，但是回到1893年它刚创立的时候，这条航线不可谓不是一个创举——邮件、货物和乘客得以运往北部的社区，要是没有这条线，这些地区就真的完全与世隔绝了。从1936年开始，船只就每日从卑尔根一路驶往希尔克内斯，只需要六天就能行驶完2500海里，并且中途在34个港口停留。结合精湛的导航技术，脚踏实地的精神和摄人心魄的天然美景，海达路德游轮现已成为挪威珍贵的国家象征。   现在2014年的海达路德已经跟过去的完全不同。随着时间流逝，原先作为海岸快线的运输任务已经显得很无必要，因为邮件、货物和乘客已转向更为便捷的航空运输，迫使该公司转向旅游业发展，使其成为首要的收入来源。从一个实用性的海岸渡轮到一个彻底的旅游公司，这样的转变产生了不少的阵痛。   山妖峡湾号就是这个新海达路德的代表。在霍尔特和我兴奋地探访这艘船的九层甲板时，很快我们就意识到我们正见证着一家陷入身份认同危机的公司。一方面它在尽力满足眼光愈来愈高的现代乘客的欲望，另一方面又在维护着一种淡淡的挪威文化。   因此，船上配备了两个小型按摩浴缸，也装上了五颜六色的派对灯饰，但这些设施晚上11点就会准时关闭。船上有五个酒吧，但有几个在我们的整个旅程中都是关闭的。第八层甲板有一个被人遗弃的舞厅，但仍一天24小时飘荡着轻柔的80年代音乐，旁边坐着几对老夫老妻，一边呷着苏格兰威士忌，一边打着桥牌。   每天下午四点，行程经理会分发关于次日游览的信息单。同行的乘客们似乎对接收游览信息跟对游览本身一样热衷，因为清单一抢而空，还成为了分析争论的对象。有时，行程经理会宣布将有“eine keine, kleine informationsveranstalting”，也就是“一个非常简短的宣讲会”（看来德语里面对宣讲会还有一整套的细分呀），比如是关于去往斯瓦蒂森山冰川的4A号线路——报名参加4A号线路的请到五层甲板的会议厅集中——这句话会在船上的广播系统里用挪威语、德语和英语轮流不断地播放。当我后来见到播送这些通知的行程经理埃斯基尔德•阿尔内•奥涅时，感觉自己像是见到了上帝之嗓。   山妖峡湾号真正的魅力在于从船上看出去的景色。在海达路德这样观光性的航线上，一路的风景就是一种货币——一种固有的（虽然也是变化的），由这样开阔的视野所产生的价值。搭上一艘自称“全世界最美丽的海上航行”的船，乘客们总是会期望得以一窥超乎寻常的地貌奇观。   而船上的布置就满足了这种期望——几乎所有的椅子都是朝向外的，这样的布置并不适合小组讨论。乘客们各占一块地盘以保护自己的视线。在第八、九层甲板的观景厅里，最前排的位置总是被人占据的，一旦有人离开座位（啊！），就会有机警的觊觎者马上上位。   海达路德的船其实很慢，应该说，非常非常慢。虽然曾经号称“海岸快线”，但这艘渡轮实际上最大的航行速度只有15节，大概是轻快地骑一辆自行车那么快。所以你真的有足够的时间驻足观赏每一块礁石，每一片浅滩，每一处风蚀的崖壁。   缓慢的航行让我们不禁陷入一种与景观交流的思绪中。挪威虽然只有150,000平方英里（大概是蒙大拿州的面积），但也有世界上最蜿蜒曲折的海岸线之一，总长达到了匪夷所思的64,000英里（作为对比，整个美国的海岸线长是95,471英里）。显然，挪威的海岸线对于这个国家的身份认同有着极其重要的意义——不只是因为它的主要工业是渔业和海上钻探，还因为那一纵列细小而荒芜的礁石，形成了一条天然的不受破坏的海上通道，一路通向最北部的海岬，“挪威”也因此而得名，在古诺尔斯语里意即“通向北边的路”。   探索挪威那参差不齐的海岸线以及那成千上万的岛屿，就好似在研究这个国家的基因序列——它是独特的，也是无尽复杂的，俨然就是这个国家的标志。凝视窗外，我忍不住掉进一种近乎深刻的遐想中，我开始思考岛屿存在的随机性，灯塔所隐喻的生殖崇拜，以及天空、陆地和海洋的交界所形成的一种天然心电图。   走神，回过神来，又走神。当我最终清醒过来时，发现周围的人都没有动过。   我这种慢悠悠的（以及媒介性的）叙述节奏类似一种正流行在挪威的让人困惑的电视形式——慢电视。2009年，挪威的公共电视台挪威广播公司（NRK）把摄像机架设在火车头上，无间断直播了火车从卑尔根到奥斯陆长达6小时22分的旅程。   NRK对该节目的收视率并无过多的期许，但没想到一夜之间就造成了轰动。两年后NRK再续前作，放出了一个更慢的节目——《海达路德逐分逐秒》，全程直播长达134小时的沿岸航行。   在船相对安静地驶离卑尔根后，该节目的观众开始逐渐增加，以至于到第三、四天的时候，途径城镇的居民都出来迎接摄影机。人们穿着稀奇古怪的传统服饰，仪乐队为船只的到来和离去奏响乐曲，当地一个机会主义的政客在驳岸上展开一条巨大的横幅，趁机在节目上宣布她的候选资格。这个节目着实成为了一个举国盛事，全国有半数人至少看了整个航行的某个部分。   NRK在意识到他们创造了一种全新的电视形式后，接下来又播出了一档长达12小时的节目《全民柴火之夜》，其中有持久的关于如何正确堆放木柴（树皮朝上还是朝下）的争辩，中间穿插着大胡子男人们有节奏地敲打木头的表演。节目最终以整晚8小时的木柴燃烧达到高潮，期间不睡觉的市民们兴奋地在Twitter或者Facebook上就下一根木柴摆放的位置提出建议。还有一个18小时的关于钓三文鱼的节目。   RTV的总管事后承认这还是让人觉得有点短。   我习惯性地询问几乎每一个遇到的挪威人，在他们看来为什么慢电视能在挪威这么受欢迎。绝大多数的回答都不尽人意——有的说仅仅是出于“爱国”，也有的说是因为这类节目“让人放松”。我辩解道许多人也爱国也想放松，但不意味着他们会六小时坐着看一辆火车。   我最终给NRK负责策划慢电视的制片人鲁内•默克勒比斯特打了电话。“慢电视不同于你在电视上看过的任何东西，”他说，“如果你放慢步伐，如果你熬过了想要离开的那一刻，一个全新的故事就会出现，然后不久就会变得有戏剧性。”他还特意指出了《海达路德逐分逐秒》里面一个10分钟的片段，里面唯一的动作场面是一头奶牛走过一个海滩。   “奶牛会继续走吗？它会停吗？”他说，“你一无所知。所以这很让人兴奋。”   在船上呆了两天后，这次旅程让人感觉开始进入了一种永恒的状态。一天夜里大约凌晨1点钟时，走过那个被遗弃的舞厅，望向那片忘记落下黑幕的天空，我不禁对着Life Is a Highway这首歌独自跳起舞来。   随着渡轮的许多停泊点接踵而至，有时候感觉我们哪儿也没到，又或者是一下子就历经了所有地方。   罗弗敦群岛像一支慵懒的手指伸向挪威海，我们在位于它南部海岸的斯塔姆松村登岸，然后租了一辆老旧的梅赛德斯，沿着群岛上的公路，开过了16座桥。   2007年连通大陆的公路竣工后，进入罗弗敦群岛才变得更容易。但与这种连通同时发生的是另一种形式的现代化——过去罗弗敦居民赖以维生的捕捉鳕鱼的小型捕鱼业大幅减少，工业大船、海上加工以及大公司间的合并导致了整个村落的消失殆尽。   现在的罗弗敦，基本上是游客的活动场所，他们过来住在地道的rorbuer ——渔夫的小木屋里，只不过现在这些木屋被渔夫遗弃了。许多小木屋都不再那么地道了，比如我们的就有地暖和淋雨喷头。   然而，“地道”是一个灵活多变的概念，罗弗敦只是挪威过去几十年迅猛变化的一个例子。   在沿岸航行的时间里，对于是什么吸引着挪威人去看慢电视，我逐渐发展出了一个更加牢靠的猜想。去参观山妖峡湾号的驾驶室时，我见到了大副斯韦勒•安德烈亚斯•鲁德。我们谈及挪威在过去20年里发生了多少变化，许多与我交谈过的人都会提及这个有些伤感的话题。挪威王国于1905摆脱瑞典统治后成立，是斯堪的纳维亚国家中最年轻的，所以还仍然遭受着所谓的“幺儿综合征”。以前挪威的物价同瑞典、丹麦比起来相对便宜（我说的是相对），所以瑞典人会到挪威购物，而挪威人会去瑞典工作。然后1969年在挪威的海岸线上发现了石油储藏，一切都变了，这个幺儿突然变得富有了。   这种突然的资本大量涌入产生的副作用之一，是挪威生活方方面面紧凑的现代化。就在20年前，奥斯陆还是一个慵懒而偏僻的小镇，以每年颁发诺贝尔奖闻名。而今天，它是欧洲增长最快的经济体。放眼望去，四下都是摩天大楼，包括那五栋饱受争议被戏称为“条形码”的金属玻璃建筑。   随着收入和消费的增长，生活的步伐也显著加快了。要尽量在较短时间内适应这样快速变化的许多挪威人，似乎正在遭受一种文化冲击，他们对未来忧心忡忡，对刚刚过去的曾经恋恋不舍。   当我问到鲁德先生关于慢电视受欢迎的看法时，他显得若有所思。   “也许对人们来说是一种回到不久以前的方式，”他说，“为了记住过去是什么样子。”   “过去是什么样子？”我问道。   “我不确定，”他说，“慢一点。”   这件事情我想得越多就越容易理解，就好像三十几岁的挪威人会怀念他们的青春，其夸张程度不亚于八十几岁的人怀念他们的过去。也许挪威人是在围着一团虚无的篝火聚集开来，倾听来自古老边疆的惆怅往事，希冀着一种理想化的或许从未存在过的生活节奏。   我祖父基本什么也没带就来到美国，创办了后来极为成功的多国航运公司。但即使变得富有了，他还跟他的故土维持着一种奇怪的关系。他没有在童年的家乡特隆赫姆买房子，而是在挪威南部的泰勒马克郡购置了一处偏僻的静居地，并把它命名为“梦想之地”。   那是一个理想化的挪威——它有大约12个传统木屋，房顶上覆盖着草，房里有小小的装饰的床。我有一张两岁时候的照片，穿着挪威的传统毛衣，坐在其中一个木屋的顶上。我觉得祖父是在以自己的方式，尝试创造出一种地道而淳朴的东西，来跟他的美国家庭分享。但是他凭空造出的这个地方，最终跟周围其他地方别无两样，也毫无特色，就仅仅是一个存在着的地方而已。   开车跨过罗弗敦的16座桥返回斯塔姆松，我们要在那儿重新登上海达路德的渡轮，一路上我在想着那个伪劣的梦想之地。   有了先前的经验，霍尔特和我看起风景来更加游刃有余了。我们熟练地挤到观景厅前面的预订座位上，坐定下来看着风景平稳地滑过。我们一直坐着，霍尔特开始有点不安分，不多久就睡着了。   我开始意识到，由于让人找不到“地域感”的大陆使人心里空荡荡，使人渴望一个真正的家，现在回到船上继续航行，令我们感到很舒坦。   外面的风景是没有重复的，你无需评判而只需带着一种纯粹的好奇去观赏。这样的呈现还有一种美感，那就是船上的窗户把挪威框了起来，像只有一个频道的电视屏幕一样。   在慢电视里，当海达路德游轮驶进希尔克内斯时，挪威王后从她的游艇上向游轮挥手致意。我们也驶进了希尔克内斯，只是少了皇室的致礼。   确实，作为这样绝美的旅程的终点站，希尔克内斯不知怎么让人有些失望。而且对于挪威人如何度过太阳不会升起的黑夜，我还没有得到满意的答案。当我向我们的一个房东埃温•努尔许斯问起这个问题时，他想了一会儿说：“我喜欢冬天，冬天比夏天更长久。”   这样不以为然的回答让我感到很熟悉。对于挪威人如何熬过这种季节性极端光照情况这个人类学课题，挪威人集体性地对我耸耸肩。他们确实普遍承认在夏天会少睡一点，从太阳那里获得一种能量，但除此之外，还真没怎么想过这个问题。   “我在佛罗里达住过一年，”特里内•默勒——一个希尔克内斯妇女说，她正遛着哈士奇。“完全没有季节才更奇怪哩。”   最后我才意识到，我的整个关于光照与精神健康之间关系的假设就是有缺陷的。挪威人不会提到“极昼”，因为这只是一个乱造的概念，用来印在游客的帽子上罢了，然后被不知有多少才气的作者发扬光大了。但如果要说这次向北之旅我学到什么的话，就是真相不一定有多重要。   我祖父去世前不久写了一本薄薄的小书，叫做《去纽约的最后一艘船》，里面是典型而朴实的挪威散文，记叙了他具体是如何逃往美国的。这本书我读了一遍又一遍，每次都渴望知道从上面找不到的答案。虽然里面记叙了很多实用的细节，比如他们装备了多少面包，或者他们如何设法在大风中收帆，却没有提到船上的人，也没有挖掘他与故土之间保持的复杂关系。   在挪威的最后一夜，天终于清朗了许多。即使可以随心所欲地在午夜看到太阳，我还是想多看一看。小跑上一坐小山，下午十一点五十八分刚好抵达顶点。没有期望太多，我已经准备好对看到的一切感到失望了。   午夜的钟声敲响了，太阳，一览无余，光辉灿烂。   还是同样的太阳，一如既往。   但是多好的一个太阳啊。   多好的一个地球啊。   我想象自己正站在一个快速旋转的星球的最顶端，向那遥远的太阳之躯倾了倾头，以示敬意。   我曾每一天都见到它，却从未在今天之前见过这样的它。   原文：Norway the Slow Way by Reif Larsen from New York Times   翻译：Joseph Huang  ","categories": ["English"],
        "tags": ["Translation","Travel"],
        "url": "/blog/english/norway-the-slow-way/",
        "teaser": null
      },{
        "title": "已经听了不知多少遍了",
        "excerpt":"最开始听到的是Get Lucky，在油管上， 没有MV，只有一张CD封面，夕阳下一个乐队的剪影。开始以为只是又一首热门单曲，就好像 无数其他大热单曲一样，各种浮华炫丽想尽一切吸引你的耳膜和眼球，然而过了那四或五分 钟后什么也没留下。其实初听Get Lucky 后确实什么也没留下，很快就完全不记得曾经听过。   直到无意中看到这张专拿了格莱美，我想，卧槽，竟然是一张电音，顿时想到各种夜场蹦迪 闹腾的情景，然后感叹现代人的音乐品味已经堕落到何种地步了，还是我跟不上时代节奏了？ 在我有限的听过的电音生涯里，并没有产生出对这种音乐类型的多大喜爱和专门去听一张电 音专辑的欲望，除了偶尔羡慕视频里千万人一齐舞动狂欢的青春激情，一个人内心躁动面不 改色地对着电子屏幕的寂寞感和穷到哪也去不了的无力感，并没有对这种音乐有多大感觉， 因为这种音乐是记不住的。   但还是习惯性地到虾米搜了这张专来听，初听了几首，只感觉还好，看到评论里有人在撕逼， 这个乐队是不是真朋克，虽然自认为听了不少音乐和对音乐流派有不少了解，但作为一个善 于自我怀疑的人此刻还是动摇了，朋克还能是这种感觉？过了一段时间后这种讨论完全消失 了。听完第一遍，感觉就是，还好。   然后毕业了。五月初考完最后一场试，在朋友圈发了一条“College is over”，收到十几个 赞和几个问候。感觉很平静，不想说话，不想发任何消息，想把自己藏起来不让任何人知道。 然而还是无可避免地了解到谁谁谁出国了，谁谁谁考研了，谁谁谁找到工作了，无可否认内 心的悸动，可这些他妈跟我有什么关系？我还是习惯生活在一个我我我我我的世界里。4/5 的面对，1/5的逃避吧，这一天我已经等了很久了。   然后来到了这个城市。来之前下载好几张最喜欢的专装进手机里，其中就有这张。试图在这 个完全陌生的城市开始我的“伟大构想”，已经作好了最坏的打算。最坏，无非就是滚回老家， 或者死亡。其实生活很淡定，甚至有些书呆子式的沉闷，每日往返于图书馆与住处。一天晚 上天气特别好，离闭馆还有一小时已经按捺不住，收拾好物品走到馆侧的一大片草坪，走到 离黑暗比较近 的一棵树下。坐下，躺下，皆不得宜，草尖有些扎人，最后还是忍着刺痛躺 下了。天空并不星光璀璨，只因城市的灯光太过闪耀，但也已心满意足，已经比前一个住过 的城市好太多了，讨厌霓虹泛滥的城市。风吹得很爽，能明显感觉到肾上腺素上涨，然后我 播放了这张专辑，戴着99元买的重低音耳机。我忍不住跳了起来，踩着魔鬼的步伐独自在阴 影里，一旦有人路过就淡定假装在打电话。音符好似来自四维时空，层层叠叠，每一个鼓点、 每一处休止都恰到好处，整个色调是暖的，一种橘色和淡紫色混合的暖，人声也是恰到好处 地柔和、细腻，仿佛成了配器一般。没有试过叶子、白面、LSD神马的，听说中间那个比性 欲来得猛烈几万倍，可能感觉都是飘吧，飘飘欲仙的飘。此刻我想象自己飘在太空，一种若 有若无的声音从黑暗里传来，弥漫在四周，环抱着我，告诉我，别担心，let it go, set it free, I will hold you… 仅仅是喜欢这种care free的状态和感觉，人生有什么好担 心的，nothing really matters。上一次像这样是5年前吧，在月光下听着Tina Turner踩着 魔鬼的步伐。   然后遇到了文，难以忘记，初次见他脸上的笑颜。二十天内，我们白天各自忙自己的事，早 晨或晚上见面聊几句，家长里短，虽然我其实并不care，但还是喜欢和他聊，喜欢看他笑的 样子。他会弹吉他，跟我说家里有好几把，然后决定卖给我一把，我也决定买了，喜欢看他 笑的样子。二十天后的一天他突然说要搬走了，我很难过，故意表现出一种平淡里带着不经 意的伤心的样子。那天我没有早早去图书馆，而是陪他看完一个喜剧节目，我一半在看节目， 一半在偷偷看他。十一点的时候送他到车站，阳光明媚，清风徐徐，树影婆娑，他在阳光里 笑起来的样子更迷人，我试图用脑中的相机捕捉他的一颦一笑一回首一低头。告别的时候趁 机握了一下手，第一次触碰到肌肤，凉凉的，柔柔的，很舒服。他走后的几天心思无法集中， 忍不住幻想很多有的没的，却又苦于见不到人，内心很痛苦。一周后我约他去爬山，他答应 了，我乐开了花。又是一个阳光更加明媚的日子，山上的空气像水晶般透明，这次终于有机 会用真正的相机把他捕捉下来。登山的时候问他喜欢什么音乐，他说喜欢黄家驹，我说我很 喜欢电子音乐，于是就又放起了这张专。然而周围环境音太吵，手机音响太小，听起来并没 什么感觉。我只是喜欢看他笑的样子。   一天起得很早，感觉疲惫又不想睡回去，躺倒在客厅的沙发上，掏出手机顺手开始播放这张 专。身子蜷缩着，把手机贴近耳朵，闭上眼睛，一霎间我又飘到了宇宙里，眼角带着泪。最 喜欢听Giorgio的大段独白，每次听到某一处就开始飙泪，羡慕他，16岁就可以拥有一把吉 他，很早就决定自己以后要干什么，并且一直做下去做出了这样美妙的音乐。曾经的Disco 之王，娴熟的律动让你没有一丝担忧，让你的每一个细胞只管在宇宙深处畅游，自由而细腻 的想象，好像回到童年那些天真烂漫的梦里，越来越快的节奏，仿佛离重生越来越近，在耳 膜快要震裂之际，却又隐隐知道终于要回到现实，留下的只有不舍、回味、和希望。   Within 是很奇妙的一首歌，钢琴伴奏，抒情唱腔，但是没有一般情歌的滥俗感，反而还浑 身是电，一种隐隐约约偶尔迸发的电。它空灵、嘹亮、深邃、冷，那是另一个维度的世界里 才存在的情景，类似银翼杀手里的落日余晖，星际穿越里与黑洞擦肩而过时。那是一个不需 要体温的机械世界。听了很多遍后仔细看名字，才发现这不就是一部讲述宇宙旅行的音乐史 诗？与我的原始感受不谋而合。Contact里的音效，Horizon里的寂寥，着实是要把听者置身 于宇宙空间里去啊。   昨天起晚了，整理好已经没心情去图书馆了，但又不想浪费一天，况且是这么美好的一天， 也许是立冬前最后的好天气。于是爬到楼顶的天台顶，铺好垫子，躺了下来。直面深蓝的天 空，一扭头是慢慢西沉的太阳，然后开始疯狂自拍，各种姿势各种体位，不为什么，就想知 道老了以后看到这些照片是什么感觉。接着放音乐，还是这张专，又听到哭。循环了两遍后， 太阳已经彻底沉下去了，只在天角留下一点暖色调的光和远处塔吊的剪影。   一年马上又要过去了，好像发生了很多，好像又什么都没发生，昏昏叨叨，胡搅蛮缠，忘乎 生死，我欲成仙，谁与争锋。有时候感觉我好像一朵白莲花哦。   唯有音乐，始终不弃。   2015/11/07 于深圳大学城图书馆    ","categories": ["Diary"],
        "tags": ["Music"],
        "url": "/blog/diary/ram/",
        "teaser": null
      },{
        "title": "Java: Introduction",
        "excerpt":"Java is a high-level programming language. A high-level programming language is easy to write and read for humans, and it’s portable, which means it can run on different computers and systems. Java, Python, C++, C, and Perl etc. are all high-level languages. In contrast, a low-level language such as machine language and assembly language, is hard to write or read for humans. They can run directly by a computer, while high-level languages need to be translated to low-level language before running. A low-level language isn’t portable, which means it can only run on one kind of computer.   There are two ways of translating high-level language to low-level language: interpreting and compiling. Interpreting is to translate a program line by line, alternatively reading lines and carrying out commands in an interpreter. Compiling is to translate a program all at once before running any of the commands in a compiler. In compiling, the high-level language is called the source code and the low-level language is called the object code or executable. Java is both interpreted and compiled. Java’s compiler generates byte code, a kind of machine language, for Java Virtual Machine (JVM), which is easy to interpret and portable.   +-------------+    +----------+    +--------------+    +-------------+    +------------------+ | source code |--&gt; | compiler |--&gt; | byte code    |--&gt; | interpreter |--&gt; | result on screen | | x.java {io} |    +----------+    | x.class {io} |    +-------------+    | {io}             | +-------------+                    +--------------+                       +------------------+   The process of analyzing the structure of a sentence is called parsing.   Basic operations in a program for all languages:      Input   Output   Math   Testing   Repetition   The hierarchy of Java the programming language:   Library: a collection of method and class definitions └── Package: a collection of classes, e.g. java.lang, java.awt      └── Class: a collection of related methods; a set of objects          └── Object: a collection of related data with a set of methods operating on it              └── Method: a named collection of statements                  └── Statement   Java is also a development platform which aims at “Write once, run everywhere”, i.e. the same program written in Java can run on various platforms. Java has different editions:      Java Standard Edition (Java SE)            Java Development Kit (JDK)       Java Runtime Environment (JRE)           Java Enterprise Edition (Java EE)   Java Mobile Edition (Java ME)   Installation   For Windows:           Download the package and install it as instructed.            Create the JAVA_HOME environment variable: In CMD type:       setx /m java_home C:\\Program Files\\Java\\jdk1.8.0_101            Add %JAVA_HOME%\\bin to your execution path (classpath). See path and class path.            Check the JDK version installed on your OS using javac -version.       For RHEL-like linux distros (Centos, Fedora), the packages are named as below:      bin: java-1.8.0-openjdk-devel   bin: java-11-openjdk-devel.x86_64   src: java-11-openjdk-src.x86_64   doc: java-11-openjdk-javadoc.x86_64   You can install them with yum or dnf:   sudo dnf install java-devel sudo dnf install java-src java -version   See more at openjdk and Fedora docs.   Quick start   Your first “Hello World!” program.   Open a text editor and put the following code in it, and save as “HelloWorld.java”:   public class HelloWorld {     public static void main(String[] args) {         System.out.println(\"Hello World!\");     } }   Open the shell on your system, e.g. bash on Linux and CMD on Windows, run these commands in the directory where the file is saved:   javac HelloWorld.java java HelloWorld   You should see the output Hello World!.   If you bump into this error:   Exception in thread \"main\" java.lang.UnsupportedClassVersionError: HelloWorld has been compiled by a more recent version of the Java Runtime (class file version 55.0), this version of the Java Runtime only recognizes class file versions up to 52.0.   See How to Fix java.lang.UnsupportedClassVersionError.   As you see in the directory there are two files, HelloWorld.java and HelloWorld.class. Files with .java suffix are Java source code files and .class are bytecode files compiled from the .java files. There’s another file format the jar files which have the suffix .jar. These are Java archive files, where the standard classes are stored. Most of the standard Java classes are stored in rt.jar in your JAVA_HOME.      Regular jar files:            In Eclipse:                    In package explorer right click the project and select “Export”;           Select “JAR File” and click “Next”;           In the box labeled “JAR file” enter a name for the jar file. The name should end with “.jar”. Click “Finish”.                       Commands:                    Compile the source code files;           Execute jar cf &lt;name&gt;.jar *.class. This works only if all the classes are in the default package; .class means every class in the package is included in the jar file. You can specify the class names individually and separate them with spaces to include only certain classes.                           Executable jar files:            In Eclipse:                    In the 3rd step of creating a regular jar file, instead of clicking “Finish”, click “Next” twice to get to the “Jar Manifest Specification” screen;           In the box labeled “Main class” enter the name of the class that will be run when the jar file is executed. Click “Finish”.                       Commands:                                 Compile the source code files;                                    Create a manifest file (a plain-text file without an extension) that contains the line               Main-Class: &lt;class name&gt;                where class name is the name of the class that contains the main() method. This line must end with a new line. Then put the manifest file in the same directory where you will issue the jar command;                                    Create the jar file by executing:               jar cmf &lt;manifest file&gt; JarFileName.jar *.class                                    Run the jar file:               java -jar JarFileName.jar                                       Developing tools   Java programs are normally developed with an IDE, i.e., Integrated Developing Environment. Here are the most commonly used IDEs:      Intellij IDEA   Eclipse   NetBeans   You can also use plain text editors such as Emacs or Vim. After all, codes are just plain texts!  ","categories": ["Java"],
        "tags": [],
        "url": "/blog/java/java-introduction/",
        "teaser": null
      },{
        "title": "Java: Elements of Statements",
        "excerpt":"Literals, identifiers, symbols, values, types   A value is a number, a character, a string of characters, or a boolean, etc.   Literals make the names of values. A literal could be a digit, a character, or a “symbol”. For example, 100 contains the literals “1”, “0”, “0” and represents the value of one hundred.   A type is a set of values. Java is a statically-typed language which means every value has a designated type, or in other words, there’s no values that don’t have a type. Java types can be divided into two categories, primitive types and reference types (or object types).   Identifiers   An identifier is an unlimited-length sequence of Unicode letters and digits used as the names of variables, methods and classes. An indentifier can start with a letter, an underscore _, or a dollar sign $, but it’s good practice to always begin with a letter. It cannot start with any other kind of characters including digits, whitespace, hyphen, asterisk, equal sign, etc, and it cannot contain whitespaces. In Java identifiers are case sensitive, for example, foo and Foo are different identifiers.   Identifiers cannot be reserved words such as class, public, static, if, else, while, etc.   It’s a good practice to always use meaningful names for variables instead of abbreviations. If the name consists of only one word, spell it in all lowercase letters, and if it consists of more than one word, capitalize the first letter of each subsequent word, such as firstTime. This is called camel casing. If the variable contains a constant value, capitalize every letter and separate subsequent words with underscores, such as DEFAULT_VALUE.   By convention class names should begin with upper case letters, and variable and method names should begin with lower case letters.   Periods are used to indicate different levels of containment in compound names (also called qualified names), e.g. System.out.println().   Symbols      { } Used to group things together. If there are no curly braces in above structures only the first line of the statements will be performed.   // In-line comment   /*…*/ Block comment   /**…*/ Javadoc comment Spaces They do not affect the program, but are useful for organizing code.   Types of types   Java is a strictly-typed language. Every value and every variable has their own type, and each variable can only store a value of the same type. There are two types of Java types: primitive types and reference types.           Primitive types       Primitive types of values are represented using only a certain finite number of bits (a bit is a 0 or 1 and 8 bits is one byte).       Names of primitive types begin with lower-case letters.       When you declare a primitive variable you get a storage space for a primitive value.       You can not create new primitive types in Java.       There are 8 primitive types in Java: byte, short, int, long, float, double, char, boolean.            Reference types       Reference types (also called object types) usually represent more complicated data.       Names of object types should begin with upper-case letters.       When you declare an object variable you get a storage space for a reference to the object. To get space for the object itself you should use new.       You can create new object types.       Java is an object-oriented programming language and most Java types are object types, such as String, Point, Rectangle, etc. Arrays are also object types. null is a special value that means “no objects” and can be assign to any object type variable.       Numbers      Numerical literals can include underscores as separators of digit groups, e.g. 1000000, 2000.000001   Numbers can be represented using scientific notation, e.g. 1.3e10, 3.5E200, 10e10.           Integers       Whole numbers. Integers are represented bitwise using Two’s Complement. See integer clock.       A byte type integer takes up a single byte (a sequence of 8 bits) of memory, which makes this type of numbers range from -128 (-27) to 127 (27-1), inclusive. See Why is the range of bytes 128 to 127 in Java.       A short type integer takes up 2 bytes (16 bits) and ranges from -215 to 215-1.       An int type integer takes up 4 bytes (32 bits) and ranges from -231 and 231-1 [&gt;] (approx. four billion numbers). It’s the default type for integers in Java. See StackOverflow: The range of int.       A long type integer takes up 8 bytes (64 bits) and ranges from -263 to 263-1. Integers of this type are represented by appending an “l” or “L’ at the end of the number, e.g. 500L.            Floating-point numbers       Fractional numbers, real numbers.       A float type number takes up 4 bytes and ranges up to 1038 with 7 significant digits at most. Numbers of this type end with an “f” or “F”, e.g. 1.0F, 2f.       A double type number takes up 8 bytes and ranges up to 1.7x10308 with 15 significant digits at most. It’s the default type in Java for floating-point numbers.            Radices       Numbers can be in different radices:              Binary: beginning with 0b or 0B, e.g. 0b101       Octal: beginning with with 0, e.g. 077       Hexadecimal: beginning with 0x or 0X, e.g. 0x9a           Characters   Characters are of type char and a character takes up 2 bytes of memory. A character is specified in the Unicode character set, which may be a letter, a number, or a symbol, and should be enclosed in single quotes when represented, such as ‘a’, ‘1’, etc.   A character is stored as a 16-bits (short) integer which represents its position in the Unicode set, called Unicode number. In Java the character and its Unicode number is equivalent and can be used interchangeably. For example, you can assign a number to a char type variable or convert a number to a character with typecasting:   char character = 233; int number = 'é'; System.out.println((char) 233); // output: é   A character can be represented with \\u followed by four hexadecimal digits. e.g. '\\u00E9' -&gt; 'é'. You can check a character’s hex number in the character map (Windows).   Not all characters can be represented with one letter or symbol either because they are invisible functional characters such as a tab or a linefeed, or the letters and symbols conflict with reserved literals. These special characters could be represented as escaped characters by using a backslash \\. Some common escaped characters are:      \\t: a tab   \\r: a carriage return   \\n: a linefeed   \\b: a backspace   \\f: a formfeed   \\': a single quote   \\\": a double quote   \\\\: a back slash   Boolean values   The results of logical propositions. A boolean value is either true or false and has type boolean.   Strings   A sequence of one or more characters enclosed in double quotes.   Operators      For these operators the order of operations is based on the rules of precedence.   They only work with primitive types.   Arithmetic      +: Add (numbers, characters), concatenating (strings)   -: Subtract   *: Multiply   /: Divide   %: Modulus operation, works on integers and yields the remainder of the first operand divided by the second. It also works on real numbers and yields the residue of the first operand subtracted as many copies as possible of the second.   i++: Increment the value of i by 1 for its next use. i can be of type int or char.   i--: Decrement the value of i by 1 for its next use. i can be of type int or char.   ++i: Increment the value of i by 1 immediately. i can be of type int or char.   --i: Decrement the value of i by 1 immediately. i can be of type int or char.   NOTE:      For +,-,*,/ if the operands are all integers, the result is also an integer or otherwise a floating-point number. For the division of two integers the result always rounds down to the nearest integer.   A char is converted into its Unicode code number when it is used with an arithmetic operator.   Assignment      = Assign   += Add a value to the current value of an int or double, e.g. x += y ⇔ x = x + y   -= Subtract a value from the current value of an int or double, e.g. x -= y ⇔ x = x - y   *= x *= y ⇔ x = x*y   /= x /= y ⇔ x = x/y   %= x %= y ⇔ x = x % y   &amp;&amp;= p &amp;&amp;= q ⇔ p = p &amp;&amp; q   Comparison/Relational      == Equal to   != Not equal to   &gt; Greater than   &lt; Less than   &gt;= Greater than or equal to   &lt;= Less than or equal to   NOTE:      The two sides of of a condition operator have to be the same type.        They can be used to compare values of type char according to their numeric Unicode values.       instanceof: Compares an object to a specified type. You can use it to test if an object is an instance of a class, an instance of a subclass, or an instance of a class that implements a particular interface. null is not an instance of anything.   Logical/Conditional      &amp;&amp; Short-circuit and   || Short-circuit or   ! Not   ? : The ternary operator. var = &lt;exp1&gt; ? &lt;exp2&gt; : &lt;exp3&gt;; If exp1 is true, returns exp2, or else returns            exp3           Precedence of logical operators:      ! High   &amp;&amp; Medium   || Low   Bitwise      &amp; Bitwise AND   | Bitwise inclusive OR   ^ Bitwise exclusive OR, XOR, e.g. 00=0，10=1，01=1，11=0   ~ Unary bitwise complement, which inverts every bit of a value, e.g. if x = 1 is a byte, then ~x == -2, because ~00000001 == 11111110. A negative integer is     represented by inverting its positive counterpart plus 1, e.g.     -1 == ~1 + 1, which is called Two’s Complement. If a is an     integer, then ~a=−a−1. The first bit of negative integers is     always 1.   &lt;&lt; Signed left shift   &gt;&gt; Signed right shift   &gt;&gt;&gt; Unsigned right shift   Variables   Type conversion   Variables have types. A type is a set of values. A variable is either a primitive types or a reference type. A variable can only hold a value of same type, or type which is a subset of the variable type. For example, an int variable can hold a byte or short value, but not a long value, neither a float or double value. But you can convert these values to int.           Automatic conversion       In some cases values are converted automatically.       When an integer is assigned to a double variable it is automatically converted to double. When the right side of the assingment is an expression with all operands being integers, Java evaluates the expression before the conversion. Thus, the result of the statement double q = 1/2; is 0.0, not 0.5. To gain 0.5 just write either or both of the operands to float-point, i.e., 1.0/2.0.       When assigning char values to int variables, or int values between 0 and 65545 to char variables, the values are automatically converted. This is because char is in fact equivalent to int.       When evaluating an arithmetic expression if all operands are integers then the result is an integer, and if one of the operands is a float-point number the result is a float-point number.       When use + to concatenate strings the result is a string. For example, 1 + \"foo\" produces \"1foo\".            Typecast       Typecast is to convert the type of a value to another type by using the typecasting operator (&lt;type&gt;) before the value or variable to convert. Not all types can be typecasted to one another. Typecast can happen between numeric types, between a numeric type and a char type, and between objects.       Type conversion from a numeric type to a higher-bit numeric type is automatic, e.g. from short to int, but converting a numeric type to a lower-bit numeric type is forced by using the operator (&lt;type&gt;), e.g. short foo = (short) 100000. The result of this type of conversion is       (n - max) % range - 1 + min              n: the integer to be converted       max: the max value of the the type to be converted into       range: the range of the values of the type from min to max       min: the min value of the type           Type conversion from a floating-point to an integer always rounds down. For example, (int) 0.9 produces 0.       Typecast takes precedence over arithmetic operations. For example, in       double pi = 3.14;  int x = (int) pi * 20.0;            x gives 60 rather than 62.       Between char and int: (char) 233 -&gt; é, (int) 'é' -&gt; 233       Between object types that have inheritance relationship.            Using methods       int to String:       String s = String.valueOf(number);  String s = Integer.toString(int number);  String s = \"\" + number;           String to int:       int foo = Integer.parseInt(\"5\");           String to double:       double dou = Double.parseDouble(\"3.14\");           int to Double:       Double n = new Integer(i).doubleValue(); Double n = Integer.valueOf(i).doubleValue();           Declaration      It is the process of deciding the type of the variable before assigning the value.   It is marked by putting the value type before the variable name, e.g. String bob.   You can declare a list of variable names such as String bob, dylan, felix.   Assignment      The left side of an assignment has to be a variable name for it indicates the storage location where the value will go.   Expressions do not represent storage locations, only values.   The type of the value and the variable in an assignment must be the same.   Initializtion   The process of declaring a variable and assigning a value to it at the same time. e.g. String name = \"Bob\";   You can initialize multiple variables with only one type declaration. E.g. String name1 = \"Bob\", name2 = \"John\", name3 = \"Felix\";   Default values: Variables that are not initialized have default values that depends on their types.      int variable defaults to 0   boolean variable defaults to false   object variable defaults to null   Usages           Intermediate/Temporary variables: Variables that are used in computation but never printed            Flags: Variables that flag the presence or absence of some condition, e.g. evenFlag in       boolean evenFlag = (n % 2 = 0);  if (evenFlag) {      System.out.println(\"n is even\");  }                Local variables:              variables declared inside a method definition       only exist inside the method                Member variables/Global variables:              Variables that are declared outside any method       Can be marked with modifiers such as static, public and private                    static member variables           non-static member variables                                Parameters            Class variables            Instance variables            Fields: refer to both class variables and instance variables. Variables refer to all of the above.       Mutable and immutable variables      A variable is mutable if its orignal value can be modified by using some methods, and immutable if its original value can’t be modified through invoking methods.   Primitive variables are immutable, while object (except string) variables are mutable.   Reserved words      println short for “print line”, adds a special character called newline after each line, which moves the cursor to the next line of the display   print displays the output from multiple print statements all on one line. The inside of a print statement can be an expression.   return   new   import  ","categories": ["Java"],
        "tags": [],
        "url": "/blog/java/java-elements-of-statements/",
        "teaser": null
      },{
        "title": "Java: Algorithms",
        "excerpt":"An algorithm is a set of instructions for solving a class of problems by a mechanical process.   Greatest Common Divisor   Euclid’s Algorithm   If r is the remainder when a is divided by b, then the common divisors of a and b are the same as the common divisors of b and r. Thus to find the Greatest Common Divisor we have this equation : gcd(a, b) = gcd(b, r).   /**  * Returns the greatest common divisor of two integers  *  * @see org.apache.commons.math3.util.ArithmeticUtils#gcd(int, int)  * @see java.math.BigInteger#gcd(BigInteger)  */ public static int gcd(int a, int b) {     if (b == 0)         return Math.abs(a);     return gcd(b, a % b); }   Binary GCD algorithm   See Wikipedia: Binary GCD Algorithm.   Counting   The process of counting follows a traverse-and-count pattern. There are 3 things needed in a counting process:      A set or container that can be traversed, like a string or an array   A test to be applied to each element in the set   A counter that keeps track of how many elements pass the test   To count the times a single element repeats in an array:   public static int count(int[] array, int a) {     int count = 0;     for (int i = 0; i &lt; array.length; i++) {         if (array[i] == a)             count++;     }     return count; }   To count the number of elements in an array that fall in a given range:   public static int count(int[] array, int low, int high) {     int count = 0;     for (int i = 0; i &lt; array.length; i++) {         if (array[i] &gt;= low &amp;&amp; array[i] &lt;= high)             count++;     }     return count; }   To make a histogram: A histogram is an array of integers where each integer counts the number of values that fall into a certain range:   public static int[] histogram(int[] array) {     int[] count = new int[10];     for (int i = 0; i &lt; array.length; i++) {         int index = array[i];         count[index]++;     }     return count; }   Sorting   Sorting visualization:      https://visualgo.net/bn/sorting   https://airtucha.github.io/SortVis/   Bubble sort   With bubble sort, starting from the first element, you compare each pair of adjacent elements in the list. Once a pair of elements are out of order, swap them. Repeat the number of times that is equal to the length of the list. image   For example, sorting an array of integers into increasing order:   public static void bubbleSort(int[] list) {     for (int i = 0; i &lt; list.length; i++) {         for (int j = 0; j &lt; list.length - 1; j++) {             if (list[j] &gt; list[j + 1]) {                 int temp = list[j + 1];                 list[j + 1] = list[j];                 list[j] = temp;             }         }     } }   You can optimize this algorithm by counting the times of swapping during each iteration. If no swap occurs during an iteration, the sorting is done. For example, to sort an array of integers into decreasing order:   public static void bubbleSort2(int[] list) {     int swaps = 1;     while (swaps &gt; 0) {         swaps = 0;         for (int i = 0; i &lt; list.length - 1; i++) {             if (list[i] &lt; list[i + 1]) {                 int temp = list[i];                 list[i] = list[i + 1];                 list[i + 1] = temp;                 swaps++;             }         }     } }   Insertion sort   The idea of insertion sort is to assume a list is partially sorted in ascending or descending order starting from the first item, and insert those out-of-order items into their corresponding position in the sorted part. For example, to sort an array of integers into ascending order the mind process would be like this:      Starting from the second integer traverse from left to right. Once an integer is less than its previous integer store it in a temp variable and mark its position as P1. Pause the traverse and go to step 2;   Starting from P1 traverse from right to left. Move each integer to the right by 1 position until an integer is less than temp. Mark this integer’s next position as P2. Now put the value of temp to P2 and stop this traverse;   Now continue the traverse in step 1 from position (P1+1) and repeat above steps.   image   public static void insertionSort(int[] list) {     for (int i = 1; i &lt; list.length; i++) {         if (list[i] &lt; list[i - 1]) {             int temp = list[i];             for (int j = i - 1; j &gt;= 0; j--) {                 list[j + 1] = list[j];                 if (j == 0 || list[j - 1] &lt; temp) {                     list[j] = temp;                     break;                 }             }         }     } }   Selection sort   The idea of selection sort is to find the smallest (for ascending order) or greatest (for descending order) item from the unsorted part of an array and put it in the first position of the unsorted part, repeat this for remaining unsorted items until all are sorted.   image   For example, to sort an array of integer into ascending order you could:      Starting from the first integer traverse from left to right. If an integer is less than the first, swap them, and continue traversing till the end. Now the smallest integer is in the beginning of the array;   Repeat the above process from the second integer.   public static void selectionSort(int[] list) {     for (int i = 0; i &lt; list.length; i++) {         for (int j = i + 1; j &lt; list.length; j++) {             if (list[i] &gt; list[j]) {                 int temp = list[j];                 list[j] = list[i];                 list[i] = temp;             }         }     } }   or      Starting from the first integer traverse from left to right. Find the smallest integer in the array and then swap it with the first integer;   Repeat the above process from the second integer.   public static void selectionSort2(int[] list) {     for (int i = 0; i &lt; list.length; i++) {         int idx = i;         for (int j = i + 1; j &lt; list.length; j++) {             if (list[idx] &gt; list[j])                 idx = j;         }         if (idx != i) {             int temp = list[i];             list[i] = list[idx];             list[idx] = temp;         }     } }   Efficiency: The total time of sorting n items in an array is proportional to n2.   Merge sort   To understand merge sort, you need to know the merging process first. Suppose you have two arrays of integers sorted in ascending order, the easiest way to put the two sorted arrays into one sorted array would be combining them by comparing the first item of one array to the first item of the other. Pick out the smaller item and put it in the first position of the combined array. Then again, compare the first items of each array and always pick out the smaller one until all integers are put in one array, which would be sorted in ascending order when it’s finished. This is the process of merging. You should note that the two arrays are sorted before merging, and how they are sorted is not told. You can use selection sort or other methods to sort them, and then merge them. This whole process is called merge sort.   public static int[] mergeSort(int[] arr) {     int[] arr1 = new int[arr.length / 2];     int[] arr2 = new int[arr.length - arr1.length];     System.arraycopy(arr, 0, arr1, 0, arr1.length);     System.arraycopy(arr, arr1.length, arr2, 0, arr2.length);     selectionSort(arr1);     selectionSort(arr2);     return merge(arr1, arr2); }   public static int[] merge(int[] arr1, int[] arr2) {     int[] arr = new int[arr1.length + arr2.length];     int i = 0, j = 0, k = 0;     while (true) {         if (i == arr1.length) {             if (j == arr2.length)                 break;             arr[k++] = arr2[j++];             continue;         }         if (j == arr2.length) {             arr[k++] = arr1[i++];             continue;         }         if (arr1[i] &lt; arr2[j]) {             arr[k] = arr1[i++];         } else {             arr[k] = arr2[j++];         }         k++;     }     return arr; }   Of course, there’s a better way to achieve merge sort - do it recursively! A recursive merge sort breaks an array into 2 halves, and then breaks them into smaller halves, until both halves have only one item. An array with only one item is already sorted, so you can merge them and return the sorted two-item array to the upper calling stack, and merge it with the other sorted half, and so on and so forth.   public static void mergeSort(int[] arr, int left, int right) {     if (left &gt;= right)         return;      int mid = (left + right) / 2;     mergeSort(arr, left, mid);     mergeSort(arr, mid + 1, right);      int[] arr1 = new int[mid - left + 1];     int[] arr2 = new int[right - mid];     for (int i = 0; i &lt; arr1.length; i++) {         arr1[i] = arr[left + i];     }     for (int i = 0; i &lt; arr2.length; i++) {         arr2[i] = arr[mid + 1 + i];     }     int i = 0, j = 0, k = left;     while (true) {         if (i == arr1.length) {             if (j == arr2.length)                 break;             arr[k++] = arr2[j++];             continue;         }         if (j == arr2.length) {             arr[k++] = arr1[i++];             continue;         }          if (arr1[i] &lt; arr2[j]) {             arr[k] = arr1[i++];         } else {             arr[k] = arr2[j++];         }         k++;     } }   image   Efficiency: To sort n item, it takes time proportional to n*logn.   Quick sort   The idea of quick sort is to place an item (usually the first one) of the list to be sorted to its pivot position, which is the final position of the item in the sorted list, in just one traverse. To achieve this you need to place all items less than the pivot to its left and all items greater than the pivot to its right. You can start from the last item and traverse backwards. Once an item is less than the pivot move it to the beginning of the list. Then start from the second item of the list and traverse forwards until an item is greater than the pivot. Move the item to where the last moved item was before moving and then again traverse backwards. Repeat these back-and-forth traverses and there will be a point where all items greater than the pivot are placed to its right and smaller items to its left, i.e., the pivot position. Finally you place the item selected as the pivot to this position, and the first traverse to the whole list is completed. Then you do the above process recursively to the sub-lists before and after the pivot.   public static void quickSort(int[] list, int left, int right) {     if (left &gt;= right)         return;     int pivot = list[left];     int i = left;     int j = right;     while (i &lt; j) {         while (list[j] &gt; pivot &amp;&amp; i &lt; j) {             j--;         }         if (i == j)             break;         list[i++] = list[j];         while (list[i] &lt; pivot &amp;&amp; i &lt; j) {             i++;         }         if (i == j)             break;         list[j--] = list[i];     }     list[i] = pivot;     quickSort(list, left, i - 1);     quickSort(list, i + 1, right); }   Java sorting methods   Arrays.sort()   Unsorting   To unsort an array is to make the order of the items as random as possible. To do this you can firstly select an item at a random position in the array and swap it with the last item of the array, and then repeat this process for remaining items.   public static void unsort(int[] arr) {     for (int i = arr.length - 1; i &gt; 0; i--) {         int rdmIdx = (int) (Math.random() * (i + 1));         int temp = arr[rdmIdx];         arr[rdmIdx] = arr[i];         arr[i] = temp;     } }   Searching   Linear search      Linear search is suitable for ordered and unordered arrays, and it’s the only method for unordered arrays;   The process is simply “traverse and compare”.   Bisection/Binary search   Bisection search only works for ordered arrays (ascending order for example). First you set the range of the list in which the target item is searched for. If the target is smaller than the first item of the range or greater than the last item of the range then it’s not in the range and the search is finished. If it’s in the range then you can compare it with the item in the middle of the range. If the middle item happens to equal the target then the search is finished, or else you continue searching in the sub-range before or after the middle item depending on whether the target is smaller or greater than the middle item. In this way you’re narrowing down the range for searching and eventually find the target faster than traversing through the list and comparing each item with the target.   The recursive approach:   /**  * @param arr    the array to be searched  * @param i      the index of the first item of the range to be searched  * @param j      the index of the last item of the range to be searched  * @param target the target item to be searched for  * @return the index of the target item, or -1 if the target isn't found in the array  */ public static int binarySearch(int[] arr, int i, int j, int target) {     if (target &lt; arr[i] || target &gt; arr[j])         return -1;      int mid = (i + j) / 2;     if (target == arr[mid])         return mid;     else if (target &gt; arr[mid])         i = mid + 1;     else         j = mid - 1;      return binarySearch(arr, i, j, target); }   The iterative approach:   /**  * Binary search with an iterative approach  *  * @param arr    the array to be searched  * @param i      the index of the first item of the range to be searched  * @param j      the index of the last item of the range to be searched  * @param target the target item to be searched for  * @return the index of the target item, or -1 if the target isn't found in the array  */ public static int binarySearch(int[] arr, int i, int j, int target) {     while (i &lt;= j) {         int mid = (i + j) / 2;         if (target == arr[mid])             return mid;         else if (target &gt; arr[mid])             i = mid + 1;         else             j = mid - 1;     }     return -1; }   Analysis of algorithms   Asymptotic analysis   How the run time of the program is related to the size of the problem.           Big-Oh notation       These notations do not tell you the actual value of the running time of an algorithm, but instead, they tell you the rate of growth of the running time as the size of the problem increases.                       O(f(n))                      It reads “big o of f of n”.           f(n) is a function that assigns a positive real number to every positive integer n.           n is the size of the problem. How to decide the size of a problem:                            If the problem is to sort a list of items, the size of the problem is the number of items;               If the input to an algorithm is an integer, the size of the problem is the number of bits in the integer instead of the integer itself.                                   To say the running time of an algorithm is O(f(n)) means for large values of the problem size n, the running time of the algorithm is less than or equal to some constants times f(n). O(f(n)) sets an upper limit on the run time, or in other words, it tells you the maximum amount of time it takes for the algorithm to finish.                                Ω(f(n))                      It reads “Omega of f of n”.           It sets an lower limit on the run time, that is, the run time of the algorithm is greater than or equal to some constant times f(n) (for large values of n). It tells you the minimum run time.                                Θ(f(n))                      It reads “Theta of f of n”;           If an algorithm has run time that is both O(f(n)) and Ω(f(n)), then it is said to have run time Θ(f(n)).           To say that the run time of an algorithm is Θ(f(n)) means for large values of n, the run time is between af(n) and bf(n), where a and b are constants, with b greater than a, and both greater than zero.                                Run time efficiency of some common algorithms                       Adding up the integers in a list with a for loop           int total = 0; int n = list.length; for (int i = 0; i &lt; n; i++) {     total += list[i]; }                   If each iteration takes time a, then it takes a*n for the whole loop to finish. The initialization of the variables could take time b. Thus the total run time is a*n + b. Since b &lt;= b*n, a*n + b &lt;= (a+b)*n. So the run time of this program is O(n), which means the run time of the algorithm is no bigger than some constant times n. If the run time of an algorithm is O(n), then it is also legit to say its run time is O(n2) or even O(n10) for the run time is certainly less than the same constant times n2 or n10.                        List of algorithm run times:                                                  Algorithm               Run time                                                               Linear search               O(n)                                         Binary search               Θ(log(n))                                         Bubble sort               O(n2)                                         Merge sort               Θ(n*log(n))                                         Quick sort               Θ(n*log(n))                                         Towers of Hanoi               O(2n)                                                        Worst case run time &amp; Average case run time       Since run time depends not just on the size of the problem, but on the specific data that has to be processed, we need to look at all possible problems of size n and their run times. Worst case run time is the longest run time for all such problems, while average case run time is the average run time for all such problems.       Encryption &amp; Decryption   https://commons.apache.org/proper/commons-crypto/userguide.html https://docs.oracle.com/javase/8/docs/technotes/guides/security/crypto/CryptoSpec.html#KPGEx   规则引擎   Search engines      MapReduce  ","categories": ["Java"],
        "tags": [],
        "url": "/blog/java/java-algorithms/",
        "teaser": null
      },{
        "title": "Midnight Express: What is a crime",
        "excerpt":"Intense and mind-boggling. A seemingly deserving punishment from a stupid mistake turned out to be violating humanity. Sometimes people weren’t treated as people - sometimes they’re benefits, sometimes cannon fodders, or just flickering head counts for the accountants. Why is it so simple for people to lose mercy yet so hard to retain justice and good ethics?   The monologue stuck in me is this:      What is a crime? What is a punishment? It seems to vary from time to time and from place to place. What’s legal today is suddenly illegal tomorrow because some society says it’s so and what’s illegal yesterday is suddenly legal because everybody’s doing it and you can’t put everybody in jail. I’m not saying this is right or wrong. I’m just saying that’s the way it is…And you, I just wish you could be standing where I’m standing right now and feel what that feels like because then you would know something that you don’t know Mr. prosecutor. Mercy! You’d know that the concept of a society is based on the quality of that mercy, its sense of fair play, its sense of justice.    The movie passes a sense of magical reality with the downhill scene switching from the airport to the ghettos, then to the prison, and finally to the psychiatric house. Nothing felt realistic yet everything had happened for real. Both the acting and the shooting were blatant and bold to bring up that realistic and absurd feeling, like the brutal fighting between the protagonist William Hayes and his fellow indiscreet prisoner Rifki, whose tongue was cultishly biten off. Besides, you got to see a showcase of environmental homesexuality, the raw sexual desire and psychiatric decomposition from the prolonged detention.   Lastly, another monologue struck me is this:      Loneliness is a physical pain.    One last reminder, I watch this film because of Giorgio Moroder and Querelle.  ","categories": ["Diary"],
        "tags": ["Movie"],
        "url": "/blog/diary/midnight-express/",
        "teaser": null
      },{
        "title": "《海王》：比国王更伟大的是英雄",
        "excerpt":"在地心世界海王向母亲问道，“还有什么比国王更伟大呢？”——英雄。那一刻感觉好燃，从来 没对电影里的英雄产生过这种激情崇拜的感觉，以前看的那些英雄角色，什么超人蝙蝠侠蜘 蛛侠，感觉他们的设定就是主角，就是超级英雄，但并不会让我产生特别崇拜的感觉。“国 王为他的国家而战，而英雄为了所有人而战”，突然被母亲的这句话击中，是啊，不是人人 都能成为国王，但是人人都能成为英雄，如果你的信念够强大的话。对身处在集体主义盛行 的环境中的很多人也许会不屑，都8012了还在宣扬这种美式个人英雄主义？所以这种个英过 时了吗？没有吧。我觉得正是在现代社会越来越注重体制的作用的情况下，这样的个英反而 显得更可爱了。那他是真的英雄吗？   从表面上看不言而喻，但是稍微挖掘就感觉，mmm…好像还是要论血统论天赋啊，并不是那 种人人都有可能通过刻苦训练就能成为的……这样的英雄注定是少数人的专利。靠血统和天赋 有什么问题吗？好像也没什么问题，我们说一个人是不是英雄还是要看他做了什么，所谓英 雄不问出路，只不过那些有天赋和基因加成的选手更有可能成为这样的万众瞩目的英雄。然 而除了在幻想小说里这样的英雄真的存在吗？真的在现实世界出现过吗？现实世界里一个出 身优越的人，一个没有经历过底层生活的人，或者一个遭受磨难但是因为出身高贵而逆风翻 盘的人，真的会对普罗大众底层人民产生同情、真的会觉得对这个世界的公平正义和秩序肩 负一些责任吗？我感觉很难。不管横向看国内外还是纵向看古今，贵族和富人大多数时候都 在想着怎么巩固提升自己的地位和财富，关心底层？不存在的。现实世界里那些真正被人们 歌颂称赞的英雄，其实往往也是来自底层和普通人之中吧。因为成为英雄是有代价的，要么 是牺牲生命舍己为人，要么是有敢为天下先、一将功成万骨枯而忍辱负重的气魄和决心，那 些出身优越的人，能做到吗？所以海王这样的英雄也许让人感觉很燃很振奋，但是并不具备 现实意义，只能存在人们美好的幻想里。   这样有什么问题吗？   也许有人已经不耐烦了，想问我想这么多干嘛，我们只是来看爽片的，心理预期也是看爽了 就行，关注点不应该是在特效情节吗？本来就是奇幻片，谈什么现实意义，扯淡！无聊！也 许正是因为我看了不少这类片子才越发有这种情绪和欲望。我觉得最接近现实的一种幻想类 的电影风格是赛博朋克，深深地感觉到今天我们很多人真实地生活在某种构造出来的虚幻里， 所以才喜欢或者说本能地喜欢谈现实意义，仿佛我们正在偏离一个本该充满人文关怀、社区 文化盛行、充满爱和和平的社会，而驶向一个拥挤不堪却又各自孤独的社会，享受着城市里 的霓虹构建的繁华、人声鼎沸的消费娱乐，然后拖着疲惫的身躯返回孤独的巢穴。所以跟这 个片子有什么关系呢？关系就是它是又一部英雄大片，像《超人》《钢铁侠》《蝙蝠侠》 《蜘蛛侠》《复仇者联盟》这样的片子一样，占领了世界的每一个影院，成为主流，大行其 道。这样的英雄片不好吗？教小孩子做人，教会他们一些关于公平正义秩序的事情，让他们 向往成为这样的善良勇敢正义的人，这样不好吗？这方面的意义确实是好的，如果有的话， 因为确实很难说现在的英雄大片还有这样的教育意义。且不说现在这类电影的受众主流是成 人，对我来说，前面论述过了，这样的英雄只能存在人们美好的幻想里，而虚幻的结果只能 是制造更多虚幻，因为市场发现了人们很喜欢消费这样的虚幻。所以结果就是，人们越来越 不去关注现实了，没有欲望去关注和探究了，因为现实相比之下不够刺激，也很无聊。所以 越来越多的年轻人投入了这场轰轰烈烈的制造虚幻的运动中去了，每个人都很开心和快乐， 年轻人、资本家、媒体和政府。至于那些角落里的不堪和肮脏，总有人会去管的，如果没有， 随它去吧，我们管不着。好像不会有人担心那些阴暗扩大化从而反噬自身，确实，人生那么 短，现在做的很多事情影响不到我们的，可能要过很久才会出现。所以说这些人是自私的并 无纷争吧，没有对后代的责任感。人生苦短，及时行乐，必须自私。必须自私。   那什么样的片子才能让你开心呢，嗯？   咳咳，确实通篇看起来满满的批判和不满，但是身体是诚实的，我也必须诚实地说，这部片 子就让我挺开心的，观影过程中能明显感觉到肾上腺素的起伏。精细的特效、气氛的烘托、 好看的脸和鲜美的肉体、流畅的叙事和并无大碍的故事情节以及各种华丽丽的拍摄角度和剪 辑，都是我快乐的源泉！只是看完后刚好联想到现实意义这一层面所以就记录下来，也许跟 我自身当前的处境和平时的关注有关吧，感觉自己的内核里还挺政治化的。如果从现实意义 这个角度来说，什么样的片子会让我开心，可能是有老电影那种气质的，比如日本昭和时代 的电影、法国的和意大利的经典电影，或者有伍德斯托克气质的，越战刚结束，爱和和平， 嬉皮士，你懂的。虚伪而狂妄，自由而散漫，又不切实际。多美好的年代啊。如果这样的电 影能成为主流，可能我是到了理想国吧。   完。  ","categories": ["Diary"],
        "tags": ["Movie"],
        "url": "/blog/diary/aquaman/",
        "teaser": null
      },{
        "title": "HTML models",
        "excerpt":"Layout   Zero-offset panel   Make a panel inside the &lt;body&gt; container without offsets or margins.      See the Pen    Zero-offset pane by Ivan Huang (@ivanhjc)   on CodePen.     See also: Demo   Auto-expanding parent   Let a parent element expand as its children grows in number or size. The parent elements may grow in different directions and have different alignments, so there different implementation for different situations.   To expand vertically: The key is to use min-height: &lt;foo&gt; and and height: auto for the parent.      See the Pen    Zero-offset pane by Ivan Huang (@ivanhjc)   on CodePen.     See also: Demo   To expand horizontally: You can use display: inline-block for this purpose, but all the parent blocks will be aligned horizontally. To make them on separate lines use float: left; clear: left; instead.      See the Pen    Zero-offset pane by Ivan Huang (@ivanhjc)   on CodePen.     See also: Demo   Fixed scrollable panel   Make a panel which is fixed in position and scrollable when its content overflows.      See the Pen    Zero-offset pane by Ivan Huang (@ivanhjc)   on CodePen.     See also: Demo   Slide-in overlay   Make a panel overlaying another panel slide in/out by hovering on/off the other panel.      See the Pen    Zero-offset pane by Ivan Huang (@ivanhjc)   on CodePen.     See also: Demo   Slide-in overlay to carry   Make a panel overlaying another panel and carrying a child slide in/out by hovering on/off the other panel.      See the Pen    Zero-offset pane by Ivan Huang (@ivanhjc)   on CodePen.     See also: Demo   Slide-out overlay to unveil   Make a panel overlaying another panel slide out by hovering on the panel and reveal what’s beneath.      See the Pen    Zero-offset pane by Ivan Huang (@ivanhjc)   on CodePen.     See also: Demo  ","categories": ["Web"],
        "tags": ["HTML"],
        "url": "/blog/web/html-models/",
        "teaser": null
      },{
        "title": "Emacs Commands Quick Reference",
        "excerpt":"NOTE: As of writing the version of Emacs I used is GNU Emacs 27.1 (build 1, x86_64-w64-mingw32) of 2020-08-22.   Commands      Key-bindings (or shortcuts) are represented with symbols specified in the key notations table.   Key-bindings that are not packed with Emacs or other packages are marked with an *.   Key notations                  Symbol       Meaning                       C       Ctrl key                 M       Meta/Alt key                 S       Shift key                 -       Hyphen. Keys connected with hyphens should be pressed together                         White space, indicating a short pause between key pressings                 RET       Return/Enter key                 SPC       Space key                 DEL       Backspace key                 CMD       Command                 ,       Comma, used to separate optional or closely-related commands                 A|B       Either A or B                 [A]       A is optional, i.e., it can be omitted or present                 …       Repeat the last stroke indefinitely           Help                  Keys       Meaning       Command                       C-h ?       Show general help commands       help-for-help                 C-h C-a       Show welcome screen       about-emacs                 C-h t       Open Emacs tutorial       help-with-tutorial                 C-h i       Open the info buffer       info                 C-h k       Look up key       describe-key                 C-h f       Look up command       describe-function                 C-h v       Look up variable       describe-variable                 C-h P       Describe package       describe-package                 C-h .       Display tooltip in the echo area       display-local-help                 &lt;prefix&gt; {C-h|F1}       Show the list of key-bindings starting with the prefix key, e.g. C-x C-h displays the list of key-bindings starting with C-x.                   Navigation                  Keys       Meaning       Command                       C-f       Go forward a character       forward-char                 C-b       Go backward a character       backward-char                 M-b       Go to word start       backward-word                 M-f       Go to word end       forward-word                 C-p       Go to previous line       previous-line                 C-n       Go to next line       next-line                 C-a       Go to line start       move-beginning-of-line                 C-e       Go to line end       move-end-of-line                 M-a       Go to sentence start       backward-sentence                 M-e       Go to sentence end       forward-sentence                 M-}       Go to next paragraph       forward-paragraph                 M-{       Go to previous paragraph       backward-paragraph                 M-]       Go to next blank line separated block       xah-forward-block *                 M-[       Go to previous blank line separated block       xah-backward-block *                 M-&lt;       Go to buffer start       beginning-of-buffer                 M-&gt;       Go to buffer end       end-of-buffer                 M-r       Go to buffer center, top, or bottom       move-to-window-line-top-bottom                 C-M-f       Go to the matched closing bracket       forward-sexp                 C-M-b       Go to the matched opening bracket       forward-sexp                 C-M-e       Go to next end of defun       end-of-defun                 C-M-a       Go to previous beginning of defun       beginning-of-defun                 C-x &lt;       Scroll text in the current window to the left       scroll-left                 C-x &gt;       Scroll text in the current window to the right       scroll-right                 C-v       Scroll forward one screenful       scroll-up-command                 M-v       Scroll backward one screenful       scroll-down-command                 C-M-v       Scroll other window forward one screenful       scroll-other-window                 S-C-M-v       Scroll other window backward one screenful       scroll-other-window-down                 C-l       Move the text around the cursor to the center of the screen       recenter-top-bottom                 M-g g       Go to line       goto-line                 M-g c       Go to character       goto-char                 C-u C-SPC       Go to last marked position in current buffer       set-mark-command                 ???       Go to next marked position in current buffer                         C-x C-SPC       Go to last marked position in all buffers       set-mark-command                 ???       Go to next marked position in all buffers                         ???       Go to last edited position in current buffer                         ???       Go to next edited position in current buffer                         ???       Go to last edited position in all buffers                         ???       Go to next edited position in all buffers                   Selection                  Keys       Meaning       Command                       C-x h       Select all.       mark-whole-buffer                 C-S-p       Up with selection.       previous-line                 C-S-n       Down with selection.       next-line                 C-S-f       Forward with selection.       forward-char                 C-S-b       Backward with selection.       backward-char                 M-S-f       Forward with selection to word end.       forward-word                 M-S-b       Backward with selection to word start.       backward-word                 C-S-e       Forward with selection to line end.       move-end-of-line                 C-S-a       Backward with selection to line start.       move-beginning-of-line                 C-SPC       Toggle sticky selection.       set-mark-command                 C-x SPC       Toggle rectangle mark mode.       rectangle-mark-mode                 M-=       Show the number of lines, words, and characters in selected region.       count-words-region           Editing                  Keys       Meaning       Command                       C-d       Delete next character.       delete-char                 DEL       Delete previous character.       backward-delete-char-untabify                 ???       Delete entire line.                         M-d       Kill next word.       kill-word                 {M¦C}-DEL       Kill previous word.       backward-kill-word                 C-k       Kill to line end. M-0 ~ to kill to line start.       kill-line                 C-S-DEL       Kill entire line.       kill-whole-line                 C-w       Kill region.       kill-region                 M-w       Copy region/rectangle       kill-ring-save                 C-y       Yank/Paste last killed region/rectangle.       yank                 C-x r k       Kill rectangle       kill-rectangle                 C-x r y       Yank rectangle       yank-rectangle                 C-/       Undo. C-f ~ to redo.       undo                 M-c       Capitalize word.       capitalize-word                         Capitalize region.       capitalize-region                 M-u       Turn all letters of next word uppercase.       upcase-word                 M-l       Turn all letters of next word lowercase       downcase-word                 C-x C-u       Turn all letters of selected region uppercase.       upcase-region                 C-x C-l       Turn all letters of selected region lowercase.       downcase-region                 C-g       Quit a command.       keyboard-quit                 C-o       Insert a new line and leave the cursor unmoved.       open-line                 M-\\       Delete all spaces and tabs around cursor.       delete-horizontal-space                 C-x C-o       Delete blank lines surrounding the cursor.       delete-blank-lines                 ???       Toggle camelcase-aware editing for current buffer.                         S-RET       Open line below without breaking current line.       newline-below-without-break (*)                 C-S-RET       Open line above without breaking current line.       newline-above-without-break (*)                 TAB       Indent current line. Use C-u &lt;n&gt; C-x Tab to indent the selected region n columns. Use negative number for n to unindent.       indent-for-tab-command                 C-q       Read next input character and insert it. This is useful for inserting control characters.       quoted-insert                 C-x =       Describe character at point. C-u ~ to show more details.       what-cursor-position           Searching                  Keys       Meaning       Command                       C-s       Incremental search forward.       isearch-forward                 C-r       Incremental finding backward.       isearch-backward                 M-%       Query and replace.       query-replace           Buffers, windows and frames                  Keys       Meaning       Command                       C-x b       Switch to buffer in current window. Create new buffer if the given buffer name doesn’t exist.       switch-to-buffer                 C-x 4 b       Switch to buffer in another window.       switch-to-buffer-other-window                 C-x 4 C-o       Display buffer in another window.       display-buffer                 C-x 5 b       Switch to buffer in another frame.       switch-to-buffer-other-frame                 C-x &lt;left&gt;       Switch to previous buffer.       previous-buffer                 C-x &lt;right&gt;       Switch to next buffer       next-buffer                 C-x C-b       List buffers       list-buffers                 M-n       Go to next window       other-window                 M-p       Go to previous window       prev-window                 C-x k       Kill buffer       kill-buffer                 C-x C-s       Save buffer       save-buffer                 C-x s       Save some modified file-visiting buffers.       save-some-buffers                 C-x 0       Close current window.       delete-window                 C-x 1       Go back to one-window editing.       delete-other-windows                 C-x 2       Split window below. C-u &lt;n&gt; ~ to specify height.       split-window-below                 C-x 3       Split window right. C-u &lt;n&gt; ~ to specify width.       split-window-right                 S-&lt;arrow&gt;*       Switch directionally between windows. By default it’s not enabled. Type `M-x windmove-default-keybingds` to enable it or add `(windmove-default-keybindings)` to init file to enable it for future sessions.       windmove-*                 C-x C-c       Kill all buffers and exit emacs.       save-buffers-kill-terminal                         Open shell. C-u M-x ~ to open another running shell.       shell                         Open Emacs shell.       eshell                 C-c C-l       Display a list of recent inputs entered into the current buffer.       comint-dynamic-list-input-ring                 C-x m       Open mail buffer.       compose-mail                 C-x C-=       Adjust font size.       text-scale-adjust                         Truncate long lines or wrap them.       toggle-word-wrap                 C-z       Suspend emacs. In shell type %emacs to resume.       suspend-frame           Files and directories                  Keys       Meaning       Command                       C-x C-f       Open or create a file in current window       find-file                 C-x 4 f       Open or create a file in another window       find-file-other-window                 M-F2       Open file in browser. (global-set-key (kbd \"&lt;M-f2&gt;\") 'browse-url-of-file)       browse-url-of-file                 C-x C-d       Display a brief directory listing. C-u ~ to display verbosely.       list-directory           Dired mode                  Keys       Meaning       Command                       C-x d       Enter dired mode in current window.       dired                 C-x 4 d       Enter dired mode in another window.       dired-other-window           When in dired more:                  Keys       Meaning       Command                       d       Flag files for deletion.       dired-flag-file-deletion                 D       Delete file on current line.       dired-do-delete                 x       Delete flaged files.       dired-do-flagged-delete                 g       Refresh the mode buffer.       revert-buffer           Diff mode                  Keys       Meaning       Command                               Enter diff mode in current window which compares two files       diff                         Enter diff mode in current window which compares current buffer with its file.       diff-buffer-with-file           When in diff mode:                  Keys       Meaning       Command                       g       Refresh the mode buffer                   Meta commands  Commands on commands                  Keys       Meaning       Command                       {M-&lt;n&gt;¦C-u &lt;n&gt;} CMD       Run a command n times. See C-h i (emacs)Arguments.       digit-argument                 M-x       Run a command.       execute-extended-command                 M-!       Run a shell command.       shell-command                 C-x z       Run last command. Press z continuously to repeat more times.       repeat                 M-:       Evaluate EXP and print value in the echo area.       eval-expression                 C-x C-e       Evaluate sexp before point; print value in the echo area.       eval-last-sexp                 C-j       Evaluate sexp before point; print value into current buffer.       eval-print-last-sexp           Org mode   Headings and subtrees                  Keys       Meaning       Command                       TAB       Expand/Collapse outline entry, or indent plain list item       org-cycle                 S-TAB       Cycle visibility through all top-level headings, all headings, and everything.       org-shifttab                 C-c C-n       Go to next heading       org-next-visible-heading                 C-c C-p       Go to previous heading       org-previous-visible-heading                 C-c C-f       Go to next heading of same level       org-forward-heading-same-level                 C-c C-b       Go to previous heading of same level       org-backward-heading-same-level                 C-c C-u       Go to parent heading       outline-up-heading                 C-c C-j       Go to …       org-goto                 M-RET       Add a heading below or before current heading       org-meta-return                 C-u M-RET       Add a heading after current subtree       org-meta-return                 C-u C-u M-RET       Add a heading at the end of the parent subtree       org-meta-return                 C-RET       Add a heading after the current subtree       org-insert-heading-respect-content                 M-S-RET       Add a TODO heading below or before current heading       org-insert-todo-heading                 C-S-RET       Add a TODO heading after current subtree       org-insert-todo-heading-respect-content                 C-c *       Toggle heading for current line or region       org-ctrl-c-star                 C-c C-t       Toggle TODO on current heading       org-todo                 M–       Cycle the thing at point       org-shiftleft                 M-+       Cycle the thing at point       org-shiftright                 M-n       Cycle the thing at point       org-shiftdown                 M-p       Cycle the thing at point       org-shiftup                 C-c C-s       Add scheduled date       org-schedule                 C-c C-d       Add deadline       org-deadline                 &lt;M-up&gt;       Move current subtree up       org-metaup                 &lt;M-down&gt;       Move current subtree down       org-metadown                 &lt;M-left&gt;       Promote current heading by one level       org-metaleft                 &lt;M-right&gt;       Demote current heading by one level       org-metaright                 &lt;M-S-left&gt;       Promote current subtree by one level       org-shiftmetaleft                 &lt;M-S-right&gt;       Demote current subtree by one level       org-shiftmetaright                 M-h       Select current element (and subsequent elements)       org-mark-element                 C-c @       Select current subtree (and subsequent subtrees)       org-mark-subtree                 C-c C-x C-w       Kill subtree (and the next N subtrees)       org-cut-special                 C-c C-x M-w       Copy subtree (and the next N subtrees)       org-copy-special                 C-c C-x C-y       Yank subtree       org-paste-special                 C-c C-x c       Clone subtree       org-clone-subtree-with-time-shift                 C-c C-x b       Show the current subtree in an indirect buffer       org-tree-to-indirect-buffer                 C-c ^       Sort same-level entries       org-sort                 C-c /       Search and show results in a sparse tree       org-sparse-tree                 M-g n       Go to next match in sparse tree       next-error                 M-g p       Go to previous match in sparse tree       previous-error                 C-c C-c       While in sparse tree view, abort matching hightlights       org-ctrl-c-ctrl-c                 C-c C-x d       Insert a drawer. C-u ~ to insert a property drawer       org-insert-drawer           Lists                  Keys       Meaning       Command                       M-RET       Insert an item of same level on next line.       org-meta-return                 &lt;M-up&gt;       Move item and its children up to the same level.       org-metaup                 &lt;M-down&gt;       Move item and its children down to the same level.       org-metadown                 &lt;M-left&gt;       Promote item but not its children.       org-metaleft                 &lt;M-right&gt;       Demote item but not its children.       org-metaright                 &lt;M-S-left&gt;       Promote list item and its children.       org-shiftmetaleft                 &lt;M-S-right&gt;       Demote list item and its children.       org-shiftmetaright                 C-c -       Toggle bullet presence at current line or region, or cycle bullet styles.       org-ctrl-c-minus                 C-c C-*       Convert the whole plain list into a subtree of the heading at point.       org-list-make-subtree                 M-S-RET       Insert an empty checkbox on next line.       org-insert-todo-heading                 C-c C-c       Toggle checkbox status on current item.       org-ctrl-c-ctrl-c                 C-u C-c C-c       Toggle checkbox presence on current item.       ^                 ???       Toggle checkbox status for selected region.                         C-u C-u C-c C-c       Set checkbox to intermediate state [-].       ^                 C-c C-x C-b       Toggle checkbox status or presence on current item.       org-toggle-checkbox                 C-u C-c C-x C-b       Toggle checkbox presence for selected list or list under a heading.       ^                 C-u C-u C-c C-x C-b       Same as above but set the checkboxes to [-].       ^                 C-c C-x o       Toggle if the checkboxes must be checked off in sequence.       org-toggle-ordered-property                 C-c #       Update the statistics cookie in current heading.       org-update-statistics-cookies                 C-u C-c #       Update all cookies in the buffer.       ^           Links                  Keys       Meaning       Command                       C-c C-l       Insert or edit link.       org-insert-link                 C-c C-o       Follow link.       org-open-at-point                 C-c &amp;       Return to link after following it.       org-mark-ring-goto                 C-c C-x C-n       Go to next link. C-u ~ to go to previous link.       org-next-link                 C-c C-x C-p       Go to previous link       org-previous-link           Tables                  Keys       Meaning       Command                       TAB       Re-align the table, move to the next field. Creates a new row if necessary.       org-cycle                 S-TAB       Re-align, move to previous field.       org-shifttab                 C-c C-c       Re-align the table and don’t move to another field.       org-ctrl-c-ctrl-c                 C-c RET       Create a table with horizontal line or insert a horizontal line below.       org-ctrl-c-ret                 C-c ¦       Create a table or convert an active region into a table.       org-table-create-or-convert-from-region                 M-e       Move to end of the current table field, or on to the next field.       org-forward-sentence                 M-a       Move to beginning of the current table field, or on to the previous field.       org-backward-sentence                 C-c SPC       Blank the field at point.       org-table-blank-field                 C-c `       Edit field.       org-table-edit-field                 C-c C-c       Exit editing field.       org-ctrl-c-ctrl-c                 S-RET       Copy the field at point to the field below.       org-table-copy-down                 &lt;M-right&gt;       Move the current column right.       org-metaright                 &lt;M-left&gt;       Move the current column left.       org-metaleft                 &lt;M-up&gt;       Move the current row up.       org-metaup                 &lt;M-down&gt;       Move the current row down.       org-metadown                 &lt;M-S-left&gt;       Delete current column.       org-shiftmetaleft                 &lt;M-S-right&gt;       Insert a new column to the left.       org-shiftmetaright                 C-o       Insert a new row above.       org-open-line                 C-c -       Insert a horizontal line below current row.       org-ctrl-c-minus                 C-u C-c -       Insert a horizontal line above current row.       ^                 C-c ^       Sort the table.       org-sort                 C-j       Goto next table row or insert a newline and indent.       org-return-indent           Navigation                  Keys       Meaning       Command                       C-c &amp;       Go back to previous position (after following a link etc.).       org-mark-ring-goto                 C-c %       Put the current position into the mark ring and rotate it.       org-mark-ring-push           Agenda views                  Keys       Meaning       Command                       C-c a       Open agenda views       org-agenda           In agenda views:                  Keys       Meaning       Command                       a       Open week view. Use prefix arg C-u &lt;n&gt; to specify days to display       org-agenda-list                                             In week view: ref                  Keys       Meaning       Command                       SPC       Show original location in another window       org-agenda-show-and-scroll-up                 TAB       Go to original location in another window       org-agenda-goto                 RET       Go to the original location of the item and delete other windows.       org-agenda-switch-to                 F       Toggle follow mode       org-agenda-follow-mode                 C-c C-x b       Display subtree       org-agenda-tree-to-indirect-buffer                 C-c C-o       Follow a link in the entry       org-agenda-open-link                                             Info mode                  Keys       Meaning       Command                               Clone buffer       clone-buffer           Programming   Project awareness           Projectile                                  Keys           Meaning           Command                                           M-p f           Find file in current project. C-u M-p f to clear cache first.           projectile-find-file                             M-p F           Find file in all projects                                         M-p g           Find file in current project based on context                                         M-p e           Find recently visited file in project                                         M-p T           Find test file in current project                                         M-p o           Find keywords in current project buffers                                         M-p s g           Find keywords in current project files with grep                                         M-p s s           Find keywords in current project files with ag.el                                         M-p d           Find directory in current project                                         M-p 4 C-o           Display a project buffer in another window without selecting it                                         M-p b           Switch to project buffer                                         M-p LEFT           Switch to previous project buffer                                         M-p RIGHT           Switch to next project buffer                                         M-p a           Switch between files with the same name but different extensions                                         M-p t           Toggle between an implementation file and its test file                                         M-p p           Open or switch project                                         M-p D           Browse project root in dired                                         M-p v           Browse project root in vc-dir or magit                                         M-p V           Browse dirty version controlled projects                                         M-p r           Replace in current project                                         M-p S           Save all project buffers                                         M-p k           Kill all project buffers                                         M-p m           Invoke a command                                         M-p i           Invalidates the project cache (if existing)                                         M-p R           Regenerates the projects TAGS file                                         M-p j           Find tag in project’s TAGS file                                         M-p E           Open the root dir-locals-file of the project                                         M-p !           Run shell-command in the root directory of the project                                         M-p &amp;           Run async-shell-command in the root directory of the project                                         M-p E           Opens the root dir-locals-file of the project                                         M-p z           Add the currently visited file to the cached                                         M-p C-h           View all projectile key-bindings                                            Treemacs                                  Keys           Meaning           Command                                           C-x t           Initialize or toggle treemacs           treemacs                             C-c t           Select treemacs window           treemacs-select-window                             C-c C-p ?           Show keys relating to project administration                                                                                             Navigation                  Keys       Meaning       Command                       M-.       Find or go to definition       xref-find-definitions                 C-x 4 .       Find or go to definition in another window       xref-find-definitions-other-window                 M-?       Find references to the identifier at point       xref-find-references                 M-S-s       Find references to the identifier at point       lsp-find-references                 M-h       Go to next reference       lsp-ui-find-next-reference                 M-S-h       Go to previous reference       lsp-ui-find-prev-reference                 M-.       Go to implementation       lsp-goto-implementation                 C-&lt;       Go to super       lsp-java-open-super-implementation                 M-n       Go to next error       flymake-goto-next-error                 M-p       Go to previous error       flymake-goto-prev-error           Documentation                  Keys       Meaning       Command                       M-;       Insert or indent comment on current line C-u ~ to kill the comment.       comment-dwim                 M-j       Continue comment on another line       indent-new-comment-line                 C-x C-;       Comment or uncomment current line       comment-line           Magit                  Keys       Meaning       Command                       C-x g       Open magit buffer (Def)       magit-status                 C-c g       Show transient command list buffer from any buffer.       magit-file-dispatch                 h,?       Show command list in a transient buffer.       magit-dispatch                 TAB       Expand or collapse section at point.       magit-section-toggle                 C-TAB       Cycle visibility of current section and its children.       magit-section-cycle                 s       Stage changes.       magit-stage-file                 u       Unstage changes.       magit-unstage-file                 c       Show commit buffer.       magit-commit                 - c       Commit changes and show commit message buffer.       magit-commit-create                 - - C-c C-c       Submit commit message.                         P       Show push commands transient buffer.       magit-push                 - p       Push commits.       magit-push-current-to-pushremote                 F       Show pull commands transient buffer.       magit-pull                 - p       Pull commits.       magit-pull-from-pushremote                 q       Quit status buffer.       magit-mode-bury-buffer           Automation                  Keys       Meaning       Command                       M-/       Auto-completing       dabbrev-expand                 C-f5       Format buffer       lsp-format-buffer                 C-S-f5       Format region       lsp-format-region                 C-f2       Rename       lsp-rename                 C-c c       Show company candidates       company-complete                   Company mode       After the suggestion window is started, run the following commands to select or navigate through the candidates.                                  Keys           Meaning           Command                                           M-n           Move highlighting down                                         M-p           Move highlighting up                                         C-v           Next page                                         M-v           Previous page                                         C-s           Search for candidates                                         C-M-s           Filter candidates                                         M-0 .. 9           Select the N-th candidates (1)                                         C-h/F1           Show doc of highlighted item in another buffer                                         C-g           Abort                                       Run/Debug                  Keys       Meaning       Command                       C-f9       Debug       dap-debug                 C-S-f9       Restart       dap-debug-restart           Verb   Keys below are used after prefix keys C-c C-r.                  Keys       Meaning       Command                       C-r       Send request. C-u C-c C-r C-r to see complete request before sending       verb-send-request-on-point-other-window-stay                 C-f       Resend request.       verb-send-request-on-point           Custom key-bindings           newline-below-without-break and newline-above-without-break       ;; Open new line below current line without breaking current line (defun newline-below-without-break () \"1.Move to end of line; 2. Insert newline with index\" (interactive) (let ((oldpos (point))) (end-of-line) (newline-and-indent))) (global-set-key (kbd \"&lt;S-return&gt;\") 'newline-below-without-break)      ;; Open new line above current line without breaking current line (defun newline-above-without-break () \"Insert an empty line above the currentline. Position the cursor at its beginning, according the current mode\" (interactive) (move-beginning-of-line nil) (newline-and-indent) (forward-line -1) (indent-according-to-mode)) (global-set-key (kbd \"&lt;C-S-return&gt;\") 'newline-above-without-break)                xah-forward-block and xah-backward-block       ;; Move to next blank line separated block (defun xah-forward-block (&amp;optional n) \"Move cursor beginning of next text block. A text block is separated by blank lines. This command similar to `forward-paragraph', but this command's behavior is the same regardless of syntax table. URL `http://ergoemacs.org/emacs/emacs_move_by_paragraph.html' Version 2016-06-15\" (interactive \"p\") (let ((n (if (null n) 1 n))) (re-search-forward \"\\n[\\t\\n ]*\\n+\" nil \"NOERROR\" n))) (global-set-key (kbd \"M-]\") 'xah-forward-block)      ;; Move to previous blank line separated block (defun xah-backward-block (&amp;optional n) \"Move cursor to previous text block. See: `xah-forward-block' URL `http://ergoemacs.org/emacs/emacs_move_by_paragraph.html' Version 2016-06-15\" (interactive \"p\") (let ((n (if (null n) 1 n))       ($i 1))       (while (&lt;= $i n)       (if (re-search-backward \"\\n[\\t\\n ]*\\n+\" nil \"NOERROR\")       (progn (skip-chars-backward \"\\n\\t \"))       (progn (goto-char (point-min))       (setq $i n)))       (setq $i (1+ $i))))) (global-set-key (kbd \"M-[\") 'xah-backward-block)           Functions   format, user-full-name, read-string  ","categories": ["Emacs"],
        "tags": ["Cheat Sheet"],
        "url": "/blog/emacs/emacs-commands-quick-reference/",
        "teaser": null
      },{
        "title": "Git \"fatal: Could not read from remote repository\"",
        "excerpt":"When you work with a remote repository it’s not rare to bump into this error:   fatal: Could not read from remote repository   For example, when you push local commits to a remote branch you may get this error:   Pushing to git@github.com:&lt;path to repo&gt; fatal: Could not read from remote repository. Please make sure you have the correct access rights and the repository exists.   There are different reasons and solutions for this problem according to different scenarios. Check the situations below to see if your problem is listed.   Working from a remote device   When you work from home and have ssh-ed to your company computer, you may bump into this error. If an SSH key is generated and used on the remote device (see SSH agent passphrase), and the SSH key is passphrase-protected, you need to enter that passphrase in order to use the protected key (see Adding your SSH key to the ssh-agent). On the remote device run:   $ eval \"$(ssh-agent -s)\" $ ssh-add ~/.ssh/&lt;private key file&gt;   Magit  Using Magit on Emacs on Windows   If you are using Emacs and Magit on Windows, and your remote repository access is configured with an SSH passphrase, then you need to add the following configuration to Emacs (v26.3) to let it work with SSH passphrase properly:      Check if the HOME environment variable exists on your system with echo %HOME% in CMD. If not then set it with setx HOME C:\\Users\\&lt;your home dir&gt; or from the GUI interface (Type Super key then search “environment variable”).   Install the package ssh-agency on Emacs.   Add (setenv \"SSH_ASKPASS\" \"git-gui--askpass\") to your init file and M-x eval-buffer.   If the problem doesn’t go then it may be that ssh-agent isn’t started on your system. You can try to start it by opening a new Git bash window or refering to this section.   Using Magit on Emacs on Linux   You may bump into this problem if you’re using Magit on Emacs on Linux. For example, when my Fedora 26.2 was updated to 26.3 this problem occurred. You should check if the variable SSH_AUTH_SOCK is set for Emacs. Type M-x getenv RET SSH_AUTH_SOCK to see if it exists or has a value. If not then check the value of this variable on your system with $ echo $SSH_AUTH_SOCK. For me it returns /run/user/1000/keyring/ssh. Then set the said variable for Emacs with the returned value by typing M-x setenv RET SSH_AUTH_SOCK RET &lt;returned value&gt;.   Error (ssh-agency): ‘c:/PROGRA~1/Git/usr/bin/ssh-add.exe’ failed with status 1   It’s because ssh-agent isn’t started or added to your Emacs environment. Run in shell:   eval \"$(ssh-agent -s)\" ssh-add ~/.ssh/&lt;private key file&gt; echo $SSH_AUTH_SOCK   Then in Emacs:   M-x setenv RET SSH_AUTH_SOCK RET &lt;returned value&gt;  ","categories": ["Git"],
        "tags": ["Version Control"],
        "url": "/blog/git/git-fatal-could-not-read-from-remote/",
        "teaser": null
      },{
        "title": "How to set up custom domain for Github Pages using minimal-mistakes",
        "excerpt":"First you need to purchase a domain name from a seller. A domain name without the prefix like ivanhjc.net is called the root or apex domain, and a domain like www.ivanhjc.net or blog.ivanhjc.net is called a sub-domain. To use the root domain as the custom domain for Github Pages, you need to create an A record from your domain provider’s admin panel like this:                  Name       Type       TTL       Data                       @       A       1h       185.199.108.153                                         185.199.109.153                                         185.199.110.153                                         185.199.111.153           To use a subdomain create a CNAME record like this:                  Name       Type       TTL       Data                       notes       CNAME       1h       ivanhjc.github.io           Once the custom domain is properly configured, go to the project settings on Github, and then input the domain in the Custom Domain area.   For more details see:      Github help: About custom domains and GitHub Pages   Google help: Domain forwarding   Google help: About resource records   In the case of using minimal-mistakes you need to mind these properties: url, baseurl, and repository. As stated in Site base URL when hosting your website on Github Pages you need to specify baseurl: &lt;project&gt; to correspond to the URL format Github project sites use, i.e. https://&lt;username&gt;.github.io/&lt;project&gt;/, and when testing on local it runs on http://localhost:4000/&lt;project&gt;/. Since you have a custom domain you can omit baseurl. But if you’re testing some features that require production environment such as repository, comments, analytics, etc. by running the following command:   bundle exec \"JEKYLL_ENV=production jekyll serve\"   omitting baseurl would cause the path of assets to be wrongly parsed and the site would be a mess though it can be served. This is a bit confusing since the doc doesn’t address this problem but with several trials you could find that the path of assets is resolved with the repository value to something like this:   pages/&lt;repository&gt;/assets/...   Because without repository you can’t run in production mode it seems to be a dead end for this sort of configuration, i.e., you can’t run without baseurl as well. However, you can remove baseurl andrepository and run in development mode on local, and when pushed to Github everything will work fine, including features that require production environment, such as comments.  ","categories": ["Web"],
        "tags": ["Jekyll","Minimal Mistakes"],
        "url": "/blog/web/minimal-mistakes-domain-configuration/",
        "teaser": null
      },{
        "title": "Duplicati: Failed to Restore files",
        "excerpt":"Working on Windows 10 and after using the web interface to create and run a backup job called “test-backup” with destination pointing to a USB-connected external hard drive successfully, the restoring process is acting strange.           If just one file is selected to restore and the source folder remains where it is originally, the file can be restored to a new location but an error such as below is still reported:        2020-11-02 17:00:13 +08 - [Error-Duplicati.Library.Main.Operation.RestoreHandler-PatchingFailed]: Failed to patch with remote file: \"duplicati-b5b00656e1c2e4399905807e3f1c00507.dblock.zip.aes\", message: Failed to decrypt data (invalid passphrase?): Invalid password or corrupted data           See complete log.            If just one file is selected to restore and the source folder is moved or renamed, the file can’t be restored and errors such as below  are reported:        2020-11-02 16:41:54 +08 - [Error-Duplicati.Library.Main.Operation.RestoreHandler-PatchingFailed]: Failed to patch with remote file: \"duplicati-b0c61469407564d3588544e9f1e13423a.dblock.zip.aes\", message: Failed to decrypt data (invalid passphrase?): Invalid password or corrupted data  2020-11-02 16:41:54 +08 - [Error-Duplicati.Library.Main.Operation.RestoreHandler-RestoreFileFailed]: Could not find a part of the path 'D:\\test-backup\\【5】剑桥雅思真题5.pdf'.          See complete log.       It seems to me that Duplicati is just trying to restore the files from the source folder instead of the backup folder. What’s the reason that it can’t download a file from a USB-connected hard drive? I’ve cross-checked the passphrase to make sure it’s correct, but even if it’s restored from the existing job where no passphrase input is involved, the errors would still show up.   This is probably with relation to the GUI interface because running in command line works just fine. After consulting this discussion it’s proved to be caused by the browser’s auto-filling feature. Some hidden fields may be filled with the saved passwords when you submit the forms where it should be something else. Make sure when the browser asks to save password for you select “Never”. You can try to refill the password field with something different to invoke the password-saving dialog. After making the browser never save password for the site restoring from the web interface worked fine for me.   You can use command line if the web interface doesn’t work for you. For example, to restore a file to the original location:   \"D:\\programs\\Duplicati 2\\Duplicati.CommandLine.exe\" restore \"file://F:\\test-backup\" \"&lt;file&gt;\" --encryption-module=aes --compression-module=zip --dblock-size=50mb --passphrase=\"&lt;passphrase&gt;\" --disable-module=console-password-input   To restore from b2 (see The RESTORE command and B2 Cloud Storage):   \"D:\\programs\\Duplicati 2\\Duplicati.CommandLine.exe\" restore \"b2://&lt;bucket&gt;/&lt;folder&gt;\" \"&lt;file&gt;\" --b2-accountid=\"&lt;accountId&gt;\" --b2-applicationkey=\"&lt;applicationKey&gt;\" --encryption-module=aes --compression-module=zip --dblock-size=50mb --passphrase=\"&lt;passphrase&gt;\" --disable-module=console-password-input   Note that there should be no spaces before and after the = sign such as --b2-accountid = \"foo\", because spaces are shell delimiters. You would see the error message if there are spaces:   ErrorID: B2MissingUserID No \"B2 Cloud Storage Account ID\" given  ","categories": ["Software"],
        "tags": ["Duplicati","File Management"],
        "url": "/blog/software/duplicati-failed-to-restore-files/",
        "teaser": null
      },{
        "title": "上帝说要有光，于是便有了音乐",
        "excerpt":"最近感到压力挺大，连续五天每天都睡不好觉，每次从躺上床到真正入睡平均都要一个半小 时，失眠这是老毛病了，加上最近职级晋升的压力和转到新部门后增加的工作压力，又加重 了这种情况，所以工作日平均每天睡眠不足六小时，晚上睡不着、早上起不来，强迫自己起 来的后果是整日感觉脑袋晕晕乎乎的，没法进行深度思考，只能做些常规的路径依赖的任务， 然后趁着周末可以不设闹钟好好睡两个大觉。   本来想趁周末睡饱了脑袋清醒了然后把职级晋升的PPT弄完，今天一觉睡到大中午，去必胜 客吃了个牛排后已经下午三点了，四处走走回来后已经快六点了，但还是没有要开始做PPT 的情绪，想放松又不能彻底放松，脑子里还时不时徘徊着各种工作任务的感觉，就像那个 勺子杀人狂拿着一个小勺不断敲击你 的脑门一样，时至今日我才看懂那部短片，看懂它其实不只是幻想和搞笑，也非常写实，那 种缓慢的、持续不断的折磨，是真的能让人痛不欲生的。               写PPT暂时搁置了，想着还有明天一天，习惯性地临到关头才开始拿出一股狠劲加班加点地 把任务搞完。最近在看BC PNP相关的内容，怕申请后错过相关的重要信息，所以想把邮箱好 好清理一下，现在里面已经积攒了2000多封未读邮件，经验就是，不要轻易订阅各种网站的 邮件通知，即使当时看来多么“有用”，因为这样会很快让你的未读邮件超出你的控制范围， 邮箱最好还是只接收真正重要的东西！   当我整理到MusicBrainz发送的邮件时，看到是我几个月前提交的关于”寸 铁” 和”近人可读”的词条被人编辑了的通知，于是点进去看，好家伙，增加了100多条编辑，仔 细看确实补充了很多详细信息，又心生佩服和感动，因为知道了世上还有人在关注和喜欢和 我一样的东西，或者跟我的想法类似，那就是尽可能保持信息的准确和持久，并且可验证。 看到他添加了《近人可读》这张专辑在Bandcamp上的免费播放链 接，点进去就可以播放，又听到了熟悉 的旋律和嗓音，还是一样让我内心颤动。   近人可讀 by 寸鐵  前两年在某个微信杨幂（移民）交流群里认识了一个西安男生，我们曾在微信上短暂交流过， 都曾是虾米的忠实用户，都喜欢”腰”这个乐队，然后加了他的豆瓣，没过多久他就润去葡萄 牙了，虽然他现在已经把我拉黑了（我也不知道为什么）。去年有一天偶然间看到他在豆瓣 上发了寸铁的现场通告，于是我提前一周设好闹钟，最终在9月30号在秀动上第一时间抢到 了票，不到30分钟，他们的票就售罄了。到了12月16日特地请了一天假从深圳去广州Mao Livehouse看了这张专辑的现场演出，那天中午一点到达就开始排队，前面已经有十几个人 在排了，没想到都是很年轻的年轻人。演出差不多20:30才开始，如愿占据了第一排，不知 为何舞台上的光线自始自终非常暗，仿佛在开始前刘弢（涛）把灯光师赶跑了，但还是看到 了洪宇帅气的脸，可能因为我离他确实非常近（感觉不到两米），整场最吸引我的就是洪宇 的吉他演奏，听起来非常清澈、婉转，不太说得清楚他们属于什么风格，但是听的时候会让 人想起Blues、想起那些最动人的民谣、想起Bob Dylan的歌谣，但是与BD不同的是音乐非常 好听，整个旋律感觉很流畅，节奏、配器都拿捏得非常精准地触动人心，相比之下最大的特 色反而是刘弢的嗓音，在一众精美的配乐声中有着相当的粗砺感。曾经在最难过的时候听着 腰乐队的专辑泪流满面，寸铁其实没有变太多，曾经我还一度难以置信国内能有人做出这样 的音乐，怀疑他们只是换了个马甲的知名音乐人，现在感觉他们就是一群专注搞自己内心所 向往的音乐的人，真实、专注，正是大环境所缺乏的，所以显得难能可贵。   看完那场演出后发了一条朋友圈，想到的第一句话是，”上帝说要有光，于是便有了音乐”， 在现在这样困难的时期，虽然他们的音乐似乎没有多少人听，他们还是很小众，但他们还是 继续做着给人以希望的音乐和事情，只希望更多人能认识和听到他们吧。当然说他们没有人 听也不太真实，起码卖票不到半小时就售罄，那天的演出也是爆满的，周边也有很多人抢着 买，我当时还帮一个不认识的女生额外买了一份周边，也许他们不会在主流媒体上大行其道， 但是其实已经在很多人心中埋下了种子，沉默的河流始终会静静流淌。   此刻再次放起《若你心年輕》，马上唤起我记忆中那些沉睡的向往。有时候感觉不想再折腾 了，想去大理，或者一个足够安静的地方，每天都能感受到自由、没有担忧和烦恼的感觉， 能专注做自己真正想做的事，能体会与他人交流的快乐，这些就足够了。  ","categories": ["Diary"],
        "tags": ["Music","寸铁"],
        "url": "/blog/diary/cuntie/",
        "teaser": null
      },{
        "title": "Everything Everywhere All at Once",
        "excerpt":"My rating: 8.1/10   I love it! I was thinking about how the world should be chaotically good recently and what a coincidence this movie came out with the theme conveying this idea! There are lots of WTF moments and genuinely funny scenes. There are also those narrations that really strike a cord with you. We may have been used to it that love is the panacea of all the problems but the story-telling of this movie could still make you shed tears for that. I laughed and cried a lot during watching it.   2022/05/21 16:49  ","categories": ["Diary"],
        "tags": ["Movie"],
        "url": "/blog/diary/everything/",
        "teaser": null
      },{
        "title": "Non-ascii characters displayed as code points in files",
        "excerpt":"NOTE: As of writing the version of Emacs I used is GNU Emacs 27.2 (build 1, x86_64-w64-mingw32) of 2021-03-26.   Sometimes when opening files in Emacs you may see them containing non-ascii characters displayed as code points. It’s because the file is displayed in the wrong encoding. This happens because files don’t really have an accurate description of what encoding they should be displayed with in themselves (see this discussion). So Emacs has to do some guesswork according to the current language environment. If the encoding with which the file should be displayed is not supported by the current language environment, it would be displayed in a wrong encoding so the characters would look messed up. For example, when you open a file originally encoded in Chinese-GBK in the English language environment it would display code points in place of Chinese characters because the English language environment doesn’t have an encoding scheme that supports Chinese characters.   To see your current language environment check the variable current-language-environment. To see what coding systems are supported by a language environment use the command describe-language-environment (C-h L). To check the current encoding of the character at point use what-cursor-position (C-u C-x =). The leftmost character on the mode line indicates the current buffer’s encoding. For example, U indicates the UTF-8 encoding. You can hover mouse on it to show the tooltip. The area right next to the encoding area tells the EOL (End of Line) style used for the current buffer, such as Unix (LF), Windows (CRLF), or Mac (CR).      To change the current buffer’s encoding you can right click the encoding area on the mode line, or call set-buffer-file-coding-system, and then choose a desired coding system. Emacs coding systems can specify both character encoding and EOL style. For example, utf-8-unix means using UTF-8 and UNIX EOL. You can see details about a coding system with describe-coding-system. You can also see the current buffer’s encoding by checking the variable buffer-file-coding-system.   To fix this problem, you can use a compatible language environment. If you know what language the characters are supposed to be, or better what encoding they should be displayed with, you can narrow down the choices under Options &gt; Multilingual Environment &gt; Set Language Environment, which sets the value of the variable current-language-environment to the selected one. You can also use the command set-language-environment (C-x RET l). For example, if a file is originally encoded in Chinese-GBK, to display it correctly, change the language environment to Chinese-GBK (C-x RET l Chinese-GBK), then kill the file without saving and open it again.   You may use decode-coding-string and encode-coding-string to find out the correct encoding of the characters. For example,   (decode-coding-string \"\\304\\343\\272\\303\\243\\254\\312\\300\\275\\347\" 'gbk) (encode-coding-string \"你好，世界\" 'gbk)   You can also display the characters correctly without changing the language environment, that is, using the command universal-coding-system-argument (C-x RET c) before opening the file, e.g. C-x RET c chinse-gbk C-x C-f &lt;your-file&gt;. Or if the file is already open, you can run the command revert-buffer-with-coding-system (C-x RET r) to revert the buffer in the desired encoding, e.g., C-x RET r chinese-gbk.   When the file is displayed correctly you can save it in another encoding. Use either universal-coding-system-argument (C-x RET c) or set-buffer-file-coding-system (C-x RET f) before saving it. Some examples:   C-x RET c utf-8 RET C-x C-w &lt;new file name&gt; RET C-x RET f utf-8 RET C-x C-w &lt;new file name&gt; RET   These commands are also listed under Options &gt; Multilingual Environment &gt; Set Coding Systems.   Some other utility buffers may also display non-ascii characters incorrectcly. You can follow a similar approach as described above to resolve these kinds of problems. For example, Eshell buffers may not display or read Chinese characters as expected if your current-language-environment is English and your native shell’s encoding is Chinese-GB:   The Eshell buffer couldn’t display the output of the tree command correctly:      The Eshell buffer couldn’t find the file with Chinese characters in its name using es:        ","categories": ["Emacs"],
        "tags": ["Unicode"],
        "url": "/blog/emacs/emacs-encoding/",
        "teaser": null
      },{
        "title": "Weird behavior of direct links from postimages.org",
        "excerpt":"In this demo:   &lt;!DOCTYPE html&gt; &lt;html lang=\"en\"&gt;   &lt;head&gt;     &lt;meta charset=\"UTF-8\"&gt;     &lt;title&gt;Image size test&lt;/title&gt;   &lt;/head&gt;   &lt;body&gt; \t&lt;img src=\"https://i.postimg.cc/kXzT5mbK/screenshot-2021-09-09-eshell-coding-mismatch.png\" alt=\"1\"&gt;&lt;br&gt; \t&lt;img src=\"https://i.postimg.cc/kXzT5-mbK/screenshot-2021-09-09-eshell-coding-mismatch.png\" alt=\"2\"&gt;&lt;br&gt; \t&lt;img src=\"https://i.postimg.cc/Hx4Swwdp/Piano-Roll-How-to-Chord-sounding-Indefinitely-Solved.jpg\" alt=\"3\"&gt;&lt;br&gt; \t&lt;img src=\"https://i.postimg.cc/Hx4Sw-wdp/Piano-Roll-How-to-Chord-sounding-Indefinitely-Solved.jpg\" alt=\"4\"&gt;   &lt;/body&gt; &lt;/html&gt;   there are four direct links, which are all supposed to load the original-sized images when used in &lt;img&gt; tags. However, in reality they have been shown differently in Chrome and Firefox. Their behaviors are summed up to the following table, where each image numbered 1 to 4 (marked in their alt value) is opened directly in the browser and from the &lt;img&gt; tag, and “original” means the link is opend as the original-sized image, “redirect” means it redirects to another webpage, and “thumbnail” means it is opend as a resolution-reduced thumbnail.                  Image       1       2       3       4                       Firefox                                                 Directly       original       redirect       redirect       original                 &lt;img&gt;       thumbnail       original       original       original                 Chrome                                                 Directly       original       redirect       redirect       redirect                 &lt;img&gt;       original       original       original       original           Link 1 is the direct link copied from https://postimg.cc/YhN6XT8C    \t   and is the one that I thought should display the original-sized image but actually displayed a blurry thumbnail. But this only occurred on Firefox. In Chrome it was displayed as the original-sized image. From the inspector of Firefox I could see the actual image retrieved was a much smaller one. Then I found link 3 and 4 that could be displayed in their original size. You can see a slight difference between them, that is, link 4 has an extra hypen. So I tried to mimic this to get link 2 and it worked!   This problem was spotted when I wrote this post where the screenshots were displayed as blurry thumbnails. At first I thought it’s a problem of minimal-mistakes but then narrowed it down to the links themselves. The solution is adding an extra hypen before the antepenultimate character!   Update: After I fiddled around with the demo suddenly the original link (link 1) somehow displayed the original-sized image in Firefox! Now I have no idea what’s going on. Maybe it’s because of the network because I turned on my proxy for a while. Maybe it’s because the server of https://postimages.org detected that someone was trying desperately to get this link right…   Update: After I cleared the cookies and cache all links above if opend from &lt;img&gt; couldn’t be displayed as original-sized images but returned to blurry thumbnails no matter the browser in use. I guess the reason why they could display as original-sized images at some point is because the browsers were loading them from the cache and those original-sized images were cached at some point! I still don’t know why they weren’t always displayed and how to force them to display in their original size. Guess I just have to change to another image hosting service provider.   Update: Finally I can say for sure what’s causing all the fuss. It’s because of the network! As all the troubles the GFW has caused this is just yet another one. When I cleared the cache and turned on my proxy every link could display in their original size no matter the browser. It appears postimages.org could still send a thumbnail even if the link was blocked. I feel the effort in making information more transcendent!  ","categories": ["Software"],
        "tags": ["Images","File Management"],
        "url": "/blog/software/postimages/",
        "teaser": null
      },{
        "title": "Generate and use TexInfo documentation for Git",
        "excerpt":"Info is a documentation reader for reading Info files, which ususally have the extension .info. Info files are generally produced from Texinfo files, which have the extension .texi, and with the makeinfo command. See GNU’s website for more details about Texinfo.   Emacs has its own built-in Info reader (start with C-h i). So how do you install an Info documentation for Emacs?   There are several ways to view additional Info manuals in Emacs as described in Emacs FAQ. Here is what I think is the best set-up - using an addtional info directory:   First create a directory that will contain the external Info files, such as ~/.local/share/info. Then copy the .info files to be installed to this directory. A special file named dir listing the nodes to display in the Info reader needs to be created in this directory as well. If the install-info command (which is packaged with the program texinfo) is available on your system, you can add the files to dir by invoking install-info &lt;manual&gt;.info dir. If it's not installed you can edit dir directly. First copy the dir file under the installation directory of Emacs (such as c:/Program Files/Emacs/x86_64/share/info/dir) to the external directory. Then follow the examples already in that file to add entries for the .info files you're installing, which have the format:   * Topic: (relative-pathname).  Short description of topic.   where relative-pathname corresponds to the relative path of the file without the .info suffix. The dir file should list only entries for Info files in that directory, and all other contents could be cleared except these lines before the entries:   \u001f File: dir,  Node: Top   This is the top of the INFO tree  * Menu:    Now add the external directory to the Info-additional-directory-list to make Emacs aware of it:   (add-to-list 'Info-additional-directory-list \"~/.local/share/info\")   Finally kill all *info* buffers and open a new *info* buffer again (no need to restart Emacs). You should see the manuals in the top node.   References      Info: An introduction (Info)   GNU Texinfo Manual (Info, website)   Building TexInfo version of Git User Manual and Git Manual Pages  ","categories": ["Emacs"],
        "tags": [],
        "url": "/blog/emacs/generate-git-texinfo/",
        "teaser": null
      },{
        "title": "Sharing one keyboard and mouse across multiple devices using Barrier",
        "excerpt":"If you have more than one computers you may want to use just one set of keyboard and mouse for all the computers. I’m not talking about using multiple screens, albeit similar to what I’m going to talk about to some extent. I’m talking about using multiple computers, or devices which have their own monitors, motherboards, OS-es, and keyboards and mice. If you are in this situation it’s natural to think that it would be very nice if you can control all of them with just one keyboard and one mouse, instead of cramming your workspace with many keyboards and mice. There are many ways to achieve this. There are hardware ways such as using a KVM switch, and there are software ways such as using Barrier.   Barrier is an open-source tool that supports all kinds of OS-es. Check out these articles for more details about it:      Share input devices between computers with Barrier   How To Use Single Mouse And Keyboard on Multiple Computers   It’s supposedly easy to install and use Barrier and the official repository doesn’t provide a detailed tutorial. But in reality when I installed it for myself there were several pitfalls that caught me and I think it might be helpful for others to write them down.   Without further ado let’s get into the process of my installation.      Download Barrier from its Github releases. The version I downloaded is BarrierSetup-2.4.0-release.exe. My OS-es were Windows 10 Pro.   Install the downloaded package. Follow the instructions on the screen.   Repeat the process on another computer which is to be connected.   Run Barrier on both computers.   When I started Barrier (version: 2.4.0-release-3e0d758b) I saw this error in the log:   [2023-01-25T23:40:29] ERROR: ssl certificate doesn't exist: C:\\Users\\josep\\AppData\\Local\\Barrier\\SSL\\Barrier.pem   It seems because the file “Barrier.pem” was missing. According to these comments, #1377, #231, the following steps should fix the problem:      Install Git for windows   cd into C:\\Users\\&lt;user&gt;\\AppData\\Local\\Barrier\\SSL\\   Run in the console openssl req -x509 -nodes -days 365 -subj /CN=Barrier -newkey rsa:4096 -keyout Barrier.pem -out Barrier.pem   Restart barrier   After the 3rd step a file named “Barrier.pem” was generated. But then after clicking “Reload” on Barrier although the former error was gone, a new error occurred as shown in the log:   [2023-01-25T23:51:15] INFO: OpenSSL 1.0.2l  25 May 2017 [2023-01-25T23:51:15] ERROR: could not use ssl certificate: C:\\Users\\josep\\AppData\\Local\\Barrier\\SSL\\Barrier.pem [2023-01-25T23:51:15] ERROR: error:0906D06C:PEM routines:PEM_read_bio:no start line [2023-01-25T23:51:31] INFO: OpenSSL 1.0.2l  25 May 2017 [2023-01-25T23:51:31] ERROR: could not use ssl certificate: C:\\Users\\josep\\AppData\\Local\\Barrier\\SSL\\Barrier.pem [2023-01-25T23:51:31] ERROR: error:140AD009:SSL routines:SSL_CTX_use_certificate_file:PEM lib   Restarting Barrier was of no avail at this point (log).   So actually in the 3rd step the command produced an error which I missed:   $ openssl req -x509 -nodes -days 365 -subj /CN=Barrier -newkey rsa:4096 -keyout Barrier.pem -out Barrier.pem Generating a RSA private key ........................++++ ..............................................................................++++ writing new private key to 'Barrier.pem' ----- name is expected to be in the format /type0=value0/type1=value1/type2=... where characters may be escaped by \\. This name is not in that format: 'C:/Program Files/Git/CN=Barrier' problems making Certificate Request   This is because the character “/” is treated as the root path of Git Bash. You can set the environment variable MSYS_NO_PATHCONV to 1 to fix the problem (ref. 1 2). So run in step 3 instead:   MSYS_NO_PATHCONV=1 openssl req -x509 -nodes -days 365 -subj /CN=Barrier -newkey rsa:4096 -keyout Barrier.pem -out Barrier.pem   It didn’t produce an error. Now after reloading Barrier no error occurred.   Then I added the client name to the server configuration in order for it to be allowed to connect. On the server side click “Configure Server…” button and then add a new screen with the client name to the screen grid.      The connection was successful.   Now it’s time to move the cursor around to see if everything worked as expected. Then I bumped into the problem that the cursor got stuck at the bottom right corner of the client screen. After a bit of researching I found it’s due to the mishandling of the scaling of the screens by the version of Barrier I installed (ref. #678 #698). My server computer screen was scaled to 125% and the client computer had a default scale but a portait orientation. After changing the server scale to 100% the problem was gone.   But I need a solution without changing the scales. According to this comment on #698 I downloaded the latest build (version: 2.4.0-release-a19101b1) from Barrier’s Azure pipeline and reinstalled Barrier on both computers. Reinstalling only on the server was enough to fix the problem but it’s better to keep them in sync.   Now I could move freely between the computers by simply moving the cursor to the edge of the screen.   I made several other configurations afterwards:   Enabling all dead Corners under Configure Server… &gt; Advanced server settings &gt; Dead corners. Corner size 75. This is to prevent screen switching when you reach the corners of the server screen.   Uncheck “Synchronize screen savers”. This option was enabled by default. It may keep the client from sleeping or turning off the screen.      Setting up keyboard shortcut keys for switching screens: Under Configure Server… &gt; Hotkeys, add new hotkeys and their corresponding actions. After saving you need to reload the server to see them take effect.      Since I preferred to use the super key (i.e. the Windows logo key on Windows) in the key-bindings, when I added the keys it couldn’t be captured. See this comment on #1073. The workaround is to edit the configuration file:           Set up a key-binding without the super key, e.g. C-M-].            Click Barrier &gt; Save configuration to save the configuration to a file. For example, this is the configuration of connecting my ThinkPad with the other PC called moon.            Edit the file and change the key-binding to include the super key, e.g.       keystroke(Control+Alt+]) = toggleScreen ↓ keystroke(Super+n) = toggleScreen                Select “Use existing configuration” and point to the file.            Click Reload.       Now I had set the shortcut key for switching back and forth between the screens as Win-n successfully. However, there was a new problem - when I pressed Win-n on the client it would open the Start menu, which is a bit annoying. So I ended up using another key-binding C-F10.  ","categories": ["Software"],
        "tags": ["Barrier","Productivity"],
        "url": "/blog/software/barrier/",
        "teaser": null
      },{
        "title": "Queen Rock Montreal in IMAX",
        "excerpt":"After seeing this post from Queen’s official instagram I almost instantly decided to go watch it. So I bought the ticket from Cinema Sunshine and watched it today in Grand Cinema Sunshine (Ikekubro) from 18:50 to 20:42.           View this post on Instagram            A post shared by Queen (@officialqueenmusic)    While watching it a few people of the audience (including me) would clap and give applause, but not what I had imagined that they would stand up, dance (only one woman and her child did as far as I could see), and jump around. It’s an overall quiet experience. I’m not saying it wasn’t of great reception. It was. I could feel the audience’s passion to it but maybe we’re just more contained with our emotions.   It’s easy to give it 8 out of 10. After all it’s Queen. I’ve been inspired and motivated a lot in my life by their music and especially, Freddie. For the first time I heard his voice as if right in front of me and it’s just amazing. It’s assertive, flamboyant, and sometimes light and floaty like an angel. In fact I’ve watched some snippets of this concert multiple times but his energy still poured to me out of the enormous IMAX screen.   I want to sing like him, which I dared a lot in the Karaokes. Or maybe I just want to be as confident and exuberant as him.      ","categories": ["Diary"],
        "tags": ["Movie","Music"],
        "url": "/blog/diary/queen/",
        "teaser": null
      },{
        "title": "Eyes on the Solar System",
        "excerpt":" ","categories": ["Astronomy"],
        "tags": ["NASA","3D"],
        "url": "/blog/astronomy/nasa/",
        "teaser": null
      },{
        "title": "Handling Invalid US-ASCII Character Errors in Jekyll",
        "excerpt":"When working with Jekyll, a static site generator commonly used for blogs and documentation, you may encounter errors related to character encoding, particularly the “Invalid US-ASCII character” error. This can happen when Jekyll tries to process files that contain characters not supported by the default US-ASCII encoding. Here’s a detailed look at this error and how to resolve it.   Understanding the Error   The error message typically looks like this:   Invalid US-ASCII character \"\\xE2\" on line 54 jekyll 3.9.5 | Error:  Invalid US-ASCII character \"\\xE2\" on line 54 /Users/yourusername/.gem/ruby/3.1.3/gems/jekyll-sass-converter-1.5.2/lib/jekyll/converters/scss.rb:123:in `rescue in convert': Invalid US-ASCII character \"\\\\xE2\" on line 54 (Jekyll::Converters::Scss::SyntaxError)   This error indicates that Jekyll encountered a character (\"\\xE2\", which is â in UTF-8) that is not part of the US-ASCII character set while processing your SCSS files.   Reproducing the Error   While this error can occur in various environments, let’s consider a scenario where it happens in Emacs’s eshell, while the same command runs without issue in a standard terminal like zsh.   ~/projects/josephs-blog $ bundle exec jekyll serve -P 4001   Why This Happens   The default character encoding in eshell might be set to US-ASCII, which cannot handle characters beyond the standard ASCII set. This is why characters like â (\"\\xE2\") cause problems.   Solution   To fix this error, you need to ensure that your environment uses UTF-8 encoding. Here’s how you can do it in both zsh and eshell.   1. Setting Encoding in zsh   Add the following lines to your ~/.zshrc file:   export LANG=en_US.UTF-8 export LC_ALL=en_US.UTF-8   2. Setting Encoding in Emacs eshell   Add the following to your Emacs configuration file (~/.spacemacs or ~/.spacemacs.d/init.el):   (defun dotspacemacs/user-config ()   ;; other configurations...    ;; Set UTF-8 as the default encoding for eshell   (setenv \"LANG\" \"en_US.UTF-8\")   (setenv \"LC_ALL\" \"en_US.UTF-8\") )   Reload your Emacs configuration by restarting Emacs or using SPC f e R.   Ensuring UTF-8 in Your Files   Make sure your files are saved with UTF-8 encoding. In most text editors, you can specify the encoding when saving a file. For Emacs users, you can add the following at the top of your SCSS file:   // -*- coding: utf-8 -*-   This line tells Emacs to interpret the file as UTF-8.   Conclusion   Handling character encoding issues can be tricky, but by ensuring that your environment consistently uses UTF-8, you can avoid errors related to unsupported characters. Whether you’re using zsh, eshell, or any other terminal emulator, setting the correct encoding is crucial for smooth operation with Jekyll and other tools.   By following the steps outlined above, you should be able to resolve the “Invalid US-ASCII character” error and continue developing your Jekyll site without further issues. Happy coding!  ","categories": ["Emacs"],
        "tags": ["Spacemacs","Eshell"],
        "url": "/blog/emacs/handling-invalid-us-ascii-character-errors-in-jekyll/",
        "teaser": null
      },{
        "title": "From Coca-Cola to Erythroxylaceae: A Quick Guide to the Morphology of Scientific Nomenclature",
        "excerpt":"Have you ever wandered why Coca-Cola was named as such, and if the Coca came from cocaine (gasp), the infamous drug? Yes, that is exactly right. The name Coca-Cola is a direct reference to its two original primary ingredients: coca leaves and kola nuts.   In the late 19th century, cocaine was legal and commonly used in “patent medicines” and tonics. Original recipes included an extract of the coca leaf. While estimates vary, historians believe early glasses of Coke contained roughly 9 milligrams of cocaine. For context, a typical “medical” dose at the time was much higher, but it was certainly present. Meanwhile, the kola nut, a fruit from West Africa, was the original source of the drink’s caffeine.   The drink was invented in 1886 by Dr. John Pemberton, a pharmacist who had become addicted to morphine after being wounded in the Civil War. He was searching for a “brain tonic” and a cure for his addiction, which led him to combine coca (a stimulant) with kola (caffeine) and syrup to create the famous beverage.   The bookkeeper who named the drink, Frank M. Robinson, suggested changing the “K” in Kola to a “C” because he thought the two Cs would look better in advertising. He also hand-wrote the famous flowing script logo that is still used today.   Breakdown of Erythroxylaceae   From Coca on Wikipedia:      Coca refers to any of the four cultivated plants in the family Erythroxylaceae, native to western South America.    When I saw the word Erythroxylaceae I thought of a subject I always wanted to study and be shed light upon, i.e., the morphology of words like this. I wander which domain the formation and learning of such words fall into. Is it linguistics or their specific scientific domain, like biology? If I want to learn them systematically how should I start and move forward?   First, let’s dig into the word Erythroxylaceae. It helps to treat it like a puzzle. These long botanical or biological terms are almost always constructed using Greek or Latin building blocks that describe the physical characteristics or lineage of the plant.   Here is the morphological breakdown:                  Component       Origin       Meaning                       Erythro-       Greek (erythros)       Red                 -xyl-       Greek (xylon)       Wood                 -aceae       Latin (Suffix)       Belonging to the family of                   The Prefix: Erythro-       This is a common prefix in science. In biology, you see it in erythrocytes (red blood cells). In this context, it refers to the reddish tint often found in the wood or the berries of plants within this group.            The Root: -xyl-       Derived from the Greek word for wood. You might recognize this in the word xylophone (literally “wood sound”). When combined with “erythro,” you get Erythroxylum, which is the type genus for this family—literally meaning “redwood.”            The Suffix: -aceae       In biological taxonomy, the suffix -aceae is the standardized ending for plant families. If you see a word ending in -aceae, you immediately know you are looking at a family level of classification (e.g., Rosaceae for roses, Asteraceae for daisies). It is pronounced “ay-see-ee.”            Putting it Together       When you synthesize these parts, Erythroxylaceae describes a specific family of flowering plants characterized by their “red wood.” The most famous member of this family is Erythroxylum coca, the plant from which cocaine is derived.       Most complex scientific names follow this formula, i.e.,   descriptor + subject + taxonomic rank   If you learn the most common Greek and Latin roots (like bio, photo, morph, or xyl), you can decode almost any biological term without a dictionary.   Formation and Learning   The formation of terms like Erythroxylaceae exists at a fascinating intersection: it is linguistic in its structure but scientific in its application. To master this language, you don’t need to learn “Biology” and “Linguistics” as separate hurdles. Instead, you study a specific sub-field known as Classical Etymology in Science.   Which domain does this fall into?   It is a bridge between two worlds:           Linguistics (Morphology): This is the “how.” It provides the rules for how morphemes (the smallest units of meaning) are glued together. When you break erythro- + xyl- + -aceae apart, you are performing a morphological analysis.            Specific Science (Taxonomy): This is the “what” and “why.” The specific choice of “red” and “wood” is dictated by the biologist who discovered the plant. They use Binomial Nomenclature — a formal system governed by international scientific codes (like the ICN for plants).       What’s the difference and relationship between roots, prefixes, suffixes, and combining forms?   The language of science is a modular system built primarily from Greek and Latin morphemes. Understanding the relationship between these parts allows for the decoding of complex terms like Erythroxylaceae.           The Root: the fundamental unit of meaning, the “anchor” of the word, e.g., xyl (wood), derm (skin).            The Prefix: an affix placed at the beginning of a word, often indicating direction, quantity, or location, e.g., erythro- (red), hypo- (under)            The Suffix: an affix placed at the end of a word, often determining the word’s “category” (e.g., family, disease, process), e.g., -aceae (botanical family), -itis (inflammation)            The Combining Form: a root + a connecting vowel (usually -o- or -i-). It is the “mechanical” version of the root used to join parts. We use combining forms when connecting a root to another root, or when a suffix starts with a consonant. For example,              Root: Gastr       Combining Form: Gastro-       Use case: Gastrology (The -o- makes it easier to say than “Gastrlogy”).           Another example: Osteoarthritis              Root: Oste (bone)       Combining Form: Osteo       Root: Arthr (joint)       Suffix: -itis (Inflammation)           We don’t use “Arthro-itis” because the suffix begins with a vowel, so the “o” is dropped.       How to learn systematically?   If you want to decode scientific names without a dictionary, follow this “inside-out” roadmap:           Phase 1: The “Building Blocks” (Roots)       Don’t memorize full words; memorize the combining forms.                       Colors: erythro- (red), leuko- (white), cyano- (blue), chloro- (green), melano- (black).                        Body/Structure: morph- (shape), xyl- (wood), phyll- (leaf), anthro- (human), osteo- (bone).                        Numbers/Amounts: poly- (many), oligo- (few), macro- (large), micro- (small).                        Phase 2: The “Signposts” (Suffixes)       Suffixes in science act like labels that tell you what kind of thing the word is.              -aceae: A plant family (Rosaceae)       -idae: An animal family (Felidae)       -itis: Inflammation (Arthritis)       -logy: The study of (Biology)                Phase 3: The “Logic” (Grammar)       Scientific Latin has a few simple rules. For example, in a species name like Erythroxylum coca, the first word (Genus) is always capitalized and acts as a noun, while the second word (Specific Epithet) acts as a descriptor.       Learning Path:           Start with a “Root List”: Look for “Common Greek and Latin Roots in Biology”.            Use “Divide and Conquer”: Whenever you see a long word, draw lines between the parts.       Example: Phototropism → Photo (light) + trop (turn) + ism (process).            Flashcards: Use Anki or Quizlet specifically for morphemes, not full words. If you know 50 roots, you can likely guess the meaning of 500+ scientific terms.       Useful Resources:      Dictionary of Word Roots and Combining Forms by Donald J. Borror (The “gold standard” pocket book for biologists).   Online Etymology Dictionary (https://www.etymonline.com/): Great for looking up the history of any word.   Cheat Sheet: Common Roots and Affixes   Numbers/Amounts/Sizes                  Root/Affix       IPA       Meaning       Examples                       amphi       [ˈæmfi]       both; around       amphibia                 poly       [pɑːli, pəˈlɪ]       many       polygamy                 oligo       [ˈɒlɪɡəʊ]       few       oligopoly                 macro       [mækrəʊ]       large       macroeconomics                 micro       [maɪkrəʊ]       small       microorganism                 iso       [ˈʌɪsəʊ]       equal       isotope                 aniso       [əˌnaɪsoʊ]       unequal       anisotropic           Color                  Root/Affix       IPA       Meaning       Examples                       leuc/leuk       [ˈluːkoʊ]       white       leucistic                 melan       [melən]       black       melanin                 erythro       [ɪˈrɪθroʊ]       red       erythrocyte                 cyan       [ˈsʌɪən]       blue       cyanosis                 chlor       [klɔː]       green       chlorine           Body/Structure                  Root/Affix       IPA       Meaning       Examples                       morph       [mɔːrf]       shape, form       endomorph                 xyl       [zaɪl]       wood       xylem                 phyll       [fɪl]       leaf       chlorophyll                 anth       [ænθ]       flower       anthology                 anthrop       [ˈanθrəʊp]       human       anthropology                 poda       [ˈpoʊdə]       foot       arthropoda                 derm       [dɜːrm]       skin       echinoderm                 osteo       [ɑːstiəʊ]       bone       osteoporosis                 chondr       [ˈkɒndr]       cartilage       chondrichthyes                 ptera/ptero       [tɛrə]       wings       anisoptera           Time                  Root/Affix       IPA       Meaning       Examples                       archaeo       [ɑːrˈkiːoʊ]       ancient       archaeopteryx           Taxonomic &amp; Functional Suffixes                  Suffix       IPA       Meaning       Examples                       -logy       [lədʒi]       the study of       biology                 -aceae       [eɪsiːiː]       plant family       rosaceae                 -idae       [ɪdiː]       animal family       felidae                 -phile       [faɪl]       loving, attracted to       thermophile                 -vora       [vɔːrə]       devouring, eating       carnivora          ","categories": ["English"],
        "tags": ["Science","Linguistics","Nomenclature"],
        "url": "/blog/english/coca-cola/",
        "teaser": null
      },{
        "title": "我要多说话",
        "excerpt":"             ","categories": ["Diary"],
        "tags": ["Vlog"],
        "url": "/blog/diary/speak-more/",
        "teaser": null
      },{
        "title": "Fixing the URL Scheme `goldendict://word` of GoldenDict-ng on macOS",
        "excerpt":"The link goldendict://word doesn’t work for Goldendict-ng on macOS (Sequoia 15.5). When entered in the browser’s address bar it can open the Goldendict-ng app, but not to the specified word, no query happening.   The Cause   Here’s the system and installation info as of writing (2026/01/02):   macOS (Sequoia 15.5) Version: 25.06.0.8a87a79 at 2025-06-18T05:45:54Z Qt 6.7.2 Clang 15.0.0 (clang-1500.3.9.4) macos darwin 24.5.0 arm64-little_endian-lp64 Flags: ZIM EPWING OPENCC   It appears you are encountering a known limitation with the macOS implementation of the goldendict:// URL scheme in GoldenDict-ng. On macOS, the system correctly identifies the application registered to the scheme (which is why the app opens), but it fails to pass the specific “word” parameter to the application’s search engine.   On macOS, for an app to handle URL parameters (the word part of goldendict://word), it must implement a specific Apple Event handler (openURL). If the application only registers the scheme in its Info.plist without this handler logic, it will launch but ignore the payload.   Fixing the URL Scheme   If you specifically need the link to work (e.g., clicking a link in a web page or Anki), you can create a small “Shim” app using AppleScript to bridge the gap.           Open Script Editor on your Mac.            Paste the following code:       on open location theURL     set AppleScript's text item delimiters to \"://\"     set theWord to text item 2 of theURL     do shell script \"/Applications/GoldenDict-ng.app/Contents/MacOS/GoldenDict-ng \" &amp; quoted form of theWord end open location            Save it as an Application (e.g., “GD-Handler”).       To make your “GD-Handler” the default handler for the goldendict:// scheme, you must register it in the application’s metadata and then force macOS to recognize it.           Add the Protocol to Info.plist       macOS identifies what an app can do by reading its Info.plist file.                       Locate your GD-Handler.app in Finder.                        Right-click it and select Show Package Contents.                        Navigate to Contents/Info.plist.                        Open Info.plist with a text editor (like TextEdit or VS Code).                        Paste the following XML block right before the final &lt;/dict&gt;&lt;/plist&gt; tags:           &lt;key&gt;CFBundleURLTypes&lt;/key&gt; &lt;array&gt;   &lt;dict&gt;     &lt;key&gt;CFBundleURLName&lt;/key&gt;     &lt;string&gt;GoldenDict Handler&lt;/string&gt;     &lt;key&gt;CFBundleURLSchemes&lt;/key&gt;     &lt;array&gt;       &lt;string&gt;goldendict&lt;/string&gt;     &lt;/array&gt;     &lt;key&gt;LSIsAppleDefaultForScheme&lt;/key&gt;     &lt;true/&gt;   &lt;/dict&gt; &lt;/array&gt;                                Register the App with the System       Simply saving the file isn’t enough; macOS caches these settings in a database called Launch Services. You need to force a refresh.                       Move your GD-Handler.app out of its current folder (e.g., to the Desktop) and then move it back to /Applications. This often triggers a background scan.                        Open the app once manually. This is critical; macOS will not route URLs to an app that has never been opened by the user (a security feature).                        Force the Association (Optional)       If GoldenDict-ng is still “stealing” the link, you can use the built-in macOS lsregister tool to force your handler to the top of the pile. Open Terminal and run:       /System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/LaunchServices.framework/Versions/A/Support/lsregister -f /Applications/GD-Handler.app            Verify the Default Handler       To verify which app is currently set as the primary handler for the goldendict:// scheme, run this command:       defaults read com.apple.LaunchServices/com.apple.launchservices.secure LSHandlers | grep -B 1 \"goldendict\"       If you don’t see your app’s bundle ID there, you can use a utility like SwiftDefaultApps or Duti (brew install duti) to set it explicitly:       duti -s com.your.gdhandler.id goldendict all       (You can find your bundle ID inside the same Info.plist under       Update to the latest version   Try to update the app to the latest version. After doing so the problem is gone.   Here’s the system and installation info as of writing:   macOS (Sequoia 15.5) Version: 26.1.0.13f0f84 at 2026-01-04T06:32:13Z Qt 6.9.1 Clang 15.0.0 (clang-1500.3.9.4) macos darwin 24.5.0 arm64-little_endian-lp64 Flags: ZIM EPWING OPENCC FFMPEG  ","categories": ["Software"],
        "tags": ["GoldenDict","Anki"],
        "url": "/blog/software/fixing-goldendict/",
        "teaser": null
      },{
        "title": "Crafting a Dynamic Dark Mode for Minimal Mistakes",
        "excerpt":"Setting up a dark mode that feels “just right” involves a delicate balance between respecting system settings and giving the user manual control. For the Minimal Mistakes theme, which is largely static by nature, this requires a bit of creative plumbing with Sass and JavaScript.   With this setup, the site starts in the user’s preferred system mode, snaps to dark at sunset automatically, but still yields to the user’s manual choice via a simple button click. It’s a clean, modular approach that keeps the project organized while adding a modern touch to a classic theme.   The Core Strategy: CSS Variables   The biggest hurdle is that Jekyll themes usually “bake in” a single skin at build time. To bypass this, we shift from hardcoded hex values to CSS variables. By defining our colors as variables inside a Sass mixin, we create a “single source of truth” that can be toggled on the fly.   Step 1: The CSS Package   We centralize our styles in _sass/custom/dark_mode_toggle.scss. This file contains the instructions for what “dark” looks like.   Example:   @mixin dark-theme-styles {   --bg-color: #252a34;   --text-color: #eeeeee;   --link-color: #00adb5;    /* Handle specific elements like social icons */   .social-icons,   .social-icons a {     color: inherit !important;   } }  html[data-theme=\"dark\"] {   @include dark-theme-styles; }  @media (prefers-color-scheme: dark) {   html:not([data-theme=\"light\"]) {     @include dark-theme-styles;   } }   By using html:not([data-theme=\"light\"]) within the media query, we ensure the system default only kicks in if the user hasn’t explicitly chosen to stay in light mode.   Step 2: The JavaScript Logic   Next, we need a script to handle the “brain” of the operation. Saved at assets/js/dark_mode_toggle.js, this code listens for system changes and manages localStorage so the user’s preference persists across page loads.   const systemPrefersDark = window.matchMedia('(prefers-color-scheme: dark)'); const savedTheme = localStorage.getItem('theme');  const applyTheme = (theme) =&gt; {   document.documentElement.setAttribute('data-theme', theme); };  // Initial load logic if (savedTheme) {   applyTheme(savedTheme); } else {   applyTheme(systemPrefersDark.matches ? 'dark' : 'light'); }  // Manual toggle function window.switchTheme = function() {   const current = document.documentElement.getAttribute('data-theme');   const target = current === 'dark' ? 'light' : 'dark';   applyTheme(target);   localStorage.setItem('theme', target); };   Step 3: Integration and Configuration   To make this feature manageable, we add a toggle in _config.yml: dark_mode_toggle: true.   Finally, we import these assets into our main files. In assets/css/main.scss, we use the Jekyll Sass load path to import our custom styles (remembering to skip the _sass prefix in the path):    @import \"custom/dark_mode_toggle\";    And in _includes/head/custom.html, we load our script:    &lt;script src=\"/blog/assets/js/dark_mode_toggle.js\"&gt;&lt;/script&gt;    Step 4: The Interface   To finish the implementation, you need to place a button in your theme’s navigation bar that calls the switchTheme() function we wrote.   The best place for this in Minimal Mistakes is usually the masthead.html file, so the toggle appears right next to your search icon or navigation links.   Open (or copy to your local project) _includes/masthead.html. Look for the snippet ... of the search button and add this button after it:   &lt;button class=\"theme-toggle-btn\" onclick=\"switchTheme()\"&gt;   &lt;i class=\"fas fa-moon\"&gt;&lt;/i&gt; &lt;/button&gt;   To make the button look like it belongs in the header, add these styles to your _sass/custom/dark_mode_toggle.scss file:   .theme-toggle-btn {   background: none;   border: none;   cursor: pointer;   color: inherit;   font-size: 1.1em;   padding: 0 10px;   vertical-align: middle;   outline: none;    &amp;:hover {     opacity: 0.7;   } }  /* Update the icon when dark mode is active */ html[data-theme=\"dark\"] .theme-toggle-btn i::before {   content: \"\\f185\"; /* FontAwesome Sun Icon code */ }   Using FontAwesome, we can make the icon context-aware: it shows a moon in light mode and a sun in dark mode via simple CSS content swapping.  ","categories": ["Web"],
        "tags": ["Minimal Mistakes"],
        "url": "/blog/web/dark-theme/",
        "teaser": null
      },{
        "title": "Evidence-Supported Supplements for Mood and Sleep Quality",
        "excerpt":"Finding the right nutritional support for mental well-being and rest requires navigating a sea of options. This article explores the evidence behind these supplements, focusing on how they influence our biology to promote a sense of calm and restorative sleep, and for those struggling with a “busy brain” at night or general anxiety, finds the best combination of compounds through a safe, evidence-backed strategy.   Disclaimer: The information provided in this article is for educational and informational purposes only. It is not intended as a substitute for professional medical advice, diagnosis, or treatment. Always seek the advice of your physician or other qualified health provider with any questions you may have regarding a medical condition or the use of supplements. Never disregard professional medical advice or delay in seeking it because of something you have read here.   The compounds   Below are the most prominent options backed by recent research.   Magnesium: The Biological Foundation of Calm   Magnesium is a vital macromineral involved in over 300 enzymatic reactions within the human body. While it is well-known for bone health and muscle function, recent clinical evidence has highlighted its critical role as a neuro-regulatory agent that directly impacts mood and sleep architecture.   The Mechanism: How It Works in the Brain   Magnesium’s ability to improve mental well-being is not placebo; it is grounded in several key biochemical pathways:           GABA Agonism: Magnesium acts as an agonist for GABA (gamma-aminobutyric acid) receptors. GABA is the brain’s primary “inhibitory” neurotransmitter, responsible for slowing down nerve activity and signaling the nervous system to relax.            NMDA Antagonism: It blocks the activity of NMDA receptors, which are responsible for excitatory signaling (glutamate). By preventing these receptors from over-firing, magnesium helps prevent the “racing thoughts” and mental overstimulation that characterize anxiety and insomnia.            Cortisol Regulation: Evidence suggests magnesium helps regulate the Hypothalamic-Pituitary-Adrenal (HPA) axis. This serves to blunt the release of ACTH and cortisol, preventing the “fight or flight” response from disrupting your rest.            Melatonin Synthesis: Magnesium is a necessary cofactor for the enzymatic conversion of serotonin into melatonin, the hormone that governs your circadian rhythm.       Clinical Evidence for Sleep and Mood   Recent randomized controlled trials (RCTs) have provided measurable proof of these benefits:           Insomnia Severity: A 2025 study on Magnesium Bisglycinate showed significant reductions in Insomnia Severity Index (ISI) scores compared to placebo, with participants reporting faster sleep onset.            Anxiety &amp; Depression: Systematic reviews consistently show that magnesium supplementation can reduce self-reported anxiety scores, particularly in individuals with low baseline dietary intake.            Physical Relaxation: By regulating calcium flow in muscle cells, magnesium prevents nighttime leg cramps and restless muscle tension, removing physical barriers to deep sleep.       Omega-3 Fatty Acids (EPA/DHA)   Found in fish oil, these essential fats are vital for brain structure and reducing neuroinflammation. High doses of EPA (specifically formulas where EPA is higher than DHA) have shown “moderate to strong” effects in reducing symptoms of clinical depression. It supports the fluidity of cell membranes, making it easier for neurotransmitters like dopamine and serotonin to work.   Glycine &amp; Lysine           Glycine (Glycinate in compounds): Provides the calming effect, helps with sleep, and makes the magnesium gentle on the stomach.            Lysine (Lysinate in compounds): An essential amino acid that helps with collagen formation, bone health, and immune support.       Magnesium Glycinate, Magnesium Citrate   The difference between these compounds lies in the molecule the magnesium is “bound” to, which dictates its primary effect.           Magnesium Glycinate: The “Relaxer”       It works mainly on the body by relaxing muscles and regulating the stress hormone cortisol. The “glycinate” part (glycine) also helps lower your core body temperature, which is a signal for your brain to fall asleep.              It is highly absorbable and gentle on the digestive tract.       The glycine itself acts as an inhibitory neurotransmitter.       It is less likely to cause a laxative effect compared to Citrate or Oxide.           Does Magnesium Glycinate Already Contain Glycine?       — Yes. By definition, Magnesium Glycinate (often labeled as Bisglycinate) is magnesium chemically bonded to two molecules of glycine. Therefore, taking this supplement naturally provides a significant dose of glycine—roughly 80-90% of the total weight of the compound. You do not typically need a separate glycine supplement if you are using a high-quality glycinate form.            Magnesium Bisglycinate       You might also see the word Bisglycinate on labels.              Magnesium Glycinate = Common name.       Magnesium Bisglycinate = Scientific name (meaning 2 glycine molecules).           They are the same thing.            Magnesium Lysinate Glycinate       You may encounter labels like Doctor’s Best High Absorption Magnesium Lysinate Glycinate and wonder: Is this the same as Magnesium Glycinate?       Technically, it is an enhanced version. It uses a “dual-chelate” process where magnesium is bonded to both lysine and glycine. Lysine supports collagen and bone health, while the combination ensures the magnesium remains stable through the stomach’s acidity, resulting in superior absorption.            Magnesium Citrate: The “Mover”       Bound to citric acid, this form is highly bioavailable but has a notable osmotic effect—it draws water into the intestines. This makes it an excellent choice for those seeking digestive regularity or relief from constipation, but less ideal for those with sensitive stomachs.       L-theanine   An amino acid found in green tea that promotes alpha brain wave activity, associated with “alert relaxation.” It works mainly on the brain. It increases Alpha brain waves (the state you’re in during meditation) and boosts calming neurotransmitters like GABA and serotonin. It helps “quiet” a racing mind without making you feel drugged or groggy.   Vitamin D   Often called the “sunshine vitamin,” Vitamin D acts more like a hormone in the brain, where it helps regulate serotonin production. Meta-analyses show that Vitamin D supplementation can significantly improve depressive symptoms, particularly in individuals who are deficient. It is a critical adjunctive treatment for Seasonal Affective Disorder (SAD).   Melatonin   The most widely studied sleep supplement, melatonin is a hormone your brain produces naturally in response to darkness. Strongest for “sleep-onset” insomnia (trouble falling asleep) and circadian rhythm disruptions like jet lag or shift work. By stabilizing the sleep-wake cycle, it indirectly prevents the mood irritability caused by sleep deprivation.   Ashwagandha   As an “adaptogen,” this herb helps the body manage stress by modulating the HPA axis and lowering cortisol levels. Clinical trials demonstrate that standardized extracts (like KSM-66 or Shoden) can reduce perceived stress and anxiety by over 40% in some cohorts. By reducing physiological “alertness” at night, it helps users stay asleep longer and wake up feeling more refreshed.   Saffron &amp; St. John’s Wort   These herbal extracts are among the most potent for mood modulation.           Saffron: Recent studies suggest it may be as effective as low-dose pharmaceutical antidepressants for mild-to-moderate depression.            St. John’s Wort: Extensively researched in Europe, though it is notable for having many drug interactions (consult a doctor if you take other medications).       Supplement Ratings: Efficacy vs. Long-Term Safety   Key Considerations for “Low Side Effect” Use           The “Dependency” Factor:              Magnesium/Theanine: Zero dependency. Your body does not stop producing its own versions of these.       Melatonin: Low risk, but can “mask” the fact that your body isn’t producing its own sleep signals.                Organ Load:              Magnesium is processed by the kidneys. If you have kidney disease, this moves from Tier S to “Consult a Doctor.”       Ashwagandha and St. John’s Wort are processed by the liver. Rare cases of liver stress have been noted with low-quality extracts.                Bioavailability (The “Best” Choice):       As we discussed, Magnesium Glycinate (like Doctor’s Best) is the winner for effectiveness because the chelation protects your gut, leading to virtually zero digestive side effects.       Tier S: The “Daily Foundations”   These are nutrients your body already uses for thousands of processes. They have the highest safety profile for long-term use.                  Supplement       Efficacy       Safety       Why?                       Magnesium Glycinate       High       Elite       Corrects deficiency; no dependency.                 L-Theanine       Moderate       Elite       Non-sedative; no “hangover” effect.                 Omega-3 (EPA/DHA)       Moderate       High       Structural brain support; safe.           Verdict: This is the safest long-term “stack.” Magnesium and Theanine actually support brain health over time rather than just masking symptoms.   Tier A: The “Targeted Adaptogens”   Effective for stress, but requires occasional “cycling” (taking breaks) to maintain effectiveness and monitor liver/hormone health.                  Supplement       Efficacy       Safety       Why?                       Ashwagandha       Very High       Moderate       Potent cortisol blocker; needs cycling.                 Vitamin D       Moderate       High       Essential for mood; requires blood tests.                 Saffron       High       High       Effective as some meds; low side effects.           Verdict: Excellent for high-stress periods. It is best to take Ashwagandha for 8–12 weeks, then take a 2-week break.   Tier B: The “Short-Term Correctors”   Highly effective for specific issues, but long-term daily use is becoming more controversial in recent medical literature.                  Supplement       Efficacy       Safety       Why?                       Melatonin       Very High       Moderate       Best for jet lag; potential heart risks.           Verdict: Use only for “resetting” your schedule. New 2025 studies suggest a link between multi-year, high-dose melatonin use and increased cardiovascular strain in some populations.   The Gold Standard: Magnesium Glycinate + L-Theanine   If you want a protocol you can stick with for years without worry, the Magnesium Glycinate + L-Theanine combination is the gold standard. It focuses on relaxation and neurotransmitter support rather than “knocking you out” with hormones or sedatives.   Not only can you take Magnesium Glycinate and L-theanine together, but doing so is often more effective than taking either alone.   The Synergy: While magnesium works on the physical body and long-term nervous system regulation, L-theanine targets the “mental chatter” that prevents sleep onset.   The Benefits of the “Stack”:           Faster Sleep Onset: Combining them can shorten the time it takes to fall asleep more effectively than taking either one alone.            Improved Sleep Quality: You are more likely to stay in “Deep Sleep” cycles longer.            Reduced “Wired but Tired” Feeling: This combination is excellent for people who feel physically exhausted but can’t stop thinking about their to-do list at night.            No Morning Grogginess: Unlike melatonin or heavy sleep aids, this duo typically doesn’t cause a “hangover” effect the next day.       Buying Guide:   If you are looking for the best Magnesium Glycinate product on Amazon.jp, imported brands often offer higher purity and better chelation (TRAACS® certification) than domestic “magnesium oxide” blends.           Doctor’s Best High Absorption Magnesium Lysinate Glycinate 100% Chelated, 100mg x 240 Tablets, ¥3301, 60 days, the gold standard for chelated magnesium            Double Wood Supplements Magnesium Glycinate, 400mg x 180 Capsules, 180 days, ¥4290            NatureBell pure magnesium glycinate, 500mg x 240 Capsules, 240 days, ¥7021            Solaray Magnesium Glycinate: High potency, often with added absorption enhancers            NOW Foods Bisglycinate: A reliable, budget-friendly option available in both powder and tablet forms.       Recommended Timing &amp; Dosage:      Timing: Take them 30 to 60 minutes before bed.   Magnesium Glycinate Dosage: Typically 200mg – 400mg.   L-Theanine Dosage: Typically 100mg – 200mg.   With Food? Magnesium can be taken on an empty stomach, but if you have a very sensitive stomach, taking them with a small evening snack is fine.   A Few Cautions:      Blood Pressure: Both can slightly lower blood pressure. If you are already on blood pressure medication, check with your doctor first.   Vivid Dreams: Some users report very vivid (though usually not unpleasant) dreams when first starting this combination.   Alcohol: Avoid taking these with high amounts of alcohol, as both can enhance the sedative effect of the other.  ","categories": ["Health"],
        "tags": ["Supplements","Sleep"],
        "url": "/blog/health/supplements/",
        "teaser": null
      },{
        "title": "Domain Suffixes: Differences, SEO Weight, Speed, and More",
        "excerpt":"What’s the difference between domain suffixes such as .com, .io, .site, etc.? Do they affect the search engine appearance or weight, the DNS and other network processes, and the overall load speed of your site?   Choosing a domain extension (technically called a TLD or Top-Level Domain) used to be a simple choice between .com, .net, and .org. Today, there are over 1,500 options, including “niche” ones like .io, .site, and .tech.   The Key Differences Between Suffixes   Domain suffixes are categorized into three main groups:                  Type       Examples       Best For                       gTLD (Generic)       .com, .net, .site       Global businesses and general-purpose websites.                 ccTLD (Country Code)       .uk, .ca, .in       Businesses targeting a specific country.                 nTLD (New Generic)       .io, .tech, .ai       Tech startups and specialized niches.                   .com: The “gold standard.” It is the most recognized and trusted. Users often default to typing .com if they forget an extension.            .io: Originally a ccTLD (British Indian Ocean Territory), but now treated as a generic TLD by Google because of its popularity in the tech industry (representing Input/Output).            .site / .xyz: These are newer, highly available, and usually cheaper, but sometimes carry a lower “trust” factor because they are frequently used by low-quality or spammy sites.       Impact on Search Engines (SEO)   The suffix does not directly affect your “weight” or ranking power in Google. Google has explicitly stated that it treats all generic TLDs (.com, .io, .site, etc.) equally.   However, there are indirect effects:           Trust &amp; Click-Through Rate (CTR): Users are more likely to click a .com or a niche-appropriate .io than a random extension they don’t recognize. Higher CTR can signal to Google that your result is relevant.            Geo-Targeting: If you use a ccTLD (like .de for Germany), Google will prioritize your site for users in that specific country but may make it harder to rank globally.            Spam Perception: Some TLDs (like .biz or .top) have been heavily abused by spammers. While the extension itself won’t penalize you, it might make it harder to get other reputable sites to link back to you.       DNS, Network Processes, and Speed   Technically, the suffix does not change the speed of your website’s actual content delivery, but it can affect the initial connection time.   DNS Resolution (The “Lookup”)   Before a browser loads your site, it must ask a Root Server, then a TLD Nameserver, where your site lives.           Infrastructure Quality: Different TLDs are managed by different “Registries.” For example, .com is managed by Verisign, which has world-class, lightning-fast infrastructure. A tiny, obscure TLD might be managed by a registry with fewer global servers, potentially adding a few milliseconds of latency to the first time someone visits your site.            Network Path: Once the DNS lookup is finished and cached (which happens in milliseconds), the domain suffix has zero impact on your site’s load speed. Speed is then entirely dependent on your hosting provider, server location, and website optimization.       Are there “Heavy” Suffixes?   No. A .site domain is not “heavier” than a .com. The data packets for your website’s images and code travel the same way regardless of the name on the envelope.  ","categories": ["Network"],
        "tags": ["DNS","Domain Name"],
        "url": "/blog/network/domain-suffix/",
        "teaser": null
      },{
        "title": "How do ほんのり and ほんのりと differ? The role of Adverb + と",
        "excerpt":"Some words such as ほんのり and うっすら can function as an adverb on their own. However, adding と changes the “texture” of the description.   The Role of と: In Japanese, と is often used with adverbs that describe a state or a sudden change (Gitaigo).           Without と: The adverb feels more integrated into the verb. It is a direct description of the action.            With と: It emphasizes the “manner” or the “condition” as if the speaker is observing the state. It adds a slight pause and a sense of vividness or completion to the description.       When is it necessary?           Emphasis: Use と when you want to highlight the sensory quality of the state (e.g., the specific warmth of a blush).            Quotative Function: In its linguistic origin, と acts like a quotation mark for a sound or a state. It signals “in the manner of [ほんのり].”            Grammatical Pairing: Words like うっすら almost always take と to sound natural in prose. While ほんのり is flexible, leaving と off in written Japanese can sometimes make the sentence feel slightly more casual or clipped.       Distinction Between に and と   The distinction between に and と is one of the most subtle areas of Japanese grammar. While they can often be used interchangeably, the choice shifts the perspective of the sentence.   に vs. と: The Direction of Focus           The Particle に (Result and Direction)       When you use に, the focus is on the result or the degree of the state. It functions like a standard adverbial marker, attaching the quality directly to the verb.              It feels more objective and factual.       It describes to what extent something is happening.       Example: かすかに聞こえる (It is audible to a faint degree).                The Particle と (Condition and Manner)       When you use と, the focus is on the manner or the atmosphere. It treats the adverb like a distinct state of being.              It feels more descriptive, vivid, and sometimes subjective.       It describes in what manner something appears or exists.       Example: ほんのりと赤い (It is red in a soft, suffused manner).           Comparison of Usage                  Adverb       Preferred Particle       Why?                       かすか       に       Since it focuses on the “limit of detection,” it is treated as a degree of strength.                 ほのか       に       Usually treated as a state (Na-adjective), so に is the standard grammatical bridge.                 ほんのり       と (or none)       As an onomatopoeic word, と adds a “vivid” flavor to the description.                 うっすら       と       Because it implies a thin layer, と helps visualize the “manner” in which it sits on a surface.           Contextual Nuance: うっすら   Compare these two nuances:           うっすら雪が積もる       This is a direct, adverbial use. The snow is accumulating thinly.            うっすらと雪が積もる       This adds a descriptive pause. It emphasizes the physical appearance of the thin layer covering the ground. It is the preferred choice in literature and descriptive writing.       Summary of Grammar Forms      Na-adjectives (かすか, ほのか): These strictly use に to become adverbs. You cannot use と with them.   Gitaigo/Onomatopoeia (ほんのり, うっすら): These naturally lean toward と. Using them without any particle is common in casual speech, while adding と makes them more formal and descriptive.   Exercise: に or と?   Fill in the blanks with the correct particle. Some may only have one grammatically correct answer, while others might favor one based on the “vividness” of the description.      山道で、ほのか（）花の香りが漂ってきた。   窓ガラスがうっすら（）曇っている。   隣の部屋からかすか（）話し声がする。   スープを飲むと、生姜の味がほんのり（） 感じられた。   Answer Key: 1. に; 2. と; 3. に; 4. と   Related      Synonym Comparison: かすかに, ほのかに, ほんのりと, and うっすらと  ","categories": ["Japanese"],
        "tags": ["Adverbs","Particles"],
        "url": "/blog/japanese/role-of-to/",
        "teaser": null
      },{
        "title": "Synonym Comparison: かすかに, ほのかに, ほんのりと, and うっすらと",
        "excerpt":"This guide distinguishes four common Japanese adverbs used to describe “faintness” or “slightness.” While they often overlap in English translation, their Japanese usage depends on the specific sense being engaged.   The Synonyms   かすかに — The Threshold of Perception   Core Concept: Detection. This word is used for things that are at the absolute limit of being noticed. If the stimulus were any weaker, it would be gone.   Mental Image: A Radio Signal fading out. You have to strain to hear if the music is still playing.   Key Collocations: Sounds, physical signs, and tiny amounts of light.      かすかな音 (A faint sound)   かすかな光 (A faint light)   かすかな震え (A slight tremble)   Sentences:      風の音にまじって、かすかに人の声が聞こえた。 Mixed with the sound of the wind, a faint human voice was heard.   Root Words and Derivations:      Noun (Root): かすか (微か) (The state of being faint); na-adjective   Verb: None. It typically functions as an adjective or adverb.   ほのかに — The Poetic Glow   Core Concept: Quality and Atmosphere. This describes something faint but soft, delicate, and often pleasant. It focuses on the “mood” of the sensation rather than just the strength.   Mental Image: A Candle flickering in the dark. The light is weak but provides a soft, hazy warmth.   Key Collocations: Fragrances, flickering lights, and abstract emotions.      ほのかな香り (A delicate scent)   ほのかな明かり (A dim, soft light)   ほのかな希望 (A glimmer of hope)   Sentences:      地平線がほのかに明るくなってきた。 The horizon has begun to glow with a soft, delicate light.   Root Words and Derivations:      Noun (Root): ほのか (仄か) (The state of being faint/dim); na-adjective   Verb: None. It is strictly an adjectival or adverbial root.   ほんのりと — The Subtle Tint   Core Concept: Suffusion. This describes a slight “tinge” of color or a mild flavor that bleeds into something else. It usually implies a warm or positive nuance.   Mental Image: A Peach. The soft pink color on the skin isn’t a solid block; it is a gentle, warm bleed of color.   Key Collocations: Colors (blushing), flavors, and warmth.      ほんのり赤い (Slightly/warmly red)   ほんのり甘い (Subtly sweet)   ほんのり暖かい (Mildly warm)   Sentences:      このクッキーはほんのりと生姜の味がする。 This cookie has a subtle, warm hint of ginger in its flavor.   Root Words and Derivations:      Root: This originates from an Onomatopoeic/Ideophonic root (擬態語). While ほ んのり is the adverbial base, it is related to the word ほの (the same root as ほのか).   Noun/Adjective: It functions as a No-Adjective (ほんのりの) or a Taru-Adjective.   Verb: ほんのりする (To become slightly tinged/warm).   うっすらと — The Thin Layer   Core Concept: Surface and Clarity. Derived from 薄い (thin), this describes a physical layer that is translucent or a visual that is blurry and lacking depth.   Mental Image: A Veil. A thin, semi-transparent layer covering an object or a landscape.   Key Collocations: Weather (snow/mist), makeup, and hazy memories.      うっすらと雪が積もる (A thin dusting of snow)   うっすらと化粧する (To apply light/thin makeup)   うっすらとした記憶 (A hazy/vague memory)   Sentences:      ドーナツの表面にうっすらと粉砂糖がかかっている。 A thin, translucent layer of powdered sugar is on the surface.   Root Words and Derivations:      Adjective (Root): 薄い (うすい - thin/pale). The small つ and suffix すら indicate an intensification of the state.   Verb: 薄まる (To become thin/diluted) or 薄める (To dilute).   Noun: 薄ら (Used in compounds like 薄ら寒い - slightly chilly).   Grammar in Action: The Context-Flip Example   To see how these words change the meaning of a situation, let’s look at how they describe the flavor of a soup.           かすかに苦い       The soup is “barely” bitter. You have to concentrate to tell if there is any bitterness at all. It might just be your imagination.            ほのかに柚子の香りがする       There is a “delicate” scent of yuzu. This implies the smell is pleasant, elegant, and adds to the atmosphere of the meal.            ほんのりと甘い       The soup has a “subtle, warm sweetness.” This suggests a natural, pleasing sugariness that suffuses the broth.            うっすらと油が浮いている       There is a “thin layer” of oil floating on the surface. This describes the physical, visual appearance of the liquid.       Exercises   Exercise 1: Fill in the Blanks   Choose the most appropriate adverb based on the sensory cues provided.           昨夜のことは（）覚えている。 (I vaguely remember what happened last night—like a hazy mist.)            恥ずかしくて、頬が（）赤くなった。 (My cheeks turned slightly pink with a warm glow.)            遠くから（）笛の音が聞こえる。 (A faint sound of a flute can be heard from afar—at the limit of hearing.)            春の訪れを（）感じる。 (I delicately/softly feel the arrival of spring—an emotional/atmospheric sense.)       Answer Key: 1. うっすらと; 2. ほんのりと; 3. かすかに; 4. ほのかに   Exercise 2: Image Matching   Which adverb would a native speaker likely use for the following visual/sensory scenes?      A very light dusting of powdered sugar on a donut.   The very first, weak light of dawn appearing on the horizon.   A hint of ginger in a cookie that leaves a mild aftertaste.   A sound so quiet you aren’t sure if it’s the wind or a voice.   Answer Key: 1. うっすらと; 2. ほのかに; 3. ほんのりと; 4. かすかに   Related      How do ほんのり and ほんのりと differ? The role of Adverb + と  ","categories": ["Japanese"],
        "tags": ["Adverbs","Synonyms"],
        "url": "/blog/japanese/synonyms/",
        "teaser": null
      },{
        "title": "How to exclude your own IP address from Google Analytics",
        "excerpt":"To exclude your own IP address from Google Analytics, the most reliable methods involve either using the Google Analytics Opt-out Add-on or setting up a Data Filter within your Google Analytics 4 (GA4) property.   Method 1: The Google Analytics Opt-out Add-on   This is the simplest way to ensure your browsing activity across all the sites you manage (not just your blog) is ignored.      Download the Google Analytics Opt-out Add-on provided by Google.   Install it in your primary browser.   The extension will tell the Google Analytics JavaScript (gtag.js) not to send information to Google Analytics.   Method 2: Internal Traffic Filtering (GA4)   If you prefer a solution that works across all your devices (like your phone) without installing extensions, you can filter your specific IP address within the GA4 dashboard.   Step A: Define Internal Traffic      Go to your Google Analytics Admin panel.   Under Data Collection and Modification, click Data Streams.   Select your website stream and click Configure tag settings.   Click Show all and select Define internal traffic.   Click Create and enter your IP address (you can find it by searching “what is my IP” on Google). Set the traffic_type value to internal.   Step B: Activate the Filter      Return to the Admin panel.   Under Data Settings, click Data Filters.   Click on the Internal Traffic filter (which GA4 creates by default).   Change the Filter state from “Testing” to Active and click save.   Method 3: The “Developer Mode” Hack (Jekyll Specific)   Minimal Mistakes is designed to exclude the analytics script automatically when you are running the site locally (e.g., bundle exec jekyll serve).      How it works: The theme checks the jekyll.environment variable.   The Benefit: As long as you only view your “live” site occasionally and do most of your checking on localhost:4000, your stats will remain very clean without any extra configuration.  ","categories": ["Web"],
        "tags": ["Minimal Mistakes","Google Analytics"],
        "url": "/blog/web/exclude-ip/",
        "teaser": null
      },{
        "title": "The Apartment & The Street: Understanding Public vs. Private IP Addresses",
        "excerpt":"The Difference Between Public and Private IP   When you search for “what is my IP” on Google or sites like whatismyipaddress.com and ip.me, you may find the IP address (e.g., 210.252.239.212) different from what you find from your terminal (e.g., 10.20.19.110). You are seeing the distinction between your Public IP Address and your Private (Local) IP Address.   Think of your network like an apartment building:           The Public IP (210.252.239.212) is the street address of the entire building. This is what the mailman (the Internet) sees.            The Private IP (10.20.19.110) is your specific apartment number. It only makes sense inside the building.       The Public IP Address   The address 210.252.239.212 belongs to your Router (or your ISP’s gateway).      Who gives it to you? — Your Internet Service Provider (ISP).   What is it for? — It identifies your entire home or office network to the rest of the global internet.   Visibility: Every website you visit sees this address. If you have five people in your house all visiting Google at the same time, Google sees all of them coming from this same single address.   The Private IP Address   The address 10.20.19.110 belongs specifically to your Device (laptop, phone, etc.).      Who gives it to you? — Your Router.   What is it for? — It allows your router to distinguish between your laptop and your roommate’s phone. When the router receives data from the internet, it uses this address to know which “apartment” to send the data to.   Visibility: This address is invisible to the outside world. It is part of a reserved range (the 10.x.x.x block) that is specifically designated for private use and cannot be “routed” on the public internet.   The “Translator” (NAT)   You might wonder: If the internet only sees the Public IP, how does the data get back to my specific laptop?   This is handled by a process called NAT (Network Address Translation).      Request: Your laptop (10.20.19.110) sends a request to a website.   Translation: The router “strips off” your private IP, replaces it with the public IP (210.252.239.212), and makes a note in its internal table: “Traffic on Port X belongs to the laptop.”   Response: The website sends the data back to the Public IP.   Delivery: The router looks at its table, sees Port X, and forwards the data to your laptop’s Private IP.   Why do we do this?           Security: Because your private IP is hidden, hackers on the internet cannot “see” your computer directly; they only see your router, which acts as a shield.            IP Scarcity: There are only about 4 billion IPv4 addresses in existence. If every single smartphone, smart bulb, and laptop in the world needed a unique public address, we would have run out of addresses decades ago. NAT allows millions of devices to share a single public address.       Does Public IP Address change over time? When and Why?   For most residential users, your Public IP address is dynamic, meaning it will eventually change. It isn’t tied permanently to your house like a physical street address; it’s more like a temporary “lease” on a parking spot.   When does it change?   There isn’t a fixed schedule for everyone, but a change is typically triggered by:           Router Reboots/Power Outages: If your router is turned off or loses power for a while, the “lease” on your current IP might expire. When you turn it back on, the ISP might give that old IP to someone else and hand you a new one.            Lease Expiration: Even if your router stays on, your ISP sets a “lease time” (often 24 hours to a week). When the time is up, your router asks to renew it. Usually, it keeps the same one, but the ISP can force a change at this point.            ISP Maintenance: If your provider performs network upgrades or reconfigures their hardware in your area, they may “refresh” all connections, resulting in new IPs for everyone in the neighborhood.       Why do ISPs change it?   It seems like a lot of work to keep moving addresses around, but it’s actually more efficient for the ISP:           Conserving Addresses: There is a global shortage of IPv4 addresses. Not every customer is online 24/7. By using a “pool” of addresses, the ISP only needs enough for the people currently connected, rather than one for every single customer they’ve ever signed.            Monetization: ISPs know that businesses need an address that never changes (a Static IP) so they can host servers. Because this is a premium requirement, they usually charge extra—often $10–$20 more per month—for the privilege of a fixed address.            Security: A changing IP makes you a “moving target.” It’s slightly harder for a hacker to target your specific home network over a long period if your address keeps shifting.       Comparison: Dynamic vs. Static IP                  Feature       Dynamic IP (Standard)       Static IP (Business/Add-on)                       Price       Included in your plan       Extra monthly fee                 Consistency       Changes periodically       Never changes                 Best For       Browsing, Streaming, Gaming       Hosting websites, Home Servers, CCTV                 Setup       Automatic (DHCP)       Manual configuration           What if you need it to stay the same?   If you want to access your home computer from work, or run a small game server, a changing IP is a headache. Since Static IPs are expensive, most people use DDNS (Dynamic DNS).   DDNS is a service that gives you a name (like myhome.ddns.net) and a tiny app on your router. Every time your Public IP changes, the app tells the DDNS service: “Hey, I’m at a new address now!” The name then automatically points to your new IP, so you never have to memorize the numbers.   Can you host servers without a static IP?   Strictly speaking, you do not need a static IP to host a server, but it is the “easy mode” for hosting. Without one, you simply need a way to track the “moving target” that is your dynamic IP address.   For a home server, there are three main ways to handle a changing IP, ranging from “easy” to “professional.”   The Standard Workaround: Dynamic DNS (DDNS)   This is the most popular solution for home users. Instead of giving people your IP address (which changes), you give them a hostname (like my-cool-server.ddns.net).           How it works: You run a tiny piece of software (a “Client”) on your server or router.            The Process: Every 5–10 minutes, the client checks: “What is my Public IP?” If it has changed, it sends an update to the DDNS provider. The provider immediately updates the DNS records so your hostname points to the new IP.            Popular Services: No-IP, DuckDNS (Free), and DynDNS.       The Modern “Zero-Config” Way: Tunnels (Cloudflare)   If you don’t want to deal with IP addresses or port forwarding at all, you can use a Tunnel.           How it works: You install a small program (like cloudflared) on your server. This program creates an outbound connection to Cloudflare’s network.            The Benefit: Since your server reaches out to the internet first, it doesn’t matter what your IP is. Users visit your domain (e.g., server.yourdomain.com), Cloudflare receives the request, and sends it down the “tunnel” directly to your server.            Security Bonus: This hides your Public IP entirely, protecting you from direct attacks.       The Private Way: Mesh VPNs (Tailscale / ZeroTier)   If your server is only for you or a few friends, you don’t even need a public domain or a public IP.           How it works: You install a Mesh VPN like Tailscale. It assigns your server a permanent, “virtual” IP address (usually starting with 100.x.x.x).            The Result: No matter where your server moves or how the ISP changes your real IP, you can always find it at that same virtual address, as long as your laptop is also logged into the same Tailscale account.       When is a Static IP “Non-Negotiable”?   You only truly need a static IP if you are running Email Servers. Most big providers (Gmail, Outlook) will automatically block or “spam-bin” any emails coming from a Dynamic IP range because they assume it’s a compromised home computer sending spam.  ","categories": ["Network"],
        "tags": ["IP Address"],
        "url": "/blog/network/public-private-ip/",
        "teaser": null
      },{
        "title": "Alternating Sets vs. Straight Sets",
        "excerpt":"In sports science, the method of alternating exercises (e.g., Pushups → Squats → Pushups) is called Supersetting or Alternating Sets, while the method of doing one exercise at a time (e.g., Pushups → Rest → Pushups) is called Straight Sets.   According to multiple peer-reviewed studies (including a major 2024 meta-analysis from the Journal of Strength and Conditioning Research), both methods are effective, but they serve different primary goals.   Alternating Sets (The “Efficiency” Choice)   Structure: Pushups → Squats → Rest → Repeat   This is often called an Antagonist Superset or Paired Set.      Best For: Fat loss and Time Efficiency.   The Science: Studies show that while your chest (pushups) is working, your legs (squats) are resting, and vice versa. This allows you to cut your total rest time by 30–50% without a significant drop in how much work your muscles can do.   Metabolic Boost: This method keeps your heart rate higher for longer, leading to a higher calorie burn during the session and a greater EPOC (Afterburn effect), which is superior for fat loss.   Muscle Mass: Research suggests that for hypertrophy (muscle growth), alternating sets are equally as effective as straight sets, provided you still train close to failure.   Straight Sets (The “Strength” Choice)   Structure: Pushups → Rest → Pushups → Rest → Squats      Best For: Maximum Strength and Focus.   The Science: Resting exclusively between the same exercise allows the Central Nervous System (CNS) and specific muscle fibers to recover more fully. This is why powerlifters and those focused on “Pure Strength” (e.g., hitting a 1-rep max) prefer this.   Hypertrophy: It allows for slightly more “localized” fatigue, which some bodybuilders believe leads to a better “pump” or mind-muscle connection, though the scientific data on the end result is often a tie with supersets.   Comparison Table                  Feature       Straight Sets       Alternating Sets (Supersets)                       Fat Loss       Moderate       High (Elevated Heart Rate)                 Muscle Growth       High       High                 Time Spent       Longer       Short (50% faster)                 Focus       Higher on specific muscle       Higher on overall conditioning                 Ideal for…       Breaking strength plateaus       Body Recomposition (Mass + Fat Loss)           Evaluation &amp; Recommendation   If your goal is to increase muscle mass AND reduce body fat, the scientific evidence strongly favors Alternating Sets (Method 2).   Why it wins for you:      Higher Training Density: You get more “work” done in 30 minutes than someone doing straight sets.   Cardiovascular Component: By jumping from upper body to lower body, your heart has to pump blood across your entire body rapidly, which burns more fat than resting on a bench between sets.   Peripheral Heart Action (PHA): This specific type of alternating (Upper → Lower) is a known clinical technique to improve circulation and metabolic rate.   The “Hybrid” Strategy: If you want the best of both worlds, use Straight Sets for your hardest/most technical movement (like Pistol Squats) to ensure safety and form, then switch to Alternating Sets for the rest of your workout to maximize the fat-burn.  ","categories": ["Health"],
        "tags": ["Workouts"],
        "url": "/blog/health/workout-sets/",
        "teaser": null
      },{
        "title": "Best TTS software for Japanese",
        "excerpt":"As of 2026, the software that provides the most natural Japanese pronunciation depends on whether you value emotional expression or precision in pitch and grammar.   Top Recommendations for Natural Japanese TTS           ElevenLabs: Currently regarded as a leader for **emotional range and cinematic performance**. Its generative models excel at capturing human-like nuances such as whispering, shouting, and natural prosody that traditional systems struggle to replicate.            OpenAI Realtime API: Recommended for conversational AI. Unlike traditional “transcribe-then-speak” pipelines, it offers a “breathable” flow where the AI can laugh or whisper natively, reducing the robotic lag typical of older models.            A.I.VOICE / AITalk: A Japanese-specific engine that is highly accurate for pitch accent and intonation. It allows for fine-tuning technical terms and proper nouns, making it a favorite for long-form narration.            Microsoft Azure AI Speech: The default choice for professional or corporate use where consistency is key. It utilizes neural networks to overcome limitations in stress and intonation, providing highly polished and safe outputs.            VOICEVOX: A high-quality open-source option widely used in Japan. It is known for its character-driven voices and unique accents, making it popular for content creation and video production.            Google Cloud (WaveNet)       Comparison of Strengths                  Software       Best For       Unique Strength                       ElevenLabs       Media &amp; Storytelling       Best emotional range and expressive performance.                 Azure AI Speech       Business/Enterprise       Highly consistent and supports granular SSML control.                 OpenAI       Interactive Apps       Lowest latency with a natural conversational flow.                 A.I.VOICE       Narration       Exceptional accuracy for Japanese-specific pitch accents.                 VOICEVOX       Content Creation       Free, character-based voices with manual pitch adjustment.           For a standard professional result without complex setup, Microsoft Azure or Google Cloud (WaveNet) are reliable starting points. If you want a voice that sounds like a real actor, ElevenLabs is the superior choice for naturalness in 2026.   Compare five different Japanese-made synthetic voices:               This video provides a direct audio comparison of top Japanese synthesis software like VOICEVOX and VOICEPEAK, allowing you to hear the naturalness of their intonation side-by-side.   Links      Built-in TTS for Japanese on macOS  ","categories": ["Software"],
        "tags": ["TTS"],
        "url": "/blog/software/tts-best-natural/",
        "teaser": null
      },{
        "title": "Built-in TTS for Japanese on macOS",
        "excerpt":"macOS (Tahoe 26.2 as of writing) has a robust, built-in Text-to-Speech (TTS) system that supports high-quality Japanese voices. You can use this through the graphical interface or via the Terminal.   How to Enable Japanese Voices   By default, your Mac may only have English voices downloaded. You can add Japanese voices through System Settings:           Open the Apple menu &gt; System Settings.            Navigate to Accessibility &gt; Spoken Content (or Read &amp; Speak in newer versions like Sonoma/Sequoia).            Click the System voice dropdown and select Manage Voices… (or the ⓘ icon).            Find Japanese in the list, and click Voice. You will see the available voice options, e.g.,              Kyoko (Female, standard)       Otoya (Male, standard)       Siri Voices (Hattori and O-Ren, available in macOS 13+; Voice 1 and Voice 2, available in macOS 26)           There are “Enhanced” versions besides the standard ones, which give more natural pronunciation.            Click the download icon next to a voice and select it as the default voice for Japanese text.          Various ways of triggering TTS   Speak selection   You can set a keyboard shortcut to read any highlighted text on your screen:      Go to System Settings &gt; Accessibility &gt; Read &amp; Speak.   Turn on Speak selection.   Click the info (i) button next to it to set your preferred key combination (default is often Option + Esc).   Now you can let the system read out any text on your screen by selecting it and then pressing the shortcut.   Other settings:      A controller will appear by default, which can be turned off by setting Show controller to Never.   To read multilingual text properly you can turn on Detect languages.   Accessibility Reader   You can read all text on the active window in the Accessibility Reader:      In Read &amp; Speak, turn on Accessibility Reader.   It uses the fixed key combination CMD + Esc.   While focus on a window such as Notes, Chrome, etc., press the shortcut. The Accessibility Reader will open with the text in that window. If “Autoplay in Accessibility Reader” in the info icon is turned on, it can start to read right away.   Speak item under the pointer   This is useful if you want to use mouse only to trigger the TTS.      In Read &amp; Speak, turn on Speak item under the pointer.   Move the cursor to the text and it will be pronounced immediately.   Using the say command in the terminal   Once a voice is installed, you can trigger it using the say command in your Terminal:   say -v Kyoko \"こんにちは、お元気ですか？\"   List all available voices:   say -v '?'           for Japanese:       say -v '?' | grep ja_JP           Notes:           The say command seems unable to detect languages automatically even if you’ve turned on Detect languages. Thus without -v Kyoko it doesn’t pronounce properly:       say \"こんにちは、お元気ですか？\"                Some voices can’t be found by say -v '?', like Japanese → Siri → Voice 1, which sounds more natural and better than the enhanced voices like “Otoya (Enhanced)” IMO. Thus you can’t use those voices for say. This is because Apple does not technically expose the modern Siri neural voices to the legacy say command-line utility.       How to save the speech   To save the speech as an audio file you can use one of the following methods.   Using the say command in the terminal   Save to an audio file:   say -v Kyoko \"こんにちは、お元気ですか？\" -o output.aiff   This is convenient but also limited since some voices can’t be used as previously stated.   Creating a Shortcut   You can create a Shortcut by using the action “Make spoken audio from”:      Get the shortcut  ","categories": ["Software"],
        "tags": ["TTS","macOS","Shortcut"],
        "url": "/blog/software/tts-japanese/",
        "teaser": null
      },{
        "title": "Renaming a Swift project using Xcode and Emacs",
        "excerpt":"You may need to rename a project to better reflect the app’s evolved feature set, e.g., from LiveTranscribeJP to OmniScribe. Here is how to apply this rename to your codebase.   Step 1: Update the Name throughout the Codebase   In Emacs, you can use projectile-ripgrep or projectile-replace to find and replace the name tokens. Do this only to those in the source code files, and skip files associated with project management.   Step 2: Perform the Project Rename in Xcode   To fully rename the app (including the icon name on the dock and the file structure), follow these steps in Xcode:           Rename Project:              In the Project Navigator (left sidebar), click on the blue project icon LiveTranscribeJP.       Press Enter to rename it. Type OmniScribe and press Enter.       Xcode will ask to rename targets and schemes. Click Rename.                Rename the source folder:              In the Project Navigator (left sidebar), click on the source folder icon LiveTranscribeJP.       Press Enter to rename it. Type OmniScribe and press Enter.                Rename Scheme:              Click the scheme selector (top bar, next to the Play button).                Select Manage Schemes….                          Select LiveTranscribeJP, press Enter or click on it, and rename it to OmniScribe.                Update Bundle Identifier (Optional):              Click the Project icon -&gt; Select the Target -&gt; Signing &amp; Capabilities.       Change Bundle Identifier to com.yourname.OmniScribe.                Update Info.plist:       If you see Bundle name or Bundle display name in your Info.plist, ensure they use $(PRODUCT_NAME) or are manually updated to OmniScribe.            Update Info.plist path in Build Settings:                       Open Project Settings: Click on the blue project icon (now named OmniScribe) in the left Project Navigator.                        Select the Target: In the center panel, select the OmniScribe target (under \"Targets\").                        Go to Build Settings: Click the Build Settings tab at the top.                        Search for Info.plist: Type Info.plist in the search bar (top right of the settings list).                        Update \"Info.plist File\":                      Locate the row named Info.plist File (Key: INFOPLIST_FILE).           Double-click the value on the right.           Change the path to point to the correct location of your file.                           If this path isn't set correctly you may see this error:       Build input file cannot be found: ‘/path/to/LiveTranscribeJP/Info.plist’. Did you forget to declare this file as an output of a script phase or custom build rule which produces it?      ","categories": ["Apple"],
        "tags": ["Xcode","Swift"],
        "url": "/blog/apple/renaming-xcode/",
        "teaser": null
      },{
        "title": "Differences between the commands `gem` and `bundle`",
        "excerpt":"In the Ruby ecosystem, gem and bundle serve distinct but complementary roles in managing code libraries (known as gems). While gem is the primary interface for the RubyGems package manager, bundle is the command used for Bundler, a tool built on top of RubyGems to manage project-specific dependencies.   Core Differences at a Glance                  Feature       gem (RubyGems)       bundle (Bundler)                       Primary Goal       General package management (install/uninstall/search).       Project-specific dependency management.                 Scope       System-wide: Installs gems for the entire Ruby environment.       Project-local: Manages exact versions needed for a specific app.                 Config File       None (uses direct command arguments).       Uses a Gemfile to list and lock dependencies.                 Installation       Built into Ruby (v1.9+).       Must be installed as a gem itself (via gem install bundler).           The gem Command: The Package Manager   The gem command interacts with the global Ruby environment. It is used for broad administrative tasks rather than managing a specific application's needs.           Key Functions: Used to search, install, list, and uninstall libraries from https://rubygems.org.            Common Commands:              gem install &lt;gem_name&gt;: Downloads and installs a library to your system.       gem list: Shows all gems currently installed in your global Ruby environment.       gem search &lt;query&gt;: Finds available libraries on remote servers.                Limitation: It does not track which versions of a gem a specific project needs, often leading to \"dependency hell\" if different projects require conflicting versions of the same gem.       The bundle Command: The Dependency Manager   Bundler solves the version conflict problem by creating an isolated environment for each project. It ensures that every developer on a team uses the exact same gem versions.           How It Works: It reads a Gemfile, resolves all dependencies, and creates a Gemfile.lock to record the specific versions used.            Key Functions:              bundle install: Reads the Gemfile, resolves dependencies, and installs missing gems.       bundle exec &lt;command&gt;: Runs a script (like jekyll or rake) specifically using the gem versions defined in the project's lock file.       bundle update: Updates gems to the latest allowed versions and updates the lock file.                Consistency: It guarantees that the development, staging, and production environments are identical, preventing \"it works on my machine\" bugs.       When to Use Which?      Use gem when you want to install a general-purpose tool on your computer, like a Ruby version manager or Bundler itself.   Use bundle for almost everything related to your actual application code, such as adding new libraries to your project or running project-specific tasks.  ","categories": ["Web"],
        "tags": ["Ruby"],
        "url": "/blog/web/gem-bundle/",
        "teaser": null
      },{
        "title": "Connecting Databases and executing SQLs in Spacemacs",
        "excerpt":"Here’s how you can connect to databases and execute SQLs in Spacemacs (Emacs).   Configuration   Prerequisites:      Ruby   Go   Make sure these are already installed on your system.   Configuration:           Enable sql layer       Add sql to the existing dotspacemacs-configuration-layers list in your init file.            Install external dependencies                       Syntax Checking: Install the sqlint gem.           gem install sqlint                                Formatting: Install sqlfmt and move it to your $PATH.           brew install sqlfmt sqlfmt -v                                LSP supporting: Use sqls (Go implementation)                                   Install sqls               go install github.com/sqls-server/sqls@latest                           This installs sqls under go env GOPATH (e.g., ~/go/bin). Check:               ~/go/bin/sqls --version                           Ensure Emacs can find the bin by either adding it to $PATH:               export PATH=$PATH:$HOME/go/bin                           Or set the variable lsp-sqls-server to its absolute path:               (with-eval-after-load 'lsp-sqls (setq lsp-sqls-server \"~/go/bin/sqls\"))                                                Set the variable sql-backend to 'lsp, and the variable sql-lsp-sqls-workspace-config-path to 'workspace or 'root.               (setq-default  dotspacemacs-configuration-layers  '((sql :variables         sql-backend 'lsp         sql-lsp-sqls-workspace-config-path 'workspace)))                           The difference between 'workspace and 'root depends on whether you are working in a simple project or a multi-module project (monorepo). For a simple project, they are usually the same. The distinction matters when your project has nested folders.                                               'root (Project Root):                                                           This is the top-level directory of your entire project, usually determined by the version control system (e.g., where the .git/ folder lives).                                                            Use Case: You want one single configuration file to apply to the entire repository, regardless of which sub-folder you are working in.                                                                                    'workspace (LSP Workspace Folder):                                                           This is the specific directory that lsp-mode considers the “root” for the current server instance. In a monorepo, this is often a subdirectory of the Git root.                                                            Use Case: You have a monorepo with multiple distinct services (e.g., backend/ and frontend/), and you want a different SQL configuration for each one.                                                                                                    Put .sqls/config.json files under those directories, and lsp-sqls will automatically connect DB when a .sqls file is first opened.               {     \"sqls\": {         \"connections\": [             {                 \"driver\": \"mysql\",                 \"dataSourceName\": \"user1:password1@tcp(localhost:3306)/sample_db\"             },             {                 \"driver\": \"sqlite3\",                 \"dataSourceName\": \"/path/to/file.db\",                 \"alias\": \"sqlite-local\"             }         ]     } }                           To add multiple connections of the same driver (e.g., two different SQLite databases or two PostgreSQL environments), you simply add another object to the connections array in your configuration file. Each connection entry is independent, even if they share the same “driver”. You can use the “alias” field to give them unique names.               By default, sqls automatically selects the first connection listed in your connections array in .sqls/config.json. If you open a .sql file and do not manually switch connections, the LSP server will attempt to provide completions and run queries against that top-most entry. There is no explicit \"default\": true property in the sqls configuration schema. To change the default connection, you simply reorder the list in your configuration file.                                    Another way to connect DB is through the variable lsp-sqls-connections.               (setq lsp-sqls-connections       '(((driver . \"mysql\")          (dataSourceName . \"&lt;user&gt;:&lt;password&gt;@tcp(localhost:3306)/&lt;database&gt;\"))         ((driver . \"mssql\")          (dataSourceName . \"Server=localhost;Database=sammy;User Id=yyoncho;Password=hunter2;\"))         ((driver . \"postgresql\")          (dataSourceName . \"host=127.0.0.1 port=5432 user=yyoncho password=123456 dbname=sammy sslmode=disable\"))))                                                   Notes on the difference between sqls and sql-ls   I want to enable and use the sql layer in Spacemacs. I’ve installed sqls as per the doc. But when I opened a .sql file it’s the language server sql-language-server (sql-ls) that is installed and started automatically.   Under the lsp-mode installation directory I find two files related to SQL support: lsp-sql.el and lsp-sqls.el.   It seems the first one is an implementation using the language server sql-ls (written in TypeScript) and the second is another implementation using the language server sqls (written in Go).   How do you use the Go version only? — You can disable sql-ls with:   (add-to-list 'lsp-disabled-clients 'sql-ls)   Connecting DB and Executing SQLs   You can connect to a database by opening an interactive REPL buffer (SQLi) using any of these commands:      sql-show-sqli-buffer (C-c C-z, M-m m b b)   sql-product-interactive (C-c TAB)   spacemacs/sql-start (M-m m ', M-m m s i)   They ask for the connection parameters from user input and create a new session if there isn’t an existing SQLi session.   Another method is using sql-connect and sql-connection-alist:           Set an alist of connection parameters in variable sql-connection-alist.       (setq sql-connection-alist       '((\"mysql-local\"                  ; Used in the SQLi buffer name          (sql-product 'mysql)           ; See sql-add-product          (sql-server \"localhost\")          (sql-port 3306)          (sql-user \"root\")          (sql-password \"123456\")          (sql-database \"mybase\"))))           Connections defined here appear in the submenu SQL-&gt;Start… for making new SQLi sessions.            Start a SQLi session by calling sql-connect (M-m m b c), which asks for the above configured connection name.       (sql-connect \"mysql-local\")           Once a connection is created you can execute SQLs in the SQLi buffer directly. You can also send the SQLs from elsewhere to the SQLi buffer. For example, from a sql-mode buffer you can send SQLs in the current line or region with sql-send-line-and-next (C-c C-n) or sql-send-region (C-c C-r) among others.   The SQLs are sent to the last created SQLi buffer by default. You can change the associated SQLi buffer for a sql-mode buffer or the globally default SQLi buffer using sql-set-sqli-buffer.   Commands in sql-mode           Change SQL dialect for the current buffer: spacemacs/sql-highlight (M-m m h k)            Capitalize keywords in region: sqlup-capitalize-keywords-in-region (M-m m c)            Format codes              in buffer: sqlfmt-buffer (M-m m = =)       in region: lsp-format-region (M-m m = r)           Connections            LSP (sqls)                    Show all connection: lsp-sql-show-connections           Switch to another connection: lsp-sql-switch-connection                       Connect DB in a SQLi buffer                    sql-show-sqli-buffer (C-c C-z, M-m m b b)           sql-product-interactive (C-c TAB)           spacemacs/sql-start (M-m m ‘, M-m m s i)                                Databases:              Show all: lsp-sql-show-databases       Switch: lsp-sql-switch-database                Tables              Show all tables in the current database:                    sql-list-all (C-c C-l a, M-m m l a)           lsp-sql-show-tables,  lsp-execute-code-action (M-m m a a)                       Show all fields in a table:                    sql-list-table (C-c C-l t, M-m m l t)           lsp-describe-thing-at-point (C-.)                                Switch associated SQLi buffer to another: sql-set-sqli-buffer, sql-set-sqli-buffer-generally            Execute SQLs in the current:              line:                    sql-send-line-and-next (C-c C-n)           spacemacs/sql-send-line-and-next (M-m m s l)           spacemacs/sql-send-line-and-next-and-focus (M-m m s L)                       region:                    sql-send-region (C-c C-r)           spacemacs/sql-send-region (M-m m s r)           spacemacs/sql-send-region-and-focus (M-m m s R)           lsp-sql-execute-query                       paragraph:                    sql-send-paragraph (C-c C-c)           spacemacs/sql-send-paragraph (M-m m s f)           spacemacs/sql-send-paragraph-and-focus (M-m m s F)           lsp-sql-execute-paragraph                       buffer:                    sql-send-buffer (C-c C-b)           spacemacs/sql-send-buffer (M-m m s b)           spacemacs/sql-send-buffer-and-focus (M-m m s B)           lsp-sql-execute-query                       minibuffer:                    sql-send-string (C-c C-s)           spacemacs/sql-send-string (M-m m s q)           spacemacs/sql-send-string-and-focus (M-m m s Q)                           Commands in sql-interactive-mode      Rename buffer            by appending a number: sql-rename-buffer (M-m m b r)       to another name: Pass a universal-argument to the above           Save the connection information of the current session to sql-connection-alist if it wasn’t started with a connection name: sql-save-connection (M-m m b S)   References      https://emacs-lsp.github.io/lsp-mode/page/lsp-sqls/   https://www.spacemacs.org/layers/+lang/sql/README.html   https://github.com/sqls-server/sqls   help:sql-help   Related      Executing SQL Source Code Blocks in Org Mode  ","categories": ["Emacs"],
        "tags": ["Database"],
        "url": "/blog/emacs/spacemacs-sqls/",
        "teaser": null
      },{
        "title": "Executing SQL Source Code Blocks in Org Mode",
        "excerpt":"You can execute SQL source code blocks in Org Mode.   Using built-in package ob-sql   Emacs has a built-in way to run SQL source code blocks in Org Mode through the packages sql and ob-sql. In order to evaluate an SQL source code block you must have a properly installed RDBMS. Org mode supports mysql, postgresql, oracle, etc.   You’ll need to activate SQL source code blocks in your init file.   (org-babel-do-load-languages  'org-babel-load-languages  '((sql . t)))   Examples:   Put the header arguments on the same line:  #+begin_src sql :engine mysql :dbhost localhost :dbport 3306 :dbuser root :dbpassword \"123456\" :database nocobase SELECT * FROM mytable WHERE id &gt; 500 #+end_src  Put the header arguments on separate lines:  #+name: my-query #+header: :engine mysql #+header: :dbhost localhost #+header: :dbuser root #+header: :dbpassword \"123456\" #+header: :database nocobase #+begin_src sql DESC users; #+end_src   See SQL Source Code Blocks in Org Mode for more.   Using the package ob-sql-mode   The built-in package ob-sql currently doesn’t support sessions, that is, it makes a connection (session) every time you run the block, which is somewhat slower than using an existing session. A better approach is to use the package ob-sql-mode, which supports sessions.   You can evaluate SQLs in Org mode directly via the package ob-sql-mode, which is an Org-Babel support for evaluating SQL using sql-mode.   Install the package:   (setq-default dotspacemacs-additional-packages '(ob-sql-mode)) (use-package ob-sql-mode :after (org))   Examples:   * Header 1 Now you can run the following code block with ~org-ctrl-c-ctrl-c~ (=C-c C-c=):  #+begin_src sql-mode :product mysql :session local DESC users; #+end_src  ** Header 2 :PROPERTIES: :header-args:sql-mode: :product mysql :header-args:sql-mode+: :session local :END:  You can put the header arguments in a drawer.  #+begin_src sql-mode DESC users; #+end_src   See (describe-package 'ob-sql-mode) for more details on setup.   Related      Connecting Databases and executing SQLs in Spacemacs  ","categories": ["Emacs"],
        "tags": ["Org Mode","Database"],
        "url": "/blog/emacs/org-sqls/",
        "teaser": null
      },{
        "title": "Enabling link abbreviations in Minimal Mistakes",
        "excerpt":"I want to be able to use link abbreviations in Minimal Mistakes, for example, use foo:&lt;filename&gt; in place of the full link for images and images in a gallery like the following:   --- link_abbrs:   - link_abbr: foo http://127.0.0.1:8123/archive/image/foo/ gallery:   - url: foo:20260218184820.png     image_path: foo:20260218184820.png   - url: foo:20260218184820.png     image_path: foo:20260218184820.png   - url: foo:20260218184820.png     image_path: foo:20260218184820.png ---  ![](foo:20260218184820.png)  {% include gallery caption=\"Link abbreviations\" %}   The links can then be translated to their full forms in the built result such as:   http://127.0.0.1:8123/archive/image/foo/20260218184820.png   Create a new Ruby plugin file   We can create a plugin under _plugins/link_abbr.rb which handles the link abbreviations:   require 'addressable/uri'  Jekyll::Hooks.register [:pages, :documents], :pre_render do |doc|   next unless doc.data['link_abbrs'].is_a?(Array)    doc.data['link_abbrs'].each do |item|     next unless item.is_a?(Hash) &amp;&amp; item['link_abbr']      key, base_url = item['link_abbr'].split(' ', 2)     next unless key &amp;&amp; base_url      # 1. Replaces \"](key:filename)\" inside the Markdown body content     doc.content = doc.content.gsub(/\\]\\(#{Regexp.escape(key)}:([^\\)]+)\\)/) do       escaped_path = Addressable::URI.escape(base_url + $1)       prefix = base_url.start_with?('/assets') ? \"https://josephtesfaye.com/blog\" : \"\"       \"](#{prefix}#{escaped_path})\"     end      # 2. Replace image_path in figures     doc.content = doc.content.gsub(/image_path=\"#{Regexp.escape(key)}:([^\"]+)\"/) { \"image_path=\\\"#{Addressable::URI.escape(base_url + $1)}\\\"\" }      # 3. Replace inside ANY front matter array (gallery, gallery1, gallery2, etc.)     doc.data.each do |_, value|       if value.is_a?(Array)         value.each do |list_item|           next unless list_item.is_a?(Hash)            ['url', 'image_path'].each do |attr|             if list_item[attr] &amp;&amp; list_item[attr].to_s.start_with?(\"#{key}:\")               # Replace the exact abbreviation prefix with the base URL               full_path = list_item[attr].to_s.sub(/^#{Regexp.escape(key)}:/, base_url)               list_item[attr] = Addressable::URI.escape(full_path)             end           end            if list_item['title']             list_item['title'] = list_item['title'].to_s.gsub(/\\]\\(#{Regexp.escape(key)}:([^\\)]+)\\)/) do               escaped_path = Addressable::URI.escape(base_url + $1)               prefix = base_url.start_with?('/assets') ? \"https://josephtesfaye.com/blog\" : \"\"               \"](#{prefix}#{escaped_path})\"             end           end         end       end     end   end end   The github-pages gem enforces strict safe mode and completely disables the _plugins directory to mimic GitHub’s legacy deployment environment, overriding any safe: false settings in your configuration.   To allow custom plugins to run locally, you need to replace it with the standard Jekyll gem. Since you already have all your plugins explicitly listed in your Gemfile, this is a safe swap.   Gemfile:   -gem \"github-pages\", group: :jekyll_plugins +gem \"jekyll\" +gem \"kramdown-parser-gfm\" +gem \"faraday-retry\"   _config.yml:   -remote_theme: mmistakes/minimal-mistakes@4.20.2 +theme: minimal-mistakes-jekyll   Terminal:   bundle install bundle exec jekyll serve   Use GitHub Actions to build your GitHub Pages site   This affects the default GitHub Pages build. The classic GitHub Pages build environment strictly enforces safe mode and ignores all files in the _plugins directory. If you push the site using the default settings, it will still host successfully, but your custom plugin will not run and the link abbreviations will remain unparsed.   To use custom plugins while hosting on GitHub Pages, you must switch your deployment method to GitHub Actions. This modern approach uses your exact Gemfile, executes your Ruby scripts, and then hosts the final output on GitHub Pages.      Go to your repository on GitHub.   Click on Settings, then select Pages from the left sidebar.   Under Build and deployment, change the Source from “Deploy from a branch” to “GitHub Actions”.   GitHub will suggest a default Jekyll workflow. Click Configure.   Commit the provided .github/workflows/jekyll.yml file to your repository.   With this workflow active, GitHub will read your updated Gemfile, run the link_abbr.rb plugin during the build step, and deploy the fully rendered HTML to your live site.  ","categories": ["Web"],
        "tags": ["Minimal Mistakes"],
        "url": "/blog/web/link-abbr/",
        "teaser": null
      },{
        "title": "Loading Local Images in Minimal Mistakes",
        "excerpt":"I want to be able to load local images when the site is served locally. However, the URL format file:///Users/&lt;username&gt;/archive/image/20260218184820.png doesn’t work.   Why &lt;img src=\"file:///Users/...\"&gt; won’t load?   Your page is being served over HTTP (e.g. http://localhost:4000). Modern browsers block pages from http(s)://… from loading local files via file://… for security (“cross-origin” / local file access). So even though the HTML is “correctly parsed”, the browser refuses to fetch it.   That means: a file:// URL will not work on a website (local dev server or deployed site). It only works when the page itself is also opened via file:// (and even then, policies vary).   Method 1: Copying files to project assets   The simplest method is to copy the images to &lt;project-root&gt;/assets/images/ and then refer to them using the standard syntax:   --- gallery:   - url: /assets/images/20260218184820.png     image_path: /assets/images/20260218184820.png ---  ![alt]({{ site.url }}{{ site.baseurl }}/assets/images/filename.jpg)  &lt;img src=\"https://josephtesfaye.com/blog/assets/images/filename.jpg\" alt=\"\"&gt;  {% include gallery %}   However, this has the overhead of managing files manually, which can be tedious. The following methods give you better experience.   Method 2: Using symlinks           Create a symlink to the target data inside the site root. Say, if the local images reside in ~/Downloads/temp/archive/image/foo/ you can create a symlink to it under &lt;project-root&gt;/_site/assets/archive/image/foo:       cd &lt;project-root&gt;/_site/ mkdir -p assets/archive/image/ ln -s \"~/Downloads/temp/archive/image/foo\" \"assets/archive/image/foo\"                Then you can refer to the images using the symlink like the following:       --- gallery:   - url: /assets/archive/image/foo/20260218184820.png     image_path: /assets/archive/image/foo/20260218184820.png   - url: /assets/archive/image/foo/20260218184820.png     image_path: /assets/archive/image/foo/20260218184820.png ---  ![]({{site.url}}{{site.baseurl}}/assets/archive/image/foo/20260218184820.png)  {% include gallery %}                The symlinks created this way are cleared every time the site is re-built. To make them persist we can write a plugin _plugins/symlink_external_assets.rb to create them automatically according to the following front matter of a post:       --- symlinks:   - /assets/archive/image/foo ~/Downloads/temp/archive/image/foo   - /assets/archive/video/foo ~/Downloads/temp/archive/video/foo ---           symlink_external_assets.rb:       require 'fileutils' require 'shellwords'  Jekyll::Hooks.register :site, :post_read do |site|   return if Jekyll.env == 'production'    # Store the intended symlinks so we can recreate them in the _site folder later   site.config['dynamic_symlinks'] ||= {}    docs = site.pages + site.collections.values.flat_map(&amp;:docs)   docs.each do |doc|     next unless doc.data['symlinks'].is_a?(Array)      doc.data['symlinks'].each do |symlink_def|       next unless symlink_def.is_a?(String)        parts = Shellwords.split(symlink_def)       next unless parts.size == 2        link_path_raw, target_path_raw = parts        target_path = File.expand_path(target_path_raw)       relative_link_path = link_path_raw.sub(%r{^/}, '')       link_path = File.join(site.dest, relative_link_path)        # Verify target exists       unless File.exist?(target_path)         Jekyll.logger.warn \"Symlink Plugin:\", \"Skipped. Target does not exist: #{link_path} -&gt; #{target_path}\"         next       end        # Save for the post_write phase       site.config['dynamic_symlinks'][relative_link_path] = {         target: target_path,         link: link_path       }     end   end end  # Inject the symlinks directly into the final build folder Jekyll::Hooks.register :site, :post_write do |site|   return if Jekyll.env == 'production'    symlinks = site.config['dynamic_symlinks'] || {}   symlinks.each do |relative_path, link|     target_path = link[:target]     link_path = link[:link]     needs_creation = false      # If the link already exists but is broken, recreate it. If it's not broken     # or is a file or directory, leave it. Otherwise, create the link.     if File.symlink?(link_path)       if !File.exist?(link_path)         File.unlink(link_path)         needs_creation = true       elsif File.readlink(link_path) != target_path # Link has valid target         Jekyll.logger.warn \"Symlink Plugin: Symlink already exists: #{link_path}\"       end     elsif !File.exist?(link_path)       needs_creation = true     else                        # Link path is taken by a file or directory       Jekyll.logger.warn \"Symlink Plugin: Symlink path is taken: #{link_path}\"     end      if needs_creation       FileUtils.mkdir_p(File.dirname(link_path))       begin         File.symlink(target_path, link_path)         # Jekyll.logger.info \"Symlink Plugin:\", \"Symlink created: #{link_path} -&gt; #{target_path}\"       rescue =&gt; e         Jekyll.logger.warn \"Symlink Plugin:\", \"Failed to create symlink #{link_path}: #{e.message}\"       end     end   end end           Method 3: Serving the files locally with a web server   For example, you can serve the images locally with Python’s built-in web server:           Serve your image folder       cd ~/Downloads/temp/archive/image/foo/ python3 -m http.server 8123 --bind 127.0.0.1           If you want the server to run in the background:       nohup python3 -m http.server 8123 --bind 127.0.0.1 &gt;/tmp/imgserver.log 2&gt;&amp;1 &amp;           To stop it later:       lsof -iTCP:8123 -sTCP:LISTEN kill &lt;PID&gt;                Use that URL in your post       ![](http://127.0.0.1:8123/foo/20260218184820.png)       You can serve from the directory ~/Downloads/temp/archive/image/foo/ but use a different mount path in the URL to refer to that directory, e.g., http://localhost:8123/igps/20260218184820.png. To achieve this we can write and run this python script:   cd ~/Downloads/temp/archive/image/foo/ python3 server.py   server.py:   #!/usr/bin/env python3 from http.server import ThreadingHTTPServer, SimpleHTTPRequestHandler from pathlib import Path import os import sys  # Directory you want to expose ROOT = Path(os.path.expanduser(\"~/Downloads/temp/archive/image/foo\")).resolve()  MOUNT = \"/igps/\" HOST = \"127.0.0.1\" PORT = 8123   class MountHandler(SimpleHTTPRequestHandler):     def translate_path(self, path: str) -&gt; str:         \"\"\"         Map URLs under /igps/... to files under ROOT/...         Reject everything else with a 404.         \"\"\"         # Strip query/fragment         path = path.split(\"?\", 1)[0].split(\"#\", 1)[0]          if not path.startswith(MOUNT):             # Send 404 for non-mounted paths             return str(ROOT / \"__nonexistent__\")          rel = path[len(MOUNT):]  # e.g. \"20260218184820.png\"         # Normalize and prevent path traversal         rel_path = Path(rel)         full = (ROOT / rel_path).resolve()          if ROOT not in full.parents and full != ROOT:             return str(ROOT / \"__nonexistent__\")          return str(full)      def log_message(self, fmt, *args):         # optional: quieter logs         sys.stderr.write(\"%s - - [%s] %s\\n\" % (self.client_address[0],                                               self.log_date_time_string(),                                               fmt % args))   if __name__ == \"__main__\":     if not ROOT.exists():         print(f\"ERROR: directory does not exist: {ROOT}\", file=sys.stderr)         sys.exit(1)      httpd = ThreadingHTTPServer((HOST, PORT), MountHandler)     print(f\"Serving {ROOT} at http://{HOST}:{PORT}{MOUNT}\")     httpd.serve_forever()  ","categories": ["Web"],
        "tags": ["Minimal Mistakes"],
        "url": "/blog/web/local-images/",
        "teaser": null
      },{
        "title": "Customizing Gallery in Minimal Mistakes",
        "excerpt":"Here are the customizations I’ve made to the gallery feature of Minimal   Mistakes:     Add a columns parameter to each gallery to control the columns of a gallery     such as:                                 {% include gallery columns=6 %}                             The image size should be adjusted automatically.       Support adding images to a gallery by only using the image_path parameter or     the URL in the front matter such as:                                 gallery:   - image_path: /assets/archive/image/foo/unsplash-gallery-image-1.jpg   - /assets/archive/image/foo/unsplash-gallery-image-1.jpg   - /assets/archive/image/foo/unsplash-gallery-image-1.jpg                             The gallery originally requires both url and image_path in order to have a       pop-up view of the images. But I think it’s more convenient to write in this       way. But you can still use both.       Use alt for title if title is unspecified.   Support Liquid links in the image title, e.g.,                                 --- gallery:   - image_path: https://i.postimg.cc/Vv8jFw8D/unsplash-gallery-image-1.jpg     title: \"Prompt: [[{{ site.baseurl }}{% post_url 2026-02-19-local-images %}][Local images]]\" ---                             All of these customizations are backward-compatible, that is, you can still   write a gallery in the original way to get the original feel.  Here’s a demo gallery with the above customizations:                              --- link_abbrs:   - link_abbr: foo https://i.postimg.cc/Vv8jFw8D/ gallery:   - image_path: foo:unsplash-gallery-image-1.jpg     alt: \"Use alt for title\"   - image_path: foo:unsplash-gallery-image-1.jpg     title: \"Link to post: [[{{ site.baseurl }}{% post_url 2026-02-19-local-images %}][Local images]]\"   - image_path: foo:unsplash-gallery-image-1.jpg   - image_path: foo:unsplash-gallery-image-1.jpg   - image_path: foo:unsplash-gallery-image-1.jpg   - image_path: foo:unsplash-gallery-image-1.jpg   - image_path: foo:unsplash-gallery-image-1.jpg   - image_path: foo:unsplash-gallery-image-1.jpg   - image_path: foo:unsplash-gallery-image-1.jpg ---  {% include gallery columns=6 caption=\"My custom gallery\" %}                                                                                                                                                                                                                                                                                                                                                                                       My custom gallery         Here are the steps to make the changes:     Copy the default gallery layout from the Minimal Mistakes gem (e.g.     ~/.gem/ruby/3.1.3/gems/minimal-mistakes-jekyll-4.26.0/_includes/gallery) into     your local _includes directory.   Apply these changes:                                 diff -u minimal-mistakes/_includes/gallery josephs-blog/_includes/gallery --- minimal-mistakes/_includes/gallery\t2023-12-15 19:03:51 +++ josephs-blog/_includes/gallery\t2026-03-01 23:18:56 @@ -6,6 +6,8 @@   {% if include.layout %}    {% assign gallery_layout = include.layout %} +{% elsif include.columns %} +  {% assign gallery_layout = \"custom-grid\" %}  {% else %}    {% if gallery.size == 2 %}      {% assign gallery_layout = 'half' %} @@ -16,6 +18,48 @@    {% endif %}  {% endif %}  +{% if include.columns %} + +&lt;figure class=\"{{ gallery_layout }} {{ include.class }}\" +        style=\"grid-template-columns: repeat({{ include.columns }}, 1fr);\"&gt; +  {% for img in gallery %} +    &lt;figure&gt; +      &lt;a {% if img.url %} +           href=\"{{ img.url | relative_url }}\" +         {% elsif img.image_path %} +           href=\"{{ img.image_path | relative_url }}\" +         {% else %} +           href=\"{{ img | relative_url }}\" +         {% endif %} + +         {% if img.title %} +         {% comment %} Parse Liquid syntax in titles {% endcomment %} +           title=\"{{ img.title | liquify | markdownify | remove: '&lt;p&gt;' | +                     remove: '&lt;/p&gt;' | strip | newline_to_br | split: '&lt;br /&gt;' | +                     join: '&lt;/p&gt;&lt;p&gt;' | prepend: '&lt;p&gt;' | append: '&lt;/p&gt;' | +                     escape }}\" +         {% elsif img.alt %} +           title=\"{{ img.alt }}\" +         {% endif %}&gt; + +        &lt;img {% if img.image_path %} +               src=\"{{ img.image_path | relative_url }}\" +             {% else %} +               src=\"{{ img | relative_url }}\" +             {% endif %} + +             alt=\"{% if img.alt %}{{ img.alt }}{% endif %}\"&gt; +      &lt;/a&gt; +    &lt;/figure&gt; +  {% endfor %} +  {% if include.caption %} +    &lt;figcaption&gt;{{ include.caption | markdownify | remove: \"&lt;p&gt;\" | remove: \"&lt;/p&gt;\" }}&lt;/figcaption&gt; +  {% endif %} +&lt;/figure&gt; + +{% else %} + +&lt;!-- Preserve the original style --&gt;  &lt;figure class=\"{{ gallery_layout }} {{ include.class }}\"&gt;    {% for img in gallery %}      {% if img.url %} @@ -33,3 +77,5 @@      &lt;figcaption&gt;{{ include.caption | markdownify | remove: \"&lt;p&gt;\" | remove: \"&lt;/p&gt;\" }}&lt;/figcaption&gt;    {% endif %}  &lt;/figure&gt; + +{% endif %}                              Add these styles in your assets/css/main.scss:                                 // Enable more columns in a gallery .page__content .custom-grid {   display: grid;   gap: 0.5em; }  .custom-grid figure {   margin: 0;   width: 100%; }  .custom-grid figcaption {   grid-column: 1 / -1; }  .custom-grid img {   margin-bottom: 0; }                              Create a new plugin file _plugins/liquify.rb to add a filter that evaluates     Liquid syntax inside front matter strings:                                 module Jekyll   module LiquifyFilter     def liquify(input)       Liquid::Template.parse(input.to_s).render(@context)     end   end end Liquid::Template.register_filter(Jekyll::LiquifyFilter)                             ","categories": ["Web"],
        "tags": ["Minimal Mistakes"],
        "url": "/blog/web/custom-gallery/",
        "teaser": null
      },{
        "title": "Enabling drafting in Org Mode in Minimal Mistakes",
        "excerpt":"From now on I will be able to write posts in Org Mode for this blog, besides the   existing Markdown method. Here’s how I configure it. This article is written in   an Org file and also serves as a demonstration of this new feature.  First, you can do everything in the original Markdown way, which is kept intact.   Now you can write everything in Org Mode with the extra benefit of using front   matter, Liquid syntax, figures, galleries, etc. exactly the same as in Markdown.  Here are the basic elements demonstrated:  Org Elements Examples  Numbered Headings  Headings can be numbered automatically. You can give numbers to all headings of   a post or only the headings of a subtree:     For all headings: Add ordered: true to the front matter of the post.   For all headings under a subtree: Add the attribute {: .ordered} right under a     heading. All of its sub-headings will be numbered. For example:                                 *** Headings A {: .ordered} **** Heading 1 ***** Heading 1.1 ****** Heading 1.1.1 ***** Heading 1.2 **** Heading 2 ***** Heading 2.1  *** Headings B **** Heading B1 {: .ordered} ***** Heading B1.1 ****** Heading B1.1.1 ***** Heading B1.2 **** Heading B2 ***** Heading B2.1                             Output:                                  * Headings ** Headings A 1. Heading 1 1.1. Heading 1.1 1.1.1. Heading 1.1.1 1.2. Heading 1.2 2. Heading 2 2.1. Heading 2.1 ** Headings B *** Heading 1 1. Heading 1.1 1.1. Heading 1.1.1 2. Heading 1.2 *** Heading 2 **** Heading 2.1                             If a heading is marked with the {: .ordered} attribute the numbering for its       sub-headings should always start from 1 regardless of its level in the       document or its position relative its siblings.      If both ordered: true and {: .ordered} are present for a heading, the rules of   the latter should override the former.  Heading A   Heading 1  Heading 1.1  Heading 1.1.1  Heading 1.2  Heading 2  Heading 2.1  Heading B  Heading B1   Heading B1.1  Heading B1.1.1  Heading B1.2  Heading B2  Heading B2.1  Tables  Here is the morphological breakdown:                Component Origin Meaning    Erythro- Greek (erythros) Red   -xyl- Greek (xylon) Wood   -aceae Latin (Suffix) Belonging to the family of    Lists  A multi-level list of mixed types:     First item   Second item            Sub-item A (Indented 3 spaces)         Some text                     Sub-item A (Indented 3 spaces)           Sub-item A (Indented 3 spaces)                            Sub-item A (Indented 3 spaces)               Sub-item A (Indented 3 spaces)                                   Sub-item A (Indented 3 spaces)                       Sub-item B                    Deeply nested bullet (Indented another 3 spaces)           Deeply nested bullet (Indented another 3 spaces)                           Third item  Images  A simple image:    A figure:         This is a figure caption        A gallery (with customization):                                                                                                                                                                       This is a gallery caption         Code highlighting  Inline codes: print, hello  Using : to start a line of code:   descriptor + subject + taxonomic rank  Using structure template (code block):                              def print_hi(name)   puts \"Hi, #{name}\" end print_hi('Tom')  #=&gt; prints 'Hi, Tom' to STDOUT.                         Text block:                              Hello {% include gallery columns=6 caption=\"My custom gallery\" %} {% include gallery columns=6 caption=\"My custom gallery\" %}                         Notices                              {: .notice--warning} *Watch out!* This is a warning notice inside an Org file.                            Watch out! This is a warning notice inside an Org file.     Watch out! This is a warning notice inside an Org file.     Watch out! This is a warning notice inside an Org file.     Watch out! This is a warning notice inside an Org file.     Watch out! This is a warning notice inside an Org file.     Watch out! This is a warning notice inside an Org file.  Configurations  Basic Converter  Here’s how I did the configurations.     Add org-ruby to your Gemfile:                                 group :jekyll_plugins do   ...   gem \"org-ruby\" end                              Write a new plugin: _plugins/org_converter.rb                                 require 'nokogiri' require 'rouge'  Jekyll::Hooks.register [:pages, :documents], :pre_render do |doc|   # Enable Liquid syntax   if doc.extname.downcase == '.org'     # Enable {% raw %}...{% endraw %}     doc.content = doc.content.gsub(/^[ \\t]*(\\{%[ \\t]*raw[ \\t]*%\\})[ \\t]*\\n?/, '\\1')     doc.content = doc.content.gsub(/^[ \\t]*(\\{%[ \\t]*endraw[ \\t]*%\\})[ \\t]*\\n?/, '\\1')      block_regex = /(?mi:^[ \\t]*#\\+(?:begin_src|BEGIN_HTML).*?^[ \\t]*#\\+(?:end_src|END_HTML))/     raw_regex = /(?mi:\\{%[ \\t]*raw[ \\t]*%\\}.*?\\{%[ \\t]*endraw[ \\t]*%\\})/     include_regex = /^[ \\t]*(\\{%[ \\t]*include[ \\t]+(?:figure|gallery)(?:(?!%\\}).|\\{%.*?%\\})*%\\})[ \\t]*$/m      # Enable figures, galleries, and links to posts (skip inside code or raw blocks)     doc.content = doc.content.gsub(/#{block_regex}|#{raw_regex}|#{include_regex}/) do |match|       $1 ? \"\\n#+BEGIN_HTML\\n#{$1}\\n#+END_HTML\\n\" : match     end      inline_code = /[=~][^=~\\n]+[=~]/     markdown_link = /(?&lt;!\\!)\\[([^\\]]+)\\]\\(([^)]+)\\)/      doc.content = doc.content.gsub(/#{block_regex}|^[ \\t]*:[^\\n]*$|#{inline_code}|#{markdown_link}/) do |match|       match.start_with?('[') &amp;&amp; !match.start_with?('[[') ? \"[[#{$2}][#{$1}]]\" : match     end   end end  module Jekyll   class OrgConverter &lt; Converter     safe true     priority :low      def matches(ext)       ext =~ /^\\.org$/i     end      def output_ext(ext)       \".html\"     end      def convert(content)       require 'org-ruby'       html = Orgmode::Parser.new(content).to_html       doc = Nokogiri::HTML.fragment(html)        doc.css('h1, h2, h3, h4, h5, h6').each do |node|         node['id'] = node.text.downcase.strip.gsub(/[^a-z0-9\\s-]/, '').gsub(/\\s+/, '-')       end        # Add &lt;thead&gt; to tables       doc.css('table').each do |table|         trs = table.xpath('./tr')         next if trs.empty?          if trs.first.at_xpath('./th')           thead = Nokogiri::XML::Node.new('thead', doc)           thead.add_child(trs.first)           tbody = Nokogiri::XML::Node.new('tbody', doc)           trs[1..-1].each { |tr| tbody.add_child(tr) }           table.add_child(thead)           table.add_child(tbody)         else           tbody = Nokogiri::XML::Node.new('tbody', doc)           trs.each { |tr| tbody.add_child(tr) }           table.add_child(tbody)         end       end        # Process code blocks to enable code highlighting       doc.css('pre.src[lang]').each do |pre|         lang = pre['lang']         lexer = Rouge::Lexer.find_fancy(lang) || Rouge::Lexers::PlainText         formatter = Rouge::Formatters::HTML.new          # .sub(/\\A[\\r\\n]+/, '') targets the absolute beginning of the string         # (\\A) and removes any leading line breaks or carriage returns.         # .sub(/\\s+\\z/, '') targets the absolute end of the string (\\z) and         # removes any trailing whitespace, including empty lines and spaces.         code_text = pre.text.sub(/\\A[\\r\\n]+/, '').sub(/\\s+\\z/, '')          highlighted = formatter.format(lexer.lex(code_text))         new_node = Nokogiri::HTML.fragment(%Q{             &lt;div class=\"language-#{lang} highlighter-rouge\"&gt;               &lt;div class=\"highlight\"&gt;&lt;pre class=\"highlight\"&gt;&lt;code&gt;#{highlighted}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;             &lt;/div&gt;           })         pre.replace(new_node)       end        doc.to_html     end   end end                              Install the gems with bundler and run:                                 bundle install bundle exec jekyll serve                             Notices In Markdown files you can write notices such as:                             **Watch out!** This paragraph of text has been [emphasized](#) with the `{: .notice--warning}` class. {: .notice--warning}                         Because Jekyll processes Org files into HTML using org-ruby before Kramdown can   parse them, Kramdown’s block attribute syntax like {: .notice--warning} will not   work.  To achieve the exact same result in org-ruby while still being able to use   standard Org formatting (like bold, lists, and links) inside the notice, you   must inject the raw HTML wrapper directly using the #+html: directive.                              #+html: &lt;div class=\"notice--warning\"&gt; *Watch out!* This is a warning notice inside an Org file. #+html: &lt;/div&gt;                         org-ruby passes the lines starting with #+html: straight to the output without   modification. Because you leave empty lines between the HTML tags and your text,   org-ruby will still evaluate the text in the middle as standard Org syntax,   converting Watch out! into bold tags and wrapping the lines in paragraph tags.  However, this is tedious to write compared with the Markdown syntax. It would be   much better if we can mimic Kramdown’s attribute syntax in Org files.  Because you are already utilizing Nokogiri in your Jekyll pipeline, we can   create a lightweight parser that finds the exact {: .classname } text, strips it   out, and natively injects the CSS classes into the correct HTML tags.                              modified   _plugins/org_converter.rb @@ -84,6 +84,39 @@ module Jekyll          pre.replace(new_node)        end  +      # Process Kramdown-style attribute lists {: .class1 .class2 } +      doc.xpath('.//text()[contains(., \"{:\")]').each do |node| +        # Skip if the syntax is inside a literal code block +        next if node.ancestors('pre, code').any? + +        if node.content =~ /\\{:\\s*((?:\\.[a-zA-Z0-9_\\-–—]+\\s*)+)\\}/ +          raw_classes = $1 +          normalized_classes = raw_classes.gsub(/[–—]/, '--') +          class_names = normalized_classes.scan(/\\.([a-zA-Z0-9_-]+)/).flatten + +          # Strip the syntax from the text node +          node.content = node.content.sub(/\\{:\\s*(?:\\.[a-zA-Z0-9_\\-–—]+\\s*)+\\}/, '') + +          parent = node.parent +          target = parent + +          # Clean up trailing &lt;br&gt; if the syntax was on a new line +          if node.content.strip.empty? &amp;&amp; node.previous_sibling &amp;&amp; node.previous_sibling.name == 'br' +            node.previous_sibling.remove +          end + +          # If removing the syntax leaves the block entirely empty, it targets the previous element +          if parent.name == 'p' &amp;&amp; parent.text.strip.empty? &amp;&amp; parent.children.all? { |c| c.name == 'text' || c.name == 'br' } +            target = parent.previous_element || parent +            parent.remove if target != parent +          end + +          # Apply the classes safely without overwriting existing ones +          existing_classes = target['class'] ? target['class'].split(' ') : [] +          target['class'] = (existing_classes + class_names).uniq.join(' ') +        end +      end +        doc.to_html      end    end                         Custom ID  In markdown you can write {: id=\"20260116203517\"} to assign a custom ID to a   heading. In Org there is the CUSTOM_ID property in a drawer. By default,   org-ruby completely drops :PROPERTIES: drawers when converting to HTML, which is   why your CUSTOM_ID values are disappearing before Nokogiri even has a chance to   see them. Additionally, your current org_converter.rb script forcefully   overwrites every heading’s ID with a hyphenated slug.  The fastest, most efficient way to make this work is to pre-process the Org   document line-by-line right before passing it to org-ruby. We can detect the   :CUSTOM_ID: inside the drawer, temporarily “smuggle” it directly into the   heading’s text as a special marker (%%CUSTOM_ID:...%%), and then have your   Nokogiri loop extract it and safely assign it as the real HTML ID.  Here are the lines to change in _plugins/org_converter.rb:                              modified   _plugins/org_converter.rb @@ -36,12 +36,42 @@ module Jekyll      end       def convert(content) +      # Parse CUSTOM_ID properties and inject a temporary marker +      lines = content.lines +      lines.each_with_index do |line, index| +        if line =~ /^\\*+[ \\t]+/ +          j = index + 1 +          if j &lt; lines.length &amp;&amp; lines[j] =~ /^[ \\t]*:PROPERTIES:[ \\t]*$/i +            k = j + 1 +            custom_id = nil +            while k &lt; lines.length &amp;&amp; lines[k] !~ /^[ \\t]*:END:[ \\t]*$/i &amp;&amp; lines[k] !~ /^\\*+[ \\t]+/ +              if lines[k] =~ /^[ \\t]*:CUSTOM_ID:[ \\t]+(\\S+)/i +                custom_id = $1 +              end +              k += 1 +            end +            if custom_id &amp;&amp; lines[k] =~ /^[ \\t]*:END:[ \\t]*$/i +              lines[index] = lines[index].chomp + \" %%CUSTOM_ID:#{custom_id}%%\\n\" +            end +          end +        end +      end +      content = lines.join +        require 'org-ruby'        html = Orgmode::Parser.new(content).to_html        doc = Nokogiri::HTML.fragment(html)         doc.css('h1, h2, h3, h4, h5, h6').each do |node| -        node['id'] = node.text.downcase.strip.gsub(/[^a-z0-9\\s-]/, '').gsub(/\\s+/, '-') +        if node.content =~ /%%CUSTOM_ID:(\\S+)%%/ +          node['id'] = $1 +          # Clean the marker out of all text nodes inside this heading +          node.xpath('.//text()').each do |t| +            t.content = t.content.gsub(/\\s*%%CUSTOM_ID:\\S+%%/, '') +          end +        else +          node['id'] = node.text.downcase.strip.gsub(/[^a-z0-9\\s-]/, '').gsub(/\\s+/, '-') +        end        end         # Add &lt;thead&gt; to tables                         Numbered Headings  To make this work seamlessly, we must append a :post_render hook to the bottom   of org_converter.rb. This is structurally necessary for two reasons:     Front Matter Access: Jekyll strips front matter (ordered: true) before     passing the text to the convert function, so org_converter cannot natively     see it.   TOC Availability: Minimal Mistakes injects the Table of Contents via Liquid     templates during the layout phase. If we try to inject numbers inside the     convert step, the TOC doesn’t exist in the HTML yet, meaning it would remain     unnumbered.  By running this logic in :post_render, we have full access to both the front   matter and the fully generated layout (including the TOC).  Append these lines to the very end of the _plugins/org_converter.rb file:                              modified   _plugins/org_converter.rb @@ -151,3 +151,53 @@ module Jekyll      end    end  end + +Jekyll::Hooks.register [:pages, :documents], :post_render do |doc| +  # Only process Org Mode files +  next unless doc.extname.downcase == '.org' + +  is_ordered_post = doc.data['ordered'] == true || doc.data['ordered'] == 'true' +  fragment = Nokogiri::HTML(doc.output) +  modified = false + +  counters = Array.new(7, 0) +  anchor_stack = is_ordered_post ? [0] : [] + +  main_content = fragment.at_css('section.page__content') || fragment.at_css('#main') || fragment + +  main_content.css('h1, h2, h3, h4, h5, h6').each do |heading| +    # Skip structural layout headings +    next if heading.ancestors('.toc, .page__comments, .page__related, .sidebar').any? + +    level = heading.name[1].to_i +    # Exit any ordered scopes that are at the same or higher level than the current heading +    anchor_stack.reject! { |a| a &gt;= level } + +    counters[level] += 1 +    ((level + 1)..6).each { |i| counters[i] = 0 } + +    if anchor_stack.any? +      active_anchor = anchor_stack.last +      visible_counters = counters[(active_anchor + 1)..level] + +      if visible_counters.any? +        number_prefix = visible_counters.join('.') + '. ' +        heading.inner_html = \"&lt;span class=\\\"heading-number\\\"&gt;#{number_prefix}&lt;/span&gt;\" + heading.inner_html + +        if heading['id'] +          toc_link = fragment.at_css(\".toc__menu a[href='##{heading['id']}']\") +          if toc_link +            toc_link.inner_html = \"&lt;span class=\\\"toc-number\\\"&gt;#{number_prefix}&lt;/span&gt;\" + toc_link.inner_html +          end +        end +        modified = true +      end +    end + +    if heading['class'] &amp;&amp; heading['class'].split.include?('ordered') +      anchor_stack &lt;&lt; level +    end +  end + +  doc.output = fragment.to_html if modified +end                         ","categories": ["Web"],
        "tags": ["Minimal Mistakes"],
        "url": "/blog/web/enable-org-mode/",
        "teaser": null
      },{
        "title": "🔒 Protected Content",
        "excerpt":"I want to be able to make a post private, that is, it can only be seen by me, or   someone with a password, and not by any other person, any search engine, any   other means.  The Ideas  Because Jekyll generates a completely static site, there is no backend server to   check a user’s session or validate a password before sending the HTML to the   browser. If a page exists on the server, anyone who guesses the URL can   technically download it.  To achieve true privacy on a static site, you have to shift the protection   mechanism. Here are the two most effective architectural ideas for implementing   this:  Idea 1: Client-Side Content Encryption (The Best Static Approach)  Instead of hiding the file, you scramble its contents. You would use a custom   Jekyll plugin (or an existing gem like jekyll-crypt) that hooks into the build   process.     How it works: In the front matter of your private post, you define a password:     \"mysecret\"~ and a ~published: true flag. During jekyll build, the plugin     intercepts the post’s rendered HTML and encrypts it using an algorithm like     AES-256, using the password as the key.   What gets published: The output HTML file contains zero actual content. It     only contains a JavaScript password prompt, the decryption logic, and a giant     block of ciphertext.   The User Experience: When you visit the URL, the page loads a password box.     Entering the correct password triggers the JavaScript to decrypt the     ciphertext locally in the browser and inject the readable HTML into the DOM.   Security: Search engines and scrapers only see the JavaScript and ciphertext,     making it completely impossible for them to index the real content. Anyone     poking around your GitHub repository (if public) or the site’s source code     will only see gibberish.  If you want to keep everything self-contained within Jekyll and easily hostable   anywhere (like basic GitHub Pages), this is the definitive way to go.  Idea 2: Edge-Level Access Control (The Infrastructure Approach)  If you want to protect the files at the network level rather than encrypting the   contents, you must rely on the hosting provider rather than Jekyll.     How it works: Instead of relying on a backend server, you use a modern CDN or     hosting provider that supports “Edge Functions” or zero-trust access (like     Cloudflare Pages, Netlify, or Vercel).   The Architecture: You set up a routing rule at the CDN level stating that any     URL matching /private/* requires authentication.   The User Experience: When a user navigates to the private post, the CDN     intercepts the request before it even reaches the static HTML files. It serves     a login page. If the password is correct, the CDN sets a secure cookie and     forwards the static file.   Security: Highly secure. The static files are never transmitted over the     network until authentication is verified at the edge node.  What about the the source files?  What about the the source markdown or org files? How do you also hide them from   the public, since currently I have the site hosted on Github through Github   Actions, which requires the repository to be public? How can you make the   repository private to still be able to serve the site?  Yes, you can hide your source files by making the repository private, but how   you achieve this depends on your GitHub account tier and where you want to host   the site.  Here is the breakdown of your options:     The Native GitHub Way (Requires Paid Account)     If you have a GitHub Pro, Team, or Enterprise account, you can simply go to       your repository settings and change the visibility to Private. GitHub Pages       natively supports publishing from private repositories on these paid tiers.       You can even set access controls so the site itself is only visible to       specific people in your organization.       The Alternative Hosting Way (Free &amp; Easiest)     If you are on a GitHub Free account, GitHub Pages requires the repository to       be public to serve the site.      The easiest way to keep your source code private for free is to move your       hosting to Cloudflare Pages, Netlify, or Vercel.             Make your GitHub repository Private. This instantly breaks GitHub Pages.       Link your private GitHub repository to a free Cloudflare Pages or Netlify         account.       They will automatically run your Jekyll build commands (just like GitHub         Actions) and serve the compiled HTML globally. Your source files remain         completely hidden in your private GitHub repo.           The Two-Repository Strategy (Free, GitHub-Only)     If you are on a free account but absolutely want to keep using GitHub Pages,       you can separate your raw source files from your generated HTML using two       repositories and GitHub Actions.             Create Repo A (Private): This holds your Jekyll source files (Markdown,         Org files, _config.yml, etc.).       Create Repo B (Public): This will only hold the generated, static HTML         site.       Configure GitHub Actions in Repo A: You update your existing         .github/workflows/jekyll.yml file to build the site, but instead of         deploying to the local repository, it pushes the compiled _site folder         directly to Repo B.          To do this, you would use an action like peaceiris/actions-gh-pages in your       workflow. It allows deploying to an external repository by using a Personal       Access Token (PAT):                                  - name: Deploy to external public repository   uses: peaceiris/actions-gh-pages@v3   with:     personal_token: $     external_repository: your-username/your-public-repo-B     publish_branch: main     publish_dir: ./_site                             This way, anyone looking at Repo B only sees the final compiled web pages,       while your Org and Markdown source files safely remain in your private       Repo A.      The Jekyll Build Process  By default, Jekyll completely empties the destination directory (_site/) every   time you run a build or start the local server. It does this to ensure no stale,   orphaned files from previous builds are left behind.  Because of this cleaning process, if you initialize a Git repository directly   inside the _site/ folder, the .git/ directory is at the risk of being instantly   deleted the next time Jekyll builds the site.  I say “risk” because there is a built-in safety feature of Jekyll. In general,   to prevent Jekyll from deleting the specific files/folders inside _site/, you   can use the keep_files array in your _config.yml file, like this:                              keep_files:   - .git                         However, even if you do not explicitly define keep_files, Jekyll has underlying   default settings designed specifically to prevent catastrophic data loss. By   default, Jekyll’s internal configuration automatically sets keep_files: [\".git\",   \".svn\"].  Here is exactly what happens to the _site directory when you trigger a build:     Configuration Merge     When you run jekyll build or jekyll serve, Jekyll first loads its system-wide       default configuration. It then layers your _config.yml on top of it. Unless       you explicitly override keep_files with an empty array or tell Jekyll to       overwrite the defaults entirely, .git remains in the internal “safe list.”       The Cleanup Phase (Jekyll::Cleaner)     Before reading any of your new source files, Jekyll instantiates a Cleaner       class. This class scans the entire destination folder (_site/). It iterates       through every file and directory currently sitting in _site/ and checks them       against the merged keep_files array.             If a file or folder is not in the array, it is permanently deleted.       Because .git is in the default array, the cleaner skips it, leaving your         version control history untouched.           The Read and Render Phase     Jekyll scans your root directory (ignoring files that start with _, ., or are       explicitly excluded), processes Liquid tags, converts Markdown and Org files       into HTML, and compiles your SCSS.       The Write Phase     Jekyll writes the newly generated HTML files and copies static assets (like       images and JS files) directly into the clean _site/ folder, effectively       surrounding the preserved .git directory with the fresh build.      The risk is that when you run bundle exec jekyll clean the entire _site   directory is deleted, including the .git/ directory in it, even if you   explicitly specify it in keep_files in your _config.yml.  The reason this happens is that jekyll clean is a brute-force command. Its   explicit purpose is to completely obliterate the generated site and all cache   folders to ensure a perfectly clean slate. It intentionally bypasses the   keep_files array, which is only evaluated by the internal cleaner during jekyll   build or jekyll serve.  Here are the best ways to handle this:     Stop using jekyll clean (Recommended)     You rarely actually need to run jekyll clean. Because jekyll build and jekyll       serve automatically invoke their own safe cleanup phase before generating new       files (the phase that does respect keep_files), stale files are already       removed automatically. You can safely rely entirely on the build/serve       commands.       Clear only the caches manually     If you are running jekyll clean because you are experiencing caching issues       (like SCSS not updating or plugin changes not registering), you can safely       delete the cache folders without touching the _site/ directory at all.      Instead of bundle exec jekyll clean, run:       rm -rf .jekyll-cache .jekyll-metadata           Create a custom clean command     If you want a command that mimics jekyll clean but preserves your .git folder       inside _site/, you can add an alias to your shell profile (like ~/.bashrc or       ~/.zshrc) or create a simple bash script:                                  alias jclean=\"rm -rf .jekyll-cache .jekyll-metadata &amp;&amp; find _site -mindepth 1 -maxdepth 1 ! -name '.git' -exec rm -rf {} +\"                             This instantly deletes the Jekyll caches and wipes everything inside _site/       except the .git/ directory.      The Procedures   Use the Two-Repository Strategy  The most efficient and robust way to manage the Two-Repository Strategy is to   completely decouple your local testing environment from your deployment process.  Attempting to turn the local _site folder into a Git repository is a constant   battle against Jekyll’s internal cleaning mechanisms (see Jekyll Build Process).   The best approach is to treat your local _site folder as a purely temporary,   disposable directory, and let GitHub Actions act as the bridge between Repo A   (Private Source) and Repo B (Public HTML).  The Local Workflow (Repo A)  Make sure you stop tracking the built site entirely in your source repository.     Add _site/ to the .gitignore file in Repo A.   When writing posts or testing configurations, simply run bundle exec jekyll     serve on your Mac.   You never run git commit inside the _site folder. You only commit your source     Markdown, Org files, and configurations to Repo A.  Create and serving Repo B  Now you can create a new repository (Repo B) on GitHub to host the static _site   contents.  To serve your public site from Repo B using GitHub Pages, you need to configure   it to act purely as a static file host. Since Repo A has already done the heavy   lifting of building the Jekyll site, Repo B just needs to serve the finished   HTML.     Ensure Repo B is Public     If you are on a free GitHub account, Repo B must be set to Public. Go to       Settings &gt; General in Repo B, scroll down to the “Danger Zone,” and ensure       the repository visibility is public.       Configure GitHub Pages            In Repo B, go to the Settings &gt; Pages.       Under the Build and deployment section, set the Source dropdown to         Deploy from a branch.       Under the Branch section, select the branch that your GitHub Action         from Repo A is pushing to (usually main, master, or gh-pages).       Select the / (root) folder.       Click Save.           Bypass GitHub’s Default Jekyll Build (Crucial)     By default, GitHub Pages assumes any repository is a raw Jekyll site and will       try to build it again. Since your site is already compiled by Repo A, running       it through Jekyll a second time can break your CSS, strip out folders that       start with an underscore (like _page or _site), or cause build failures.      To tell GitHub Pages to serve the files exactly as they are without       processing them, you need a file named .nojekyll (with no extension) in       the root of Repo B.      If you are using the peaceiris/actions-gh-pages action in Repo A (which we       are using in the following step), the action automatically generates and       includes the file for you by default, so you don’t need to do anything       manually.      If you are using a different deployment method, make sure your workflow in       Repo A creates an empty .nojekyll file in the _site directory before pushing       it to Repo B. You can add a quick step in your workflow right before the       deployment step:                                  - name: Add .nojekyll file   run: touch ./_site/.nojekyll                              Wait for the Deployment     Once you save the Pages settings, GitHub will trigger a very fast deployment       (since it’s just copying static files). Within a minute or two, your site       will be live at https://your-username.github.io/your-public-repo-B/ (or your       custom domain, if you add one in the Pages settings).      The Deployment Bridge (GitHub Actions)  When you push your source code to the private Repo A, a GitHub Action spins   up, builds the site in a clean cloud environment, and pushes the resulting   HTML directly to Repo B.  To set this up:     Generate a Personal Access Token (PAT) in your GitHub Developer Settings     with the repo scope checked.     I highly recommend creating a Fine-grained personal access token.      While the “Tokens (classic)” will absolutely work, they grant sweeping       access to every repository in your account. If a classic token with the       repo scope is ever compromised, the attacker has full control over all       your code.      A fine-grained token allows you to restrict the token’s access strictly to       Repo B (your public HTML repository) and limit it to only the specific       permissions needed to push files.      Here is how to generate the fine-grained token for this exact deployment       setup:             Go to your GitHub Settings &gt; Developer settings (at the very bottom) &gt;         Personal access tokens &gt; Fine-grained tokens.       Click the Generate new token button.       Give your token a name (e.g., “Jekyll Deploy to Repo B”) and set an         expiration date.       Under Repository access, select Only select repositories. In the         dropdown that appears, find and select Repo B (your destination         repository).       Scroll down to Permissions and click on Add permissions to expand it.         Find Contents and change the access level to Read and write. (This is         all the action needs to push your built _site files).       Click Generate token at the bottom of the page.       Copy the generated token immediately, as GitHub will only show it to         you this one time.           Go to the Settings of Repo A, navigate to Secrets and variables &gt; Actions,     and add a new repository secret. Name it DEPLOY_PAT and paste your token.   In Repo A, update your .github/workflows/jekyll.yml file to look like     this:                                 name: Deploy Jekyll site to Repo B  on:   push:     branches:       - master  # Or main, depending on your default branch in Repo A  jobs:   build_and_deploy:     runs-on: ubuntu-latest     steps:       - name: Checkout Source Code         uses: actions/checkout@v4        - name: Setup Ruby         uses: ruby/setup-ruby@v1         with:           ruby-version: '3.1'           bundler-cache: true        - name: Build Site         run: bundle exec jekyll build        - name: Deploy to External Repository         uses: peaceiris/actions-gh-pages@v3         with:           personal_token: $           # Replace with actual Repo B name           external_repository: your-username/Repo-B           # Branch to push to in Repo B           publish_branch: master           publish_dir: ./_site           # Ensures stale files in Repo B are deleted           keep_files: false                             The peaceiris/actions-gh-pages action automatically creates the .nojekyll   file in Repo B, preventing GitHub Pages from trying to rebuild your   already-built files.  Repo B’s history will strictly be clean, automated deployment commits, while   Repo A retains your actual human commit history and draft iterations.  Enable Client-Side Content Encryption  To make a post “private” you have several natively supported keys to add to the   post’s front matter:      published: false —handled by Jekyll natively during its read phase—if a post     has this set, Jekyll completely ignores the file, meaning no HTML is ever     generated.    hidden: true —handled by Minimal Mistakes natively to exclude the post from     pagination loops and recent post lists. You can still visit the post via its     link.    search: false —handled by Minimal Mistakes to exclude a post from the search     index. It only works when the search engine is Lunr.  Now we will enable true private posts by implementing client-side content   encryption. We will add an encrypted key to control the encryption of a post. It   has the following values and their corresponding meanings:      true: Encrypt everything of the post, including the title, TOC, tags, etc.    false: No encryption, the default when unset.    buttitle: Encrypt everything but the title.  Then we use a single, secure master password to decrypt the contents.  Here is an efficient, dependency-free approach to implement this. By utilizing   Ruby’s standard openssl library during the build phase, you can encrypt the post   content before it’s injected into the layout. On the client side, we will use   the standard CryptoJS library via CDN to prompt for the password and decrypt the   content directly in the browser.  Create the Encryption Plugin  Why write custom encryption instead of using a gem like jekyll-crypt?     Dependency Rot: Most Jekyll encryption gems (like jekyll-crypt) haven’t been     updated in over 5 to 8 years. They often rely on outdated versions of CryptoJS     or deprecated Ruby OpenSSL methods, which can pose security risks or cause     build failures on modern Ruby 3.x environments.   UI Integration: Gems force their own rigid HTML/CSS structures for the     password prompt. A custom plugin allows you to seamlessly integrate the prompt     into your Minimal Mistakes theme so it matches your site’s exact aesthetic.   Zero Bloat: You avoid adding third-party dependencies to your Gemfile. Ruby’s     native openssl library is already present, making the custom script the     fastest, most lightweight solution.  Create a new file at _plugins/encrypt_post.rb and add the following code. This   hooks into Jekyll’s build process right after the markdown/org file is converted   to HTML, but before it gets wrapped in your site’s layout.                              require 'openssl' require 'base64' require 'nokogiri' require 'erb'  Jekyll::Hooks.register [:pages, :documents], :post_render do |doc|   enc = doc.data['encrypted']   if enc == true || enc == 'true' || enc == 'buttitle'     doc.data['excerpt'] = \"This post is password protected.\"      if enc == true || enc == 'true'       doc.data['title'] = \"🔒 Protected Content\"       doc.data['read_time'] = false     end      password = ENV['BLOG_PASSWORD']      if password.nil? || password.empty?       doc.output.gsub!(/&lt;body&gt;.*&lt;\\/body&gt;/m, \"&lt;body&gt;&lt;p style='color:red;'&gt;Configuration error: Environment variable BLOG_PASSWORD is missing.&lt;/p&gt;&lt;/body&gt;\")       next     end      # Parse the fully generated HTML page     html = Nokogiri::HTML(doc.output)      if (enc == true || enc == 'true') &amp;&amp; doc.data['real_title']       title_node = html.at_css('h1.page__title')       title_node.content = doc.data['real_title'] if title_node     end      # Target the specific Minimal Mistakes layout blocks     selectors = [       'section.page__content',  # The main text + TOC       'footer.page__meta',      # Tags and categories       'section.page__share',    # Share block       'div.page__comments',     # Comments block       'div.page__related'       # Related posts grid     ]      # If fully encrypted, we also strip and encrypt the title header     if enc == true || enc == 'true'       selectors.unshift('nav.breadcrumbs', 'header')     end      payload = {}      # Extract the HTML of the targets and replace them with placeholders     selectors.each do |selector|       node = html.at_css(selector)       if node         payload[selector] = node.to_html         safe_id = \"secure-placeholder-#{selector.gsub(/[^a-zA-Z0-9]/, '-')}\"         node.replace(\"&lt;div id='#{safe_id}'&gt;&lt;/div&gt;\")       end     end      # Skip if none of the elements are found (e.g., custom layouts)     next if payload.empty?      # Encrypt the extracted HTML bundle     cipher = OpenSSL::Cipher.new('aes-256-cbc')     cipher.encrypt     iv = cipher.random_iv     salt = OpenSSL::Random.random_bytes(16)     key = OpenSSL::PKCS5.pbkdf2_hmac(password.to_s, salt, 10000, cipher.key_len, 'sha256')     cipher.key = key      encrypted_data = cipher.update(payload.to_json) + cipher.final      b64_iv = Base64.strict_encode64(iv)     b64_salt = Base64.strict_encode64(salt)     b64_ciphertext = Base64.strict_encode64(encrypted_data)      # Build the injection UI     template_path = File.join(doc.site.source, '_includes', 'secure_ui.html')     secure_ui = ERB.new(File.read(template_path)).result(binding)      # Inject the UI strictly inside div#main by targeting an inner placeholder     target_selector = (enc == true || enc == 'true') ? 'header' : 'section.page__content'     target_id = \"secure-placeholder-#{target_selector.gsub(/[^a-zA-Z0-9]/, '-')}\"     injection_node = html.at_css(\"##{target_id}\") || html.at_css(\"#secure-placeholder-section-page--content\")     injection_node.add_previous_sibling(secure_ui) if injection_node      # Save the modified HTML back to the document     doc.output = html.to_html   end end                         Create a new file at _includes/secure_ui.html:                              &lt;div id=\"secure-post-container\" class=\"page__content\"&gt;   &lt;div id=\"secure-prompt\"&gt;     &lt;h3 style=\"margin-top: 0;\"&gt;🔒 Protected Content&lt;/h3&gt;     &lt;input type=\"password\" id=\"secure-password\" placeholder=\"Enter password\"&gt;     &lt;button onclick=\"decryptPost()\"&gt;Unlock&lt;/button&gt;     &lt;p id=\"secure-error\"&gt;Incorrect password.&lt;/p&gt;   &lt;/div&gt; &lt;/div&gt;  &lt;style&gt;   #secure-prompt {     text-align: center;     padding: 40px;     border-radius: 8px;     background: rgba(0, 0, 0, 0.05);   }    #secure-prompt input {     padding: 10px;     border: 1px solid #ccc;     border-radius: 4px;     margin-right: 8px;     max-width: 200px;   }    #secure-prompt button {     padding: 10px 20px;     border-radius: 4px;     cursor: pointer;     border: none;     background: #333;     color: white;   }    #secure-error {     color: #d9534f;     display: none;     margin-top: 15px;   } &lt;/style&gt;  &lt;script src=\"https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js\"&gt;&lt;/script&gt; &lt;script&gt;   function decryptPost() {     var pwd = document.getElementById('secure-password').value;     var encryptedData = \"&lt;%= b64_ciphertext %&gt;\";     var salt = CryptoJS.enc.Base64.parse(\"&lt;%= b64_salt %&gt;\");     var iv = CryptoJS.enc.Base64.parse(\"&lt;%= b64_iv %&gt;\");      try {       var key = CryptoJS.PBKDF2(pwd, salt, {         keySize: 256 / 32,         iterations: 10000,         hasher: CryptoJS.algo.SHA256       });       var cipherParams = CryptoJS.lib.CipherParams.create({         ciphertext: CryptoJS.enc.Base64.parse(encryptedData)       });       var decrypted = CryptoJS.AES.decrypt(cipherParams, key, {         iv: iv       });       var decryptedJson = decrypted.toString(CryptoJS.enc.Utf8);        if (!decryptedJson) throw new Error(\"Decryption failed\");       var elements = JSON.parse(decryptedJson);        // Restore each element exactly where its placeholder is       for (var selector in elements) {         var safeId = 'secure-placeholder-' + selector.replace(/[^a-zA-Z0-9]/g, '-');         var placeholder = document.getElementById(safeId);         if (placeholder) placeholder.outerHTML = elements[selector];       }       document.getElementById('secure-post-container').remove();     } catch (e) {       document.getElementById('secure-error').style.display = 'block';       return; // Stop execution if decryption fails     }      // Re-initialize Gumshoe scroll spy init     try {       if (typeof Gumshoe !== 'undefined' &amp;&amp; document.querySelector(\"nav.toc a\")) {         var spy = new Gumshoe(\"nav.toc a\", {           // Active classes           navClass: \"active\", // applied to the nav list item           contentClass: \"active\", // applied to the content            // Nested navigation           nested: false, // if true, add classes to parents of active link           nestedClass: \"active\", // applied to the parent items            // Offset &amp; reflow           offset: 20, // how far from the top of the page to activate a content area           reflow: true, // if true, listen for reflows            // Event support           events: true, // if true, emit custom events         });       }     } catch (e) {       console.warn(\"Gumshoe failed to load\", e);     }      // Re-initialize Disqus comments     try {       if (typeof DISQUS !== 'undefined') {         DISQUS.reset({           reload: true         });       }     } catch (e) {       console.warn(\"Disqus failed to load\", e);     }      // Re-apply image-popup class and re-initialize Magnific Popup     try {       if (typeof jQuery !== 'undefined' &amp;&amp; jQuery.fn.magnificPopup) {         var $imgLinks = jQuery(\"a[href$='.jpg'],a[href$='.jpeg'],a[href$='.JPG'],a[href$='.png'],a[href$='.gif'],a[href$='.webp']\");         $imgLinks.addClass(\"image-popup\");         jQuery('.image-popup').magnificPopup({           type: 'image',           tLoading: 'Loading image #%curr%...',           gallery: { enabled: true, navigateByImgClick: true, preload: [0, 1] },           image: { tError: '&lt;a href=\"%url%\"&gt;Image #%curr%&lt;/a&gt; could not be loaded.' },           removalDelay: 500,           mainClass: 'mfp-zoom-in',           callbacks: {             beforeOpen: function () {               this.st.image.markup = this.st.image.markup.replace('mfp-figure', 'mfp-figure mfp-with-anim');             }           },           closeOnContentClick: true,           midClick: true         });       }     } catch (e) {       console.warn(\"Magnific Popup failed to load\", e);     }   }    document.addEventListener('DOMContentLoaded', function () {     var pwdInput = document.getElementById('secure-password');     if (pwdInput) {       pwdInput.addEventListener('keypress', function (e) {         if (e.key === 'Enter') decryptPost();       });     }   }); &lt;/script&gt;                         Can we do the encryption after everything is initialized or generated so that we   don’t have to handle the re-initializations of Gumshoe, Disqus, image-popup,   etc.?  No, it is fundamentally impossible to do this without completely destroying the   security of your private posts.  Here is the architectural reason why re-initialization is mathematically   unavoidable for true client-side encryption:     The Security Paradox     For plugins like Gumshoe, Disqus, and Magnific Popup to initialize naturally       when the page first loads, the raw, unencrypted HTML (your headings, image       links, and text) must physically exist in the browser’s Document Object Model       (DOM) at the exact moment the page finishes loading.      If the unencrypted HTML is in the DOM when the page loads, the encryption is       completely fake. Anyone could simply right-click the page, select “View Page       Source,” bypass your password prompt, and read the secret content in plain       text. Search engine bots would also scrape it immediately.       The Secure Timeline     True privacy requires the server to scramble the data before it ever travels       over the network. Here is the timeline of what currently happens, which is the       industry standard for secure client-side decryption:              The Server (Jekyll): Encrypts the HTML and packs it into a scrambled         string. The raw content is deleted from the final .html file.        The Browser Load: The browser downloads the page. The JS plugins (Gumshoe,         Disqus) fire immediately. They scan the page, see no headings and no         galleries, and do nothing.        The User Input: The user types the password. The JavaScript decrypts the         scrambled string and injects the restored HTML into the page dynamically.        The Re-initialization: Because the plugins have already run and gone to         sleep during Step 2, you must manually wake them up and tell them to scan         the page again now that the content has appeared.           The Verdict     What you are doing right now—manually triggering .magnificPopup() and       DISQUS.reset() inside the success block—is actually the fastest, most       efficient, and standard best practice in modern web development for handling       dynamically injected DOM content (like in Single Page Applications or AJAX       calls).      Attempting to delay the entire site’s JavaScript execution until after a user       types a password would cause massive performance bottlenecks and break the       layout of your public elements (like the site header and navigation menu)       while the user is looking at the password prompt.      Use a single, secure master password  The industry-standard way to handle secrets without hardcoding them in   configuration files or front matter is through Environment Variables. You will   store the password as a GitHub Secret for your automated deployments, and pass   it inline when testing locally.     Update the GitHub Action     First, go to your private repository settings on GitHub (Settings &gt; Secrets       and variables &gt; Actions). Add a new Repository Secret named POST_PASSWORD and       enter your master password.      Then, update your workflow file to pass this secret into the build       environment:                                  --- .github/workflows/jekyll.yml +++ .github/workflows/jekyll.yml @@ -25,2 +25,3 @@          env:            JEKYLL_ENV: production +          POST_PASSWORD: $                              Local Usage     When you are writing locally and need to test an encrypted post, you simply       pass the variable directly into your terminal command before serving:                                  POST_PASSWORD=\"your_master_password\" bundle exec jekyll serve                             If you don’t want to type it every time, you can add to your ~/.zshrc or       ~/.bashrc file:                                  export POST_PASSWORD=\"your_master_password\"                             Use in Front Matter  Now, you can define your visibility state across your Markdown or Org files   effortlessly.                              --- title: \"My Post\" published: true hidden: false search: false encrypted: true ---                         Testing  This gallery is used to check if gallery works normally after decryption:                                                                                                                                  My custom gallery         ","categories": ["Web"],
        "tags": ["Minimal Mistakes"],
        "url": "/blog/web/private-posts/",
        "teaser": null
      },{
        "title": "MetaCore",
        "excerpt":"Metacore is a lightweight, configurable core platform for building no/low-code applications that run offline or in the cloud. Users create complete apps—data schemas, tables, pages, search, filters, and pagination—through declarative configuration, without traditional coding. It serves as a foundation for personal or internal CMS-style systems to manage collections (books, films, albums) and productivity data (goals, schedules, tasks) using a single unified runtime.  ","categories": [],
        "tags": [],
        "url": "/blog/projects/metacore/",
        "teaser": null
      },{
        "title": "Organki",
        "excerpt":"Organki: Combining the magics of Org Mode and Anki!   Organki is a note-taking tool for learning languages.   If you have experience of learning a foreign language you might have written down a list or lists of words and sentences so that you can somehow memorize all of them. You might have the same struggle as I did - when the list grows and (inevitably) branches off to multiple lists of different topics or categories, things start to get out of hand even if you make a careful curation. Their large sizes and indefinite amount make the effort of maintenance so immense (the same goes to anything that piles up) that you start feeling overwhelmed, feeling this isn’t the way to do it, and eventually, quit.   But wait! Here comes Organki!   Now with Organki you can manage your notes using Org Mode and transpose them into Anki with ease. Well, with that being said, Organki may not be suitable for everyone (but it strives to be!) because it assumes you use both Org Mode and Anki, which is the best open-source note-taking tool and spaced-repetition flashcard software respectively IMHO.  ","categories": [],
        "tags": [],
        "url": "/blog/projects/organki/",
        "teaser": null
      },{
        "title": "The Cosmos",
        "excerpt":"I’m always fascinated by the Cosmos. Here’s a collection of videos that inspire me.     You may also be interested      Eyes on the Solar System  ","categories": [],
        "tags": [],
        "url": "/blog/videos/the-cosmos/",
        "teaser": null
      }]
